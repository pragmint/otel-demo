{"version":3,"file":"module.js","mappings":"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","sources":["webpack:///../../../node_modules/semver/functions/major.js","webpack:///../../../node_modules/semver/ranges/subset.js","webpack:///../../../node_modules/semver/index.js","webpack:///../../../node_modules/semver/internal/debug.js","webpack:///../../../node_modules/semver/ranges/to-comparators.js","webpack:///../../../node_modules/ajv/lib/dotjs/ref.js","webpack:///../../../node_modules/ajv/lib/dotjs/uniqueItems.js","webpack:///../../../node_modules/uri-js/dist/es5/uri.all.js","webpack:///../../../node_modules/semver/ranges/valid.js","webpack:///../../../node_modules/semver/functions/compare-build.js","webpack:///../../../node_modules/semver/ranges/simplify.js","webpack:///../../../node_modules/semver/ranges/intersects.js","webpack:///../../../node_modules/ajv/lib/data.js","webpack:///external amd \"rxjs\"","webpack:///../../../node_modules/ajv/lib/keyword.js","webpack:///../../../node_modules/ajv/lib/dotjs/items.js","webpack:///../../../node_modules/ajv/lib/dotjs/dependencies.js","webpack:///../../../node_modules/ajv/lib/dotjs/required.js","webpack:///../../../node_modules/semver/internal/re.js","webpack:///../../../node_modules/semver/functions/gt.js","webpack:///../../../node_modules/ajv/lib/cache.js","webpack:///../../../node_modules/ajv/lib/dotjs/custom.js","webpack:///../../../node_modules/ajv/lib/dotjs/contains.js","webpack:///../../../node_modules/semver/ranges/min-satisfying.js","webpack:///external amd \"@grafana/ui\"","webpack:///../../../node_modules/semver/ranges/outside.js","webpack:///../../../node_modules/semver/ranges/min-version.js","webpack:///../../../node_modules/ajv/lib/compile/async.js","webpack:///../../../node_modules/ajv/lib/compile/rules.js","webpack:///../../../node_modules/ajv/lib/compile/ucs2length.js","webpack:///../../../node_modules/ajv/lib/dotjs/multipleOf.js","webpack:///../../../node_modules/semver/functions/lte.js","webpack:///../../../node_modules/semver/classes/range.js","webpack:///../../../node_modules/ajv/lib/compile/formats.js","webpack:///../../../node_modules/semver/functions/valid.js","webpack:///../../../node_modules/semver/classes/comparator.js","webpack:///../../../node_modules/semver/functions/clean.js","webpack:///../../../node_modules/semver/internal/parse-options.js","webpack:///../../../node_modules/semver/functions/satisfies.js","webpack:///../../../node_modules/semver/functions/rsort.js","webpack:///../../../node_modules/semver/functions/eq.js","webpack:///../../../node_modules/ajv/lib/dotjs/const.js","webpack:///../../../node_modules/ajv/lib/dotjs/_limitLength.js","webpack:///../../../node_modules/semver/functions/minor.js","webpack:///../../../node_modules/json-schema-traverse/index.js","webpack:///../../../node_modules/semver/functions/coerce.js","webpack:///../../../node_modules/semver/functions/compare.js","webpack:///../../../node_modules/ajv/lib/compile/index.js","webpack:///../../../node_modules/fast-deep-equal/index.js","webpack:///../../../node_modules/ajv/lib/dotjs/_limitProperties.js","webpack:///../../../node_modules/semver/functions/rcompare.js","webpack:///../../../node_modules/semver/functions/prerelease.js","webpack:///../../../node_modules/ajv/lib/ajv.js","webpack:///../../../node_modules/ajv/lib/dotjs/_limit.js","webpack:///../../../node_modules/ajv/lib/dotjs/oneOf.js","webpack:///../../../node_modules/semver/functions/cmp.js","webpack:///../../../node_modules/semver/functions/neq.js","webpack:///../../../node_modules/semver/functions/sort.js","webpack:///../../../node_modules/ajv/lib/dotjs/if.js","webpack:///../../../node_modules/ajv/lib/dotjs/index.js","webpack:///external amd \"react\"","webpack:///../../../node_modules/ajv/lib/dotjs/format.js","webpack:///../../../node_modules/ajv/lib/dotjs/propertyNames.js","webpack:///../../../node_modules/ajv/lib/dotjs/anyOf.js","webpack:///external amd \"@emotion/css\"","webpack:///../../../node_modules/semver/classes/semver.js","webpack:///../../../node_modules/semver/functions/diff.js","webpack:///../../../node_modules/semver/functions/compare-loose.js","webpack:///../../../node_modules/ajv/lib/dotjs/enum.js","webpack:///../../../node_modules/semver/ranges/gtr.js","webpack:///../../../node_modules/ajv/lib/dotjs/allOf.js","webpack:///../../../node_modules/semver/ranges/max-satisfying.js","webpack:///../../../node_modules/ajv/lib/compile/util.js","webpack:///../../../node_modules/ajv/lib/dotjs/_limitItems.js","webpack:///../../../node_modules/semver/internal/lrucache.js","webpack:///../../../node_modules/fast-json-stable-stringify/index.js","webpack:///../../../node_modules/semver/internal/constants.js","webpack:///../../../node_modules/semver/functions/lt.js","webpack:///../../../node_modules/semver/functions/parse.js","webpack:///../../../node_modules/ajv/lib/compile/schema_obj.js","webpack:///external amd \"@grafana/data\"","webpack:///../../../node_modules/ajv/lib/compile/resolve.js","webpack:///../../../node_modules/semver/functions/patch.js","webpack:///../../../node_modules/semver/functions/gte.js","webpack:///../../../node_modules/semver/ranges/ltr.js","webpack:///../../../node_modules/ajv/lib/dotjs/comment.js","webpack:///external amd \"@grafana/runtime\"","webpack:///../../../node_modules/ajv/lib/compile/error_classes.js","webpack:///../../../node_modules/ajv/lib/dotjs/pattern.js","webpack:///../../../node_modules/ajv/lib/dotjs/validate.js","webpack:///../../../node_modules/ajv/lib/dotjs/not.js","webpack:///../../../node_modules/semver/functions/inc.js","webpack:///../../../node_modules/semver/internal/identifiers.js","webpack:///../../../node_modules/ajv/lib/dotjs/properties.js","webpack:///../../../node_modules/ajv/lib/definition_schema.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./components/testIds.ts","webpack:///../../../node_modules/tslib/tslib.es6.mjs","webpack:///../../../node_modules/react-use/esm/useAsync.js","webpack:///../../../node_modules/react-use/esm/useAsyncFn.js","webpack:///../../../node_modules/react-use/esm/useMountedState.js","webpack:///../../../node_modules/zod/v3/helpers/util.js","webpack:///./pages/Models.tsx","webpack:///../../../node_modules/zod/v3/ZodError.js","webpack:///../../../node_modules/zod/v3/locales/en.js","webpack:///../../../node_modules/zod/v3/errors.js","webpack:///../../../node_modules/zod/v3/helpers/errorUtil.js","webpack:///../../../node_modules/zod/v3/helpers/parseUtil.js","webpack:///../../../node_modules/zod/v3/types.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/types.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/shared/protocol.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/client/index.js","webpack:///../../../node_modules/pkce-challenge/dist/index.browser.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/shared/auth.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/server/auth/errors.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/client/auth.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/shared/auth-utils.js","webpack:///../../../node_modules/eventsource-parser/dist/index.js","webpack:///../../../node_modules/eventsource-parser/dist/stream.js","webpack:///../../../node_modules/@modelcontextprotocol/sdk/dist/esm/client/streamableHttp.js","webpack:///../../grafana-llm-frontend/dist/esm/constants.mjs","webpack:///../../grafana-llm-frontend/dist/esm/mcp.mjs","webpack:///./pages/MCPTools.tsx","webpack:///./components/AppConfig/HealthCheck.tsx","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/isFunction.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/lift.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/UnsubscriptionError.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/createErrorClass.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/arrRemove.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/Subscription.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/config.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/scheduler/timeoutProvider.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/noop.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/NotificationFactories.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/errorContext.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/Subscriber.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/reportUnhandledError.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/filter.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/map.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/scanInternals.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/util/identity.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/toArray.js","webpack:///../../../node_modules/uuid/dist/esm-browser/native.js","webpack:///../../../node_modules/uuid/dist/esm-browser/rng.js","webpack:///../../../node_modules/uuid/dist/esm-browser/stringify.js","webpack:///../../../node_modules/uuid/dist/esm-browser/v4.js","webpack:///../../grafana-llm-frontend/dist/esm/llm.mjs","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/scan.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/tap.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js","webpack:///../../../node_modules/rxjs/dist/esm5/internal/operators/reduce.js","webpack:///./components/AppConfig/ModelConfig.tsx","webpack:///./components/AppConfig/DevSandbox/DevSandboxChat.tsx","webpack:///./components/AppConfig/DevSandbox/ToolParameterForm.tsx","webpack:///./components/AppConfig/DevSandbox/DevSandboxToolInspector.tsx","webpack:///./components/AppConfig/DevSandbox/DevSandbox.tsx","webpack:///./components/AppConfig/AzureConfig.tsx","webpack:///./components/AppConfig/OpenAI.tsx","webpack:///./components/AppConfig/OpenAILogo.tsx","webpack:///./components/AppConfig/AnthropicConfig.tsx","webpack:///./components/AppConfig/AnthropicLogo.tsx","webpack:///./components/AppConfig/LLMConfig.tsx","webpack:///./components/AppConfig/AuthSettings/BasicAuth.tsx","webpack:///./components/AppConfig/Vector.tsx","webpack:///./components/AppConfig/AppConfig.tsx","webpack:///./module.ts","webpack:///./pages/MainPage.tsx"],"sourcesContent":["'use strict'\n\nconst SemVer = require('../classes/semver')\nconst major = (a, loose) => new SemVer(a, loose).major\nmodule.exports = major\n","'use strict'\n\nconst Range = require('../classes/range.js')\nconst Comparator = require('../classes/comparator.js')\nconst { ANY } = Comparator\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\n\n// Complex range `r1 || r2 || ...` is a subset of `R1 || R2 || ...` iff:\n// - Every simple range `r1, r2, ...` is a null set, OR\n// - Every simple range `r1, r2, ...` which is not a null set is a subset of\n//   some `R1, R2, ...`\n//\n// Simple range `c1 c2 ...` is a subset of simple range `C1 C2 ...` iff:\n// - If c is only the ANY comparator\n//   - If C is only the ANY comparator, return true\n//   - Else if in prerelease mode, return false\n//   - else replace c with `[>=0.0.0]`\n// - If C is only the ANY comparator\n//   - if in prerelease mode, return true\n//   - else replace C with `[>=0.0.0]`\n// - Let EQ be the set of = comparators in c\n// - If EQ is more than one, return true (null set)\n// - Let GT be the highest > or >= comparator in c\n// - Let LT be the lowest < or <= comparator in c\n// - If GT and LT, and GT.semver > LT.semver, return true (null set)\n// - If any C is a = range, and GT or LT are set, return false\n// - If EQ\n//   - If GT, and EQ does not satisfy GT, return true (null set)\n//   - If LT, and EQ does not satisfy LT, return true (null set)\n//   - If EQ satisfies every C, return true\n//   - Else return false\n// - If GT\n//   - If GT.semver is lower than any > or >= comp in C, return false\n//   - If GT is >=, and GT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the GT.semver tuple, return false\n// - If LT\n//   - If LT.semver is greater than any < or <= comp in C, return false\n//   - If LT is <=, and LT.semver does not satisfy every C, return false\n//   - If GT.semver has a prerelease, and not in prerelease mode\n//     - If no C has a prerelease and the LT.semver tuple, return false\n// - Else return true\n\nconst subset = (sub, dom, options = {}) => {\n  if (sub === dom) {\n    return true\n  }\n\n  sub = new Range(sub, options)\n  dom = new Range(dom, options)\n  let sawNonNull = false\n\n  OUTER: for (const simpleSub of sub.set) {\n    for (const simpleDom of dom.set) {\n      const isSub = simpleSubset(simpleSub, simpleDom, options)\n      sawNonNull = sawNonNull || isSub !== null\n      if (isSub) {\n        continue OUTER\n      }\n    }\n    // the null set is a subset of everything, but null simple ranges in\n    // a complex range should be ignored.  so if we saw a non-null range,\n    // then we know this isn't a subset, but if EVERY simple range was null,\n    // then it is a subset.\n    if (sawNonNull) {\n      return false\n    }\n  }\n  return true\n}\n\nconst minimumVersionWithPreRelease = [new Comparator('>=0.0.0-0')]\nconst minimumVersion = [new Comparator('>=0.0.0')]\n\nconst simpleSubset = (sub, dom, options) => {\n  if (sub === dom) {\n    return true\n  }\n\n  if (sub.length === 1 && sub[0].semver === ANY) {\n    if (dom.length === 1 && dom[0].semver === ANY) {\n      return true\n    } else if (options.includePrerelease) {\n      sub = minimumVersionWithPreRelease\n    } else {\n      sub = minimumVersion\n    }\n  }\n\n  if (dom.length === 1 && dom[0].semver === ANY) {\n    if (options.includePrerelease) {\n      return true\n    } else {\n      dom = minimumVersion\n    }\n  }\n\n  const eqSet = new Set()\n  let gt, lt\n  for (const c of sub) {\n    if (c.operator === '>' || c.operator === '>=') {\n      gt = higherGT(gt, c, options)\n    } else if (c.operator === '<' || c.operator === '<=') {\n      lt = lowerLT(lt, c, options)\n    } else {\n      eqSet.add(c.semver)\n    }\n  }\n\n  if (eqSet.size > 1) {\n    return null\n  }\n\n  let gtltComp\n  if (gt && lt) {\n    gtltComp = compare(gt.semver, lt.semver, options)\n    if (gtltComp > 0) {\n      return null\n    } else if (gtltComp === 0 && (gt.operator !== '>=' || lt.operator !== '<=')) {\n      return null\n    }\n  }\n\n  // will iterate one or zero times\n  for (const eq of eqSet) {\n    if (gt && !satisfies(eq, String(gt), options)) {\n      return null\n    }\n\n    if (lt && !satisfies(eq, String(lt), options)) {\n      return null\n    }\n\n    for (const c of dom) {\n      if (!satisfies(eq, String(c), options)) {\n        return false\n      }\n    }\n\n    return true\n  }\n\n  let higher, lower\n  let hasDomLT, hasDomGT\n  // if the subset has a prerelease, we need a comparator in the superset\n  // with the same tuple and a prerelease, or it's not a subset\n  let needDomLTPre = lt &&\n    !options.includePrerelease &&\n    lt.semver.prerelease.length ? lt.semver : false\n  let needDomGTPre = gt &&\n    !options.includePrerelease &&\n    gt.semver.prerelease.length ? gt.semver : false\n  // exception: <1.2.3-0 is the same as <1.2.3\n  if (needDomLTPre && needDomLTPre.prerelease.length === 1 &&\n      lt.operator === '<' && needDomLTPre.prerelease[0] === 0) {\n    needDomLTPre = false\n  }\n\n  for (const c of dom) {\n    hasDomGT = hasDomGT || c.operator === '>' || c.operator === '>='\n    hasDomLT = hasDomLT || c.operator === '<' || c.operator === '<='\n    if (gt) {\n      if (needDomGTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomGTPre.major &&\n            c.semver.minor === needDomGTPre.minor &&\n            c.semver.patch === needDomGTPre.patch) {\n          needDomGTPre = false\n        }\n      }\n      if (c.operator === '>' || c.operator === '>=') {\n        higher = higherGT(gt, c, options)\n        if (higher === c && higher !== gt) {\n          return false\n        }\n      } else if (gt.operator === '>=' && !satisfies(gt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (lt) {\n      if (needDomLTPre) {\n        if (c.semver.prerelease && c.semver.prerelease.length &&\n            c.semver.major === needDomLTPre.major &&\n            c.semver.minor === needDomLTPre.minor &&\n            c.semver.patch === needDomLTPre.patch) {\n          needDomLTPre = false\n        }\n      }\n      if (c.operator === '<' || c.operator === '<=') {\n        lower = lowerLT(lt, c, options)\n        if (lower === c && lower !== lt) {\n          return false\n        }\n      } else if (lt.operator === '<=' && !satisfies(lt.semver, String(c), options)) {\n        return false\n      }\n    }\n    if (!c.operator && (lt || gt) && gtltComp !== 0) {\n      return false\n    }\n  }\n\n  // if there was a < or >, and nothing in the dom, then must be false\n  // UNLESS it was limited by another range in the other direction.\n  // Eg, >1.0.0 <1.0.1 is still a subset of <2.0.0\n  if (gt && hasDomLT && !lt && gtltComp !== 0) {\n    return false\n  }\n\n  if (lt && hasDomGT && !gt && gtltComp !== 0) {\n    return false\n  }\n\n  // we needed a prerelease range in a specific tuple, but didn't get one\n  // then this isn't a subset.  eg >=1.2.3-pre is not a subset of >=1.0.0,\n  // because it includes prereleases in the 1.2.3 tuple\n  if (needDomGTPre || needDomLTPre) {\n    return false\n  }\n\n  return true\n}\n\n// >=1.2.3 is lower than >1.2.3\nconst higherGT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp > 0 ? a\n    : comp < 0 ? b\n    : b.operator === '>' && a.operator === '>=' ? b\n    : a\n}\n\n// <=1.2.3 is higher than <1.2.3\nconst lowerLT = (a, b, options) => {\n  if (!a) {\n    return b\n  }\n  const comp = compare(a.semver, b.semver, options)\n  return comp < 0 ? a\n    : comp > 0 ? b\n    : b.operator === '<' && a.operator === '<=' ? b\n    : a\n}\n\nmodule.exports = subset\n","'use strict'\n\n// just pre-load all the stuff that index.js lazily exports\nconst internalRe = require('./internal/re')\nconst constants = require('./internal/constants')\nconst SemVer = require('./classes/semver')\nconst identifiers = require('./internal/identifiers')\nconst parse = require('./functions/parse')\nconst valid = require('./functions/valid')\nconst clean = require('./functions/clean')\nconst inc = require('./functions/inc')\nconst diff = require('./functions/diff')\nconst major = require('./functions/major')\nconst minor = require('./functions/minor')\nconst patch = require('./functions/patch')\nconst prerelease = require('./functions/prerelease')\nconst compare = require('./functions/compare')\nconst rcompare = require('./functions/rcompare')\nconst compareLoose = require('./functions/compare-loose')\nconst compareBuild = require('./functions/compare-build')\nconst sort = require('./functions/sort')\nconst rsort = require('./functions/rsort')\nconst gt = require('./functions/gt')\nconst lt = require('./functions/lt')\nconst eq = require('./functions/eq')\nconst neq = require('./functions/neq')\nconst gte = require('./functions/gte')\nconst lte = require('./functions/lte')\nconst cmp = require('./functions/cmp')\nconst coerce = require('./functions/coerce')\nconst Comparator = require('./classes/comparator')\nconst Range = require('./classes/range')\nconst satisfies = require('./functions/satisfies')\nconst toComparators = require('./ranges/to-comparators')\nconst maxSatisfying = require('./ranges/max-satisfying')\nconst minSatisfying = require('./ranges/min-satisfying')\nconst minVersion = require('./ranges/min-version')\nconst validRange = require('./ranges/valid')\nconst outside = require('./ranges/outside')\nconst gtr = require('./ranges/gtr')\nconst ltr = require('./ranges/ltr')\nconst intersects = require('./ranges/intersects')\nconst simplifyRange = require('./ranges/simplify')\nconst subset = require('./ranges/subset')\nmodule.exports = {\n  parse,\n  valid,\n  clean,\n  inc,\n  diff,\n  major,\n  minor,\n  patch,\n  prerelease,\n  compare,\n  rcompare,\n  compareLoose,\n  compareBuild,\n  sort,\n  rsort,\n  gt,\n  lt,\n  eq,\n  neq,\n  gte,\n  lte,\n  cmp,\n  coerce,\n  Comparator,\n  Range,\n  satisfies,\n  toComparators,\n  maxSatisfying,\n  minSatisfying,\n  minVersion,\n  validRange,\n  outside,\n  gtr,\n  ltr,\n  intersects,\n  simplifyRange,\n  subset,\n  SemVer,\n  re: internalRe.re,\n  src: internalRe.src,\n  tokens: internalRe.t,\n  SEMVER_SPEC_VERSION: constants.SEMVER_SPEC_VERSION,\n  RELEASE_TYPES: constants.RELEASE_TYPES,\n  compareIdentifiers: identifiers.compareIdentifiers,\n  rcompareIdentifiers: identifiers.rcompareIdentifiers,\n}\n","'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n","'use strict'\n\nconst Range = require('../classes/range')\n\n// Mostly just for testing and legacy API reasons\nconst toComparators = (range, options) =>\n  new Range(range, options).set\n    .map(comp => comp.map(c => c.value).join(' ').trim().split(' '))\n\nmodule.exports = toComparators\n","'use strict';\nmodule.exports = function generate_ref(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $async, $refCode;\n  if ($schema == '#' || $schema == '#/') {\n    if (it.isRoot) {\n      $async = it.async;\n      $refCode = 'validate';\n    } else {\n      $async = it.root.schema.$async === true;\n      $refCode = 'root.refVal[0]';\n    }\n  } else {\n    var $refVal = it.resolveRef(it.baseId, $schema, it.isRoot);\n    if ($refVal === undefined) {\n      var $message = it.MissingRefError.message(it.baseId, $schema);\n      if (it.opts.missingRefs == 'fail') {\n        it.logger.error($message);\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('$ref') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { ref: \\'' + (it.util.escapeQuotes($schema)) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'can\\\\\\'t resolve reference ' + (it.util.escapeQuotes($schema)) + '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: ' + (it.util.toQuotedString($schema)) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        if ($breakOnError) {\n          out += ' if (false) { ';\n        }\n      } else if (it.opts.missingRefs == 'ignore') {\n        it.logger.warn($message);\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n      } else {\n        throw new it.MissingRefError(it.baseId, $schema, $message);\n      }\n    } else if ($refVal.inline) {\n      var $it = it.util.copy(it);\n      $it.level++;\n      var $nextValid = 'valid' + $it.level;\n      $it.schema = $refVal.schema;\n      $it.schemaPath = '';\n      $it.errSchemaPath = $schema;\n      var $code = it.validate($it).replace(/validate\\.schema/g, $refVal.code);\n      out += ' ' + ($code) + ' ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n      }\n    } else {\n      $async = $refVal.$async === true || (it.async && $refVal.$async !== false);\n      $refCode = $refVal.code;\n    }\n  }\n  if ($refCode) {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    if (it.opts.passContext) {\n      out += ' ' + ($refCode) + '.call(this, ';\n    } else {\n      out += ' ' + ($refCode) + '( ';\n    }\n    out += ' ' + ($data) + ', (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ', rootData)  ';\n    var __callValidate = out;\n    out = $$outStack.pop();\n    if ($async) {\n      if (!it.async) throw new Error('async schema referenced by sync schema');\n      if ($breakOnError) {\n        out += ' var ' + ($valid) + '; ';\n      }\n      out += ' try { await ' + (__callValidate) + '; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = true; ';\n      }\n      out += ' } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ';\n      if ($breakOnError) {\n        out += ' ' + ($valid) + ' = false; ';\n      }\n      out += ' } ';\n      if ($breakOnError) {\n        out += ' if (' + ($valid) + ') { ';\n      }\n    } else {\n      out += ' if (!' + (__callValidate) + ') { if (vErrors === null) vErrors = ' + ($refCode) + '.errors; else vErrors = vErrors.concat(' + ($refCode) + '.errors); errors = vErrors.length; } ';\n      if ($breakOnError) {\n        out += ' else { ';\n      }\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_uniqueItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (($schema || $isData) && it.opts.uniqueItems !== false) {\n    if ($isData) {\n      out += ' var ' + ($valid) + '; if (' + ($schemaValue) + ' === false || ' + ($schemaValue) + ' === undefined) ' + ($valid) + ' = true; else if (typeof ' + ($schemaValue) + ' != \\'boolean\\') ' + ($valid) + ' = false; else { ';\n    }\n    out += ' var i = ' + ($data) + '.length , ' + ($valid) + ' = true , j; if (i > 1) { ';\n    var $itemType = it.schema.items && it.schema.items.type,\n      $typeIsArray = Array.isArray($itemType);\n    if (!$itemType || $itemType == 'object' || $itemType == 'array' || ($typeIsArray && ($itemType.indexOf('object') >= 0 || $itemType.indexOf('array') >= 0))) {\n      out += ' outer: for (;i--;) { for (j = i; j--;) { if (equal(' + ($data) + '[i], ' + ($data) + '[j])) { ' + ($valid) + ' = false; break outer; } } } ';\n    } else {\n      out += ' var itemIndices = {}, item; for (;i--;) { var item = ' + ($data) + '[i]; ';\n      var $method = 'checkDataType' + ($typeIsArray ? 's' : '');\n      out += ' if (' + (it.util[$method]($itemType, 'item', it.opts.strictNumbers, true)) + ') continue; ';\n      if ($typeIsArray) {\n        out += ' if (typeof item == \\'string\\') item = \\'\"\\' + item; ';\n      }\n      out += ' if (typeof itemIndices[item] == \\'number\\') { ' + ($valid) + ' = false; j = itemIndices[item]; break; } itemIndices[item] = i; } ';\n    }\n    out += ' } ';\n    if ($isData) {\n      out += '  }  ';\n    }\n    out += ' if (!' + ($valid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('uniqueItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { i: i, j: j } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT have duplicate items (items ## \\' + j + \\' and \\' + i + \\' are identical)\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema:  ';\n        if ($isData) {\n          out += 'validate.schema' + ($schemaPath);\n        } else {\n          out += '' + ($schema);\n        }\n        out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.URI = global.URI || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction merge() {\n    for (var _len = arguments.length, sets = Array(_len), _key = 0; _key < _len; _key++) {\n        sets[_key] = arguments[_key];\n    }\n\n    if (sets.length > 1) {\n        sets[0] = sets[0].slice(0, -1);\n        var xl = sets.length - 1;\n        for (var x = 1; x < xl; ++x) {\n            sets[x] = sets[x].slice(1, -1);\n        }\n        sets[xl] = sets[xl].slice(1);\n        return sets.join('');\n    } else {\n        return sets[0];\n    }\n}\nfunction subexp(str) {\n    return \"(?:\" + str + \")\";\n}\nfunction typeOf(o) {\n    return o === undefined ? \"undefined\" : o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase();\n}\nfunction toUpperCase(str) {\n    return str.toUpperCase();\n}\nfunction toArray(obj) {\n    return obj !== undefined && obj !== null ? obj instanceof Array ? obj : typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj) : [];\n}\nfunction assign(target, source) {\n    var obj = target;\n    if (source) {\n        for (var key in source) {\n            obj[key] = source[key];\n        }\n    }\n    return obj;\n}\n\nfunction buildExps(isIRI) {\n    var ALPHA$$ = \"[A-Za-z]\",\n        CR$ = \"[\\\\x0D]\",\n        DIGIT$$ = \"[0-9]\",\n        DQUOTE$$ = \"[\\\\x22]\",\n        HEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"),\n        //case-insensitive\n    LF$$ = \"[\\\\x0A]\",\n        SP$$ = \"[\\\\x20]\",\n        PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)),\n        //expanded\n    GEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\n        SUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\n        RESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n        UCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\",\n        //subset, excludes bidi control characters\n    IPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\",\n        //subset\n    UNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$),\n        SCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\n        USERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\n        DEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\n        DEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$),\n        //relaxed parsing rules\n    IPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$),\n        H16$ = subexp(HEXDIG$$ + \"{1,4}\"),\n        LS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\n        IPV6ADDRESS1$ = subexp(subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$),\n        //                           6( h16 \":\" ) ls32\n    IPV6ADDRESS2$ = subexp(\"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$),\n        //                      \"::\" 5( h16 \":\" ) ls32\n    IPV6ADDRESS3$ = subexp(subexp(H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$),\n        //[               h16 ] \"::\" 4( h16 \":\" ) ls32\n    IPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$),\n        //[ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n    IPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$),\n        //[ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n    IPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" + H16$ + \"\\\\:\" + LS32$),\n        //[ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n    IPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\" + LS32$),\n        //[ *4( h16 \":\" ) h16 ] \"::\"              ls32\n    IPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\" + H16$),\n        //[ *5( h16 \":\" ) h16 ] \"::\"              h16\n    IPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"),\n        //[ *6( h16 \":\" ) h16 ] \"::\"\n    IPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")),\n        ZONEID$ = subexp(subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$) + \"+\"),\n        //RFC 6874\n    IPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \"\\\\%25\" + ZONEID$),\n        //RFC 6874\n    IPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + ZONEID$),\n        //RFC 6874, with relaxed parsing rules\n    IPVFUTURE$ = subexp(\"[vV]\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\n        IP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRZ_RELAXED$ + \"|\" + IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\n        //RFC 6874\n    REG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\n        HOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$),\n        PORT$ = subexp(DIGIT$$ + \"*\"),\n        AUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\n        PCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\n        SEGMENT$ = subexp(PCHAR$ + \"*\"),\n        SEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\n        SEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\n        PATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\n        PATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),\n        //simplified\n    PATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\",\n        PATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        QUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"),\n        FRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\n        HIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        RELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\n        RELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        URI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\n        ABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\n        GENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        RELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        ABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\n        SAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        AUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\";\n    return {\n        NOT_SCHEME: new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n        NOT_USERINFO: new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_HOST: new RegExp(merge(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH: new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH_NOSCHEME: new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_QUERY: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n        NOT_FRAGMENT: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n        ESCAPE: new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        UNRESERVED: new RegExp(UNRESERVED$$, \"g\"),\n        OTHER_CHARS: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\n        PCT_ENCODED: new RegExp(PCT_ENCODED$, \"g\"),\n        IPV4ADDRESS: new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n        IPV6ADDRESS: new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\") //RFC 6874, with relaxed parsing rules\n    };\n}\nvar URI_PROTOCOL = buildExps(false);\n\nvar IRI_PROTOCOL = buildExps(true);\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/** Highest positive signed 32-bit float value */\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error$1(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tvar result = [];\n\tvar length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tvar parts = string.split('@');\n\tvar result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tvar labels = string.split('.');\n\tvar encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\twhile (counter < length) {\n\t\tvar value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tvar extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) {\n\t\t\t\t// Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nvar ucs2encode = function ucs2encode(array) {\n\treturn String.fromCodePoint.apply(String, toConsumableArray(array));\n};\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nvar basicToDigit = function basicToDigit(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nvar digitToBasic = function digitToBasic(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nvar adapt = function adapt(delta, numPoints, firstTime) {\n\tvar k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (; /* no initialization */delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nvar decode = function decode(input) {\n\t// Don't use UCS-2.\n\tvar output = [];\n\tvar inputLength = input.length;\n\tvar i = 0;\n\tvar n = initialN;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tvar basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (var j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror$1('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (var index = basic > 0 ? basic + 1 : 0; index < inputLength;) /* no final expression */{\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tvar oldi = i;\n\t\tfor (var w = 1, k = base;; /* no condition */k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror$1('invalid-input');\n\t\t\t}\n\n\t\t\tvar digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\t\t}\n\n\t\tvar out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\t}\n\n\treturn String.fromCodePoint.apply(String, output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nvar encode = function encode(input) {\n\tvar output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tvar inputLength = input.length;\n\n\t// Initialize the state.\n\tvar n = initialN;\n\tvar delta = 0;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points.\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = input[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar _currentValue2 = _step.value;\n\n\t\t\tif (_currentValue2 < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(_currentValue2));\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t_iterator.return();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar basicLength = output.length;\n\tvar handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tvar m = maxInt;\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = input[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar currentValue = _step2.value;\n\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow.\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = input[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar _currentValue = _step3.value;\n\n\t\t\t\tif (_currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror$1('overflow');\n\t\t\t\t}\n\t\t\t\tif (_currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\t\tvar q = delta;\n\t\t\t\t\tfor (var k = base;; /* no condition */k += base) {\n\t\t\t\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar qMinusT = q - t;\n\t\t\t\t\t\tvar baseMinusT = base - t;\n\t\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nvar toUnicode = function toUnicode(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nvar toASCII = function toASCII(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nvar punycode = {\n\t/**\n  * A string representing the current Punycode.js version number.\n  * @memberOf punycode\n  * @type String\n  */\n\t'version': '2.1.0',\n\t/**\n  * An object of methods to convert from JavaScript's internal character\n  * representation (UCS-2) to Unicode code points, and back.\n  * @see <https://mathiasbynens.be/notes/javascript-encoding>\n  * @memberOf punycode\n  * @type Object\n  */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\n/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\nvar SCHEMES = {};\nfunction pctEncChar(chr) {\n    var c = chr.charCodeAt(0);\n    var e = void 0;\n    if (c < 16) e = \"%0\" + c.toString(16).toUpperCase();else if (c < 128) e = \"%\" + c.toString(16).toUpperCase();else if (c < 2048) e = \"%\" + (c >> 6 | 192).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();else e = \"%\" + (c >> 12 | 224).toString(16).toUpperCase() + \"%\" + (c >> 6 & 63 | 128).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();\n    return e;\n}\nfunction pctDecChars(str) {\n    var newStr = \"\";\n    var i = 0;\n    var il = str.length;\n    while (i < il) {\n        var c = parseInt(str.substr(i + 1, 2), 16);\n        if (c < 128) {\n            newStr += String.fromCharCode(c);\n            i += 3;\n        } else if (c >= 194 && c < 224) {\n            if (il - i >= 6) {\n                var c2 = parseInt(str.substr(i + 4, 2), 16);\n                newStr += String.fromCharCode((c & 31) << 6 | c2 & 63);\n            } else {\n                newStr += str.substr(i, 6);\n            }\n            i += 6;\n        } else if (c >= 224) {\n            if (il - i >= 9) {\n                var _c = parseInt(str.substr(i + 4, 2), 16);\n                var c3 = parseInt(str.substr(i + 7, 2), 16);\n                newStr += String.fromCharCode((c & 15) << 12 | (_c & 63) << 6 | c3 & 63);\n            } else {\n                newStr += str.substr(i, 9);\n            }\n            i += 9;\n        } else {\n            newStr += str.substr(i, 3);\n            i += 3;\n        }\n    }\n    return newStr;\n}\nfunction _normalizeComponentEncoding(components, protocol) {\n    function decodeUnreserved(str) {\n        var decStr = pctDecChars(str);\n        return !decStr.match(protocol.UNRESERVED) ? str : decStr;\n    }\n    if (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n    if (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    return components;\n}\n\nfunction _stripLeadingZeros(str) {\n    return str.replace(/^0*(.*)/, \"$1\") || \"0\";\n}\nfunction _normalizeIPv4(host, protocol) {\n    var matches = host.match(protocol.IPV4ADDRESS) || [];\n\n    var _matches = slicedToArray(matches, 2),\n        address = _matches[1];\n\n    if (address) {\n        return address.split(\".\").map(_stripLeadingZeros).join(\".\");\n    } else {\n        return host;\n    }\n}\nfunction _normalizeIPv6(host, protocol) {\n    var matches = host.match(protocol.IPV6ADDRESS) || [];\n\n    var _matches2 = slicedToArray(matches, 3),\n        address = _matches2[1],\n        zone = _matches2[2];\n\n    if (address) {\n        var _address$toLowerCase$ = address.toLowerCase().split('::').reverse(),\n            _address$toLowerCase$2 = slicedToArray(_address$toLowerCase$, 2),\n            last = _address$toLowerCase$2[0],\n            first = _address$toLowerCase$2[1];\n\n        var firstFields = first ? first.split(\":\").map(_stripLeadingZeros) : [];\n        var lastFields = last.split(\":\").map(_stripLeadingZeros);\n        var isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n        var fieldCount = isLastFieldIPv4Address ? 7 : 8;\n        var lastFieldsStart = lastFields.length - fieldCount;\n        var fields = Array(fieldCount);\n        for (var x = 0; x < fieldCount; ++x) {\n            fields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n        }\n        if (isLastFieldIPv4Address) {\n            fields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n        }\n        var allZeroFields = fields.reduce(function (acc, field, index) {\n            if (!field || field === \"0\") {\n                var lastLongest = acc[acc.length - 1];\n                if (lastLongest && lastLongest.index + lastLongest.length === index) {\n                    lastLongest.length++;\n                } else {\n                    acc.push({ index: index, length: 1 });\n                }\n            }\n            return acc;\n        }, []);\n        var longestZeroFields = allZeroFields.sort(function (a, b) {\n            return b.length - a.length;\n        })[0];\n        var newHost = void 0;\n        if (longestZeroFields && longestZeroFields.length > 1) {\n            var newFirst = fields.slice(0, longestZeroFields.index);\n            var newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n            newHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n        } else {\n            newHost = fields.join(\":\");\n        }\n        if (zone) {\n            newHost += \"%\" + zone;\n        }\n        return newHost;\n    } else {\n        return host;\n    }\n}\nvar URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nvar NO_MATCH_IS_UNDEFINED = \"\".match(/(){0}/)[1] === undefined;\nfunction parse(uriString) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var components = {};\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    if (options.reference === \"suffix\") uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n    var matches = uriString.match(URI_PARSE);\n    if (matches) {\n        if (NO_MATCH_IS_UNDEFINED) {\n            //store each component\n            components.scheme = matches[1];\n            components.userinfo = matches[3];\n            components.host = matches[4];\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = matches[7];\n            components.fragment = matches[8];\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = matches[5];\n            }\n        } else {\n            //IE FIX for improper RegExp matching\n            //store each component\n            components.scheme = matches[1] || undefined;\n            components.userinfo = uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined;\n            components.host = uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined;\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined;\n            components.fragment = uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined;\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined;\n            }\n        }\n        if (components.host) {\n            //normalize IP hosts\n            components.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n        }\n        //determine reference type\n        if (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n            components.reference = \"same-document\";\n        } else if (components.scheme === undefined) {\n            components.reference = \"relative\";\n        } else if (components.fragment === undefined) {\n            components.reference = \"absolute\";\n        } else {\n            components.reference = \"uri\";\n        }\n        //check for reference errors\n        if (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n            components.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n        }\n        //find scheme handler\n        var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n        //check if scheme can't handle IRIs\n        if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n            //if host component is a domain name\n            if (components.host && (options.domainHost || schemeHandler && schemeHandler.domainHost)) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            }\n            //convert IRI -> URI\n            _normalizeComponentEncoding(components, URI_PROTOCOL);\n        } else {\n            //normalize encodings\n            _normalizeComponentEncoding(components, protocol);\n        }\n        //perform scheme specific parsing\n        if (schemeHandler && schemeHandler.parse) {\n            schemeHandler.parse(components, options);\n        }\n    } else {\n        components.error = components.error || \"URI can not be parsed.\";\n    }\n    return components;\n}\n\nfunction _recomposeAuthority(components, options) {\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    if (components.userinfo !== undefined) {\n        uriTokens.push(components.userinfo);\n        uriTokens.push(\"@\");\n    }\n    if (components.host !== undefined) {\n        //normalize IP hosts, add brackets and escape zone separator for IPv6\n        uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, function (_, $1, $2) {\n            return \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\";\n        }));\n    }\n    if (typeof components.port === \"number\" || typeof components.port === \"string\") {\n        uriTokens.push(\":\");\n        uriTokens.push(String(components.port));\n    }\n    return uriTokens.length ? uriTokens.join(\"\") : undefined;\n}\n\nvar RDS1 = /^\\.\\.?\\//;\nvar RDS2 = /^\\/\\.(\\/|$)/;\nvar RDS3 = /^\\/\\.\\.(\\/|$)/;\nvar RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\nfunction removeDotSegments(input) {\n    var output = [];\n    while (input.length) {\n        if (input.match(RDS1)) {\n            input = input.replace(RDS1, \"\");\n        } else if (input.match(RDS2)) {\n            input = input.replace(RDS2, \"/\");\n        } else if (input.match(RDS3)) {\n            input = input.replace(RDS3, \"/\");\n            output.pop();\n        } else if (input === \".\" || input === \"..\") {\n            input = \"\";\n        } else {\n            var im = input.match(RDS5);\n            if (im) {\n                var s = im[0];\n                input = input.slice(s.length);\n                output.push(s);\n            } else {\n                throw new Error(\"Unexpected dot segment condition\");\n            }\n        }\n    }\n    return output.join(\"\");\n}\n\nfunction serialize(components) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var protocol = options.iri ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    //find scheme handler\n    var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n    //perform scheme specific serialization\n    if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n    if (components.host) {\n        //if host component is an IPv6 address\n        if (protocol.IPV6ADDRESS.test(components.host)) {}\n        //TODO: normalize IPv6 address as per RFC 5952\n\n        //if host component is a domain name\n        else if (options.domainHost || schemeHandler && schemeHandler.domainHost) {\n                //convert IDN via punycode\n                try {\n                    components.host = !options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host);\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n            }\n    }\n    //normalize encoding\n    _normalizeComponentEncoding(components, protocol);\n    if (options.reference !== \"suffix\" && components.scheme) {\n        uriTokens.push(components.scheme);\n        uriTokens.push(\":\");\n    }\n    var authority = _recomposeAuthority(components, options);\n    if (authority !== undefined) {\n        if (options.reference !== \"suffix\") {\n            uriTokens.push(\"//\");\n        }\n        uriTokens.push(authority);\n        if (components.path && components.path.charAt(0) !== \"/\") {\n            uriTokens.push(\"/\");\n        }\n    }\n    if (components.path !== undefined) {\n        var s = components.path;\n        if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n            s = removeDotSegments(s);\n        }\n        if (authority === undefined) {\n            s = s.replace(/^\\/\\//, \"/%2F\"); //don't allow the path to start with \"//\"\n        }\n        uriTokens.push(s);\n    }\n    if (components.query !== undefined) {\n        uriTokens.push(\"?\");\n        uriTokens.push(components.query);\n    }\n    if (components.fragment !== undefined) {\n        uriTokens.push(\"#\");\n        uriTokens.push(components.fragment);\n    }\n    return uriTokens.join(\"\"); //merge tokens into a string\n}\n\nfunction resolveComponents(base, relative) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var skipNormalization = arguments[3];\n\n    var target = {};\n    if (!skipNormalization) {\n        base = parse(serialize(base, options), options); //normalize base components\n        relative = parse(serialize(relative, options), options); //normalize relative components\n    }\n    options = options || {};\n    if (!options.tolerant && relative.scheme) {\n        target.scheme = relative.scheme;\n        //target.authority = relative.authority;\n        target.userinfo = relative.userinfo;\n        target.host = relative.host;\n        target.port = relative.port;\n        target.path = removeDotSegments(relative.path || \"\");\n        target.query = relative.query;\n    } else {\n        if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n            //target.authority = relative.authority;\n            target.userinfo = relative.userinfo;\n            target.host = relative.host;\n            target.port = relative.port;\n            target.path = removeDotSegments(relative.path || \"\");\n            target.query = relative.query;\n        } else {\n            if (!relative.path) {\n                target.path = base.path;\n                if (relative.query !== undefined) {\n                    target.query = relative.query;\n                } else {\n                    target.query = base.query;\n                }\n            } else {\n                if (relative.path.charAt(0) === \"/\") {\n                    target.path = removeDotSegments(relative.path);\n                } else {\n                    if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n                        target.path = \"/\" + relative.path;\n                    } else if (!base.path) {\n                        target.path = relative.path;\n                    } else {\n                        target.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\n                    }\n                    target.path = removeDotSegments(target.path);\n                }\n                target.query = relative.query;\n            }\n            //target.authority = base.authority;\n            target.userinfo = base.userinfo;\n            target.host = base.host;\n            target.port = base.port;\n        }\n        target.scheme = base.scheme;\n    }\n    target.fragment = relative.fragment;\n    return target;\n}\n\nfunction resolve(baseURI, relativeURI, options) {\n    var schemelessOptions = assign({ scheme: 'null' }, options);\n    return serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n}\n\nfunction normalize(uri, options) {\n    if (typeof uri === \"string\") {\n        uri = serialize(parse(uri, options), options);\n    } else if (typeOf(uri) === \"object\") {\n        uri = parse(serialize(uri, options), options);\n    }\n    return uri;\n}\n\nfunction equal(uriA, uriB, options) {\n    if (typeof uriA === \"string\") {\n        uriA = serialize(parse(uriA, options), options);\n    } else if (typeOf(uriA) === \"object\") {\n        uriA = serialize(uriA, options);\n    }\n    if (typeof uriB === \"string\") {\n        uriB = serialize(parse(uriB, options), options);\n    } else if (typeOf(uriB) === \"object\") {\n        uriB = serialize(uriB, options);\n    }\n    return uriA === uriB;\n}\n\nfunction escapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE, pctEncChar);\n}\n\nfunction unescapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED, pctDecChars);\n}\n\nvar handler = {\n    scheme: \"http\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        //report missing host\n        if (!components.host) {\n            components.error = components.error || \"HTTP URIs must have a host.\";\n        }\n        return components;\n    },\n    serialize: function serialize(components, options) {\n        var secure = String(components.scheme).toLowerCase() === \"https\";\n        //normalize the default port\n        if (components.port === (secure ? 443 : 80) || components.port === \"\") {\n            components.port = undefined;\n        }\n        //normalize the empty path\n        if (!components.path) {\n            components.path = \"/\";\n        }\n        //NOTE: We do not parse query strings for HTTP URIs\n        //as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n        //and not the HTTP spec.\n        return components;\n    }\n};\n\nvar handler$1 = {\n    scheme: \"https\",\n    domainHost: handler.domainHost,\n    parse: handler.parse,\n    serialize: handler.serialize\n};\n\nfunction isSecure(wsComponents) {\n    return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n}\n//RFC 6455\nvar handler$2 = {\n    scheme: \"ws\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        var wsComponents = components;\n        //indicate if the secure flag is set\n        wsComponents.secure = isSecure(wsComponents);\n        //construct resouce name\n        wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');\n        wsComponents.path = undefined;\n        wsComponents.query = undefined;\n        return wsComponents;\n    },\n    serialize: function serialize(wsComponents, options) {\n        //normalize the default port\n        if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n            wsComponents.port = undefined;\n        }\n        //ensure scheme matches secure flag\n        if (typeof wsComponents.secure === 'boolean') {\n            wsComponents.scheme = wsComponents.secure ? 'wss' : 'ws';\n            wsComponents.secure = undefined;\n        }\n        //reconstruct path from resource name\n        if (wsComponents.resourceName) {\n            var _wsComponents$resourc = wsComponents.resourceName.split('?'),\n                _wsComponents$resourc2 = slicedToArray(_wsComponents$resourc, 2),\n                path = _wsComponents$resourc2[0],\n                query = _wsComponents$resourc2[1];\n\n            wsComponents.path = path && path !== '/' ? path : undefined;\n            wsComponents.query = query;\n            wsComponents.resourceName = undefined;\n        }\n        //forbid fragment component\n        wsComponents.fragment = undefined;\n        return wsComponents;\n    }\n};\n\nvar handler$3 = {\n    scheme: \"wss\",\n    domainHost: handler$2.domainHost,\n    parse: handler$2.parse,\n    serialize: handler$2.serialize\n};\n\nvar O = {};\nvar isIRI = true;\n//RFC 3986\nvar UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\";\nvar HEXDIG$$ = \"[0-9A-Fa-f]\"; //case-insensitive\nvar PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)); //expanded\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = \"[\\\\x21-\\\\x7E]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\");\n//const QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$);\n//const QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"');\nvar ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\nvar QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\nvar VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\");\nvar SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\nvar UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\nvar PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\nvar NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\nvar NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\nvar NOT_HFVALUE = NOT_HFNAME;\nfunction decodeUnreserved(str) {\n    var decStr = pctDecChars(str);\n    return !decStr.match(UNRESERVED) ? str : decStr;\n}\nvar handler$4 = {\n    scheme: \"mailto\",\n    parse: function parse$$1(components, options) {\n        var mailtoComponents = components;\n        var to = mailtoComponents.to = mailtoComponents.path ? mailtoComponents.path.split(\",\") : [];\n        mailtoComponents.path = undefined;\n        if (mailtoComponents.query) {\n            var unknownHeaders = false;\n            var headers = {};\n            var hfields = mailtoComponents.query.split(\"&\");\n            for (var x = 0, xl = hfields.length; x < xl; ++x) {\n                var hfield = hfields[x].split(\"=\");\n                switch (hfield[0]) {\n                    case \"to\":\n                        var toAddrs = hfield[1].split(\",\");\n                        for (var _x = 0, _xl = toAddrs.length; _x < _xl; ++_x) {\n                            to.push(toAddrs[_x]);\n                        }\n                        break;\n                    case \"subject\":\n                        mailtoComponents.subject = unescapeComponent(hfield[1], options);\n                        break;\n                    case \"body\":\n                        mailtoComponents.body = unescapeComponent(hfield[1], options);\n                        break;\n                    default:\n                        unknownHeaders = true;\n                        headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n                        break;\n                }\n            }\n            if (unknownHeaders) mailtoComponents.headers = headers;\n        }\n        mailtoComponents.query = undefined;\n        for (var _x2 = 0, _xl2 = to.length; _x2 < _xl2; ++_x2) {\n            var addr = to[_x2].split(\"@\");\n            addr[0] = unescapeComponent(addr[0]);\n            if (!options.unicodeSupport) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n                } catch (e) {\n                    mailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            } else {\n                addr[1] = unescapeComponent(addr[1], options).toLowerCase();\n            }\n            to[_x2] = addr.join(\"@\");\n        }\n        return mailtoComponents;\n    },\n    serialize: function serialize$$1(mailtoComponents, options) {\n        var components = mailtoComponents;\n        var to = toArray(mailtoComponents.to);\n        if (to) {\n            for (var x = 0, xl = to.length; x < xl; ++x) {\n                var toAddr = String(to[x]);\n                var atIdx = toAddr.lastIndexOf(\"@\");\n                var localPart = toAddr.slice(0, atIdx).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n                var domain = toAddr.slice(atIdx + 1);\n                //convert IDN via punycode\n                try {\n                    domain = !options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain);\n                } catch (e) {\n                    components.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n                to[x] = localPart + \"@\" + domain;\n            }\n            components.path = to.join(\",\");\n        }\n        var headers = mailtoComponents.headers = mailtoComponents.headers || {};\n        if (mailtoComponents.subject) headers[\"subject\"] = mailtoComponents.subject;\n        if (mailtoComponents.body) headers[\"body\"] = mailtoComponents.body;\n        var fields = [];\n        for (var name in headers) {\n            if (headers[name] !== O[name]) {\n                fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) + \"=\" + headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));\n            }\n        }\n        if (fields.length) {\n            components.query = fields.join(\"&\");\n        }\n        return components;\n    }\n};\n\nvar URN_PARSE = /^([^\\:]+)\\:(.*)/;\n//RFC 2141\nvar handler$5 = {\n    scheme: \"urn\",\n    parse: function parse$$1(components, options) {\n        var matches = components.path && components.path.match(URN_PARSE);\n        var urnComponents = components;\n        if (matches) {\n            var scheme = options.scheme || urnComponents.scheme || \"urn\";\n            var nid = matches[1].toLowerCase();\n            var nss = matches[2];\n            var urnScheme = scheme + \":\" + (options.nid || nid);\n            var schemeHandler = SCHEMES[urnScheme];\n            urnComponents.nid = nid;\n            urnComponents.nss = nss;\n            urnComponents.path = undefined;\n            if (schemeHandler) {\n                urnComponents = schemeHandler.parse(urnComponents, options);\n            }\n        } else {\n            urnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n        }\n        return urnComponents;\n    },\n    serialize: function serialize$$1(urnComponents, options) {\n        var scheme = options.scheme || urnComponents.scheme || \"urn\";\n        var nid = urnComponents.nid;\n        var urnScheme = scheme + \":\" + (options.nid || nid);\n        var schemeHandler = SCHEMES[urnScheme];\n        if (schemeHandler) {\n            urnComponents = schemeHandler.serialize(urnComponents, options);\n        }\n        var uriComponents = urnComponents;\n        var nss = urnComponents.nss;\n        uriComponents.path = (nid || options.nid) + \":\" + nss;\n        return uriComponents;\n    }\n};\n\nvar UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\n//RFC 4122\nvar handler$6 = {\n    scheme: \"urn:uuid\",\n    parse: function parse(urnComponents, options) {\n        var uuidComponents = urnComponents;\n        uuidComponents.uuid = uuidComponents.nss;\n        uuidComponents.nss = undefined;\n        if (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n            uuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n        }\n        return uuidComponents;\n    },\n    serialize: function serialize(uuidComponents, options) {\n        var urnComponents = uuidComponents;\n        //normalize UUID\n        urnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n        return urnComponents;\n    }\n};\n\nSCHEMES[handler.scheme] = handler;\nSCHEMES[handler$1.scheme] = handler$1;\nSCHEMES[handler$2.scheme] = handler$2;\nSCHEMES[handler$3.scheme] = handler$3;\nSCHEMES[handler$4.scheme] = handler$4;\nSCHEMES[handler$5.scheme] = handler$5;\nSCHEMES[handler$6.scheme] = handler$6;\n\nexports.SCHEMES = SCHEMES;\nexports.pctEncChar = pctEncChar;\nexports.pctDecChars = pctDecChars;\nexports.parse = parse;\nexports.removeDotSegments = removeDotSegments;\nexports.serialize = serialize;\nexports.resolveComponents = resolveComponents;\nexports.resolve = resolve;\nexports.normalize = normalize;\nexports.equal = equal;\nexports.escapeComponent = escapeComponent;\nexports.unescapeComponent = unescapeComponent;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=uri.all.js.map\n","'use strict'\n\nconst Range = require('../classes/range')\nconst validRange = (range, options) => {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = validRange\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compareBuild = (a, b, loose) => {\n  const versionA = new SemVer(a, loose)\n  const versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\nmodule.exports = compareBuild\n","'use strict'\n\n// given a set of versions and a range, create a \"simplified\" range\n// that includes the same versions that the original range does\n// If the original range is shorter than the simplified one, return that.\nconst satisfies = require('../functions/satisfies.js')\nconst compare = require('../functions/compare.js')\nmodule.exports = (versions, range, options) => {\n  const set = []\n  let first = null\n  let prev = null\n  const v = versions.sort((a, b) => compare(a, b, options))\n  for (const version of v) {\n    const included = satisfies(version, range, options)\n    if (included) {\n      prev = version\n      if (!first) {\n        first = version\n      }\n    } else {\n      if (prev) {\n        set.push([first, prev])\n      }\n      prev = null\n      first = null\n    }\n  }\n  if (first) {\n    set.push([first, null])\n  }\n\n  const ranges = []\n  for (const [min, max] of set) {\n    if (min === max) {\n      ranges.push(min)\n    } else if (!max && min === v[0]) {\n      ranges.push('*')\n    } else if (!max) {\n      ranges.push(`>=${min}`)\n    } else if (min === v[0]) {\n      ranges.push(`<=${max}`)\n    } else {\n      ranges.push(`${min} - ${max}`)\n    }\n  }\n  const simplified = ranges.join(' || ')\n  const original = typeof range.raw === 'string' ? range.raw : String(range)\n  return simplified.length < original.length ? simplified : range\n}\n","'use strict'\n\nconst Range = require('../classes/range')\nconst intersects = (r1, r2, options) => {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2, options)\n}\nmodule.exports = intersects\n","'use strict';\n\nvar KEYWORDS = [\n  'multipleOf',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'additionalItems',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'maxProperties',\n  'minProperties',\n  'required',\n  'additionalProperties',\n  'enum',\n  'format',\n  'const'\n];\n\nmodule.exports = function (metaSchema, keywordsJsonPointers) {\n  for (var i=0; i<keywordsJsonPointers.length; i++) {\n    metaSchema = JSON.parse(JSON.stringify(metaSchema));\n    var segments = keywordsJsonPointers[i].split('/');\n    var keywords = metaSchema;\n    var j;\n    for (j=1; j<segments.length; j++)\n      keywords = keywords[segments[j]];\n\n    for (j=0; j<KEYWORDS.length; j++) {\n      var key = KEYWORDS[j];\n      var schema = keywords[key];\n      if (schema) {\n        keywords[key] = {\n          anyOf: [\n            schema,\n            { $ref: 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n    }\n  }\n\n  return metaSchema;\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1269__;","'use strict';\n\nvar IDENTIFIER = /^[a-z_$][a-z0-9_$-]*$/i;\nvar customRuleCode = require('./dotjs/custom');\nvar definitionSchema = require('./definition_schema');\n\nmodule.exports = {\n  add: addKeyword,\n  get: getKeyword,\n  remove: removeKeyword,\n  validate: validateKeyword\n};\n\n\n/**\n * Define custom keyword\n * @this  Ajv\n * @param {String} keyword custom keyword, should be unique (including different from all standard, custom and macro keywords).\n * @param {Object} definition keyword definition object with properties `type` (type(s) which the keyword applies to), `validate` or `compile`.\n * @return {Ajv} this for method chaining\n */\nfunction addKeyword(keyword, definition) {\n  /* jshint validthis: true */\n  /* eslint no-shadow: 0 */\n  var RULES = this.RULES;\n  if (RULES.keywords[keyword])\n    throw new Error('Keyword ' + keyword + ' is already defined');\n\n  if (!IDENTIFIER.test(keyword))\n    throw new Error('Keyword ' + keyword + ' is not a valid identifier');\n\n  if (definition) {\n    this.validateKeyword(definition, true);\n\n    var dataType = definition.type;\n    if (Array.isArray(dataType)) {\n      for (var i=0; i<dataType.length; i++)\n        _addRule(keyword, dataType[i], definition);\n    } else {\n      _addRule(keyword, dataType, definition);\n    }\n\n    var metaSchema = definition.metaSchema;\n    if (metaSchema) {\n      if (definition.$data && this._opts.$data) {\n        metaSchema = {\n          anyOf: [\n            metaSchema,\n            { '$ref': 'https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#' }\n          ]\n        };\n      }\n      definition.validateSchema = this.compile(metaSchema, true);\n    }\n  }\n\n  RULES.keywords[keyword] = RULES.all[keyword] = true;\n\n\n  function _addRule(keyword, dataType, definition) {\n    var ruleGroup;\n    for (var i=0; i<RULES.length; i++) {\n      var rg = RULES[i];\n      if (rg.type == dataType) {\n        ruleGroup = rg;\n        break;\n      }\n    }\n\n    if (!ruleGroup) {\n      ruleGroup = { type: dataType, rules: [] };\n      RULES.push(ruleGroup);\n    }\n\n    var rule = {\n      keyword: keyword,\n      definition: definition,\n      custom: true,\n      code: customRuleCode,\n      implements: definition.implements\n    };\n    ruleGroup.rules.push(rule);\n    RULES.custom[keyword] = rule;\n  }\n\n  return this;\n}\n\n\n/**\n * Get keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Object|Boolean} custom keyword definition, `true` if it is a predefined keyword, `false` otherwise.\n */\nfunction getKeyword(keyword) {\n  /* jshint validthis: true */\n  var rule = this.RULES.custom[keyword];\n  return rule ? rule.definition : this.RULES.keywords[keyword] || false;\n}\n\n\n/**\n * Remove keyword\n * @this  Ajv\n * @param {String} keyword pre-defined or custom keyword.\n * @return {Ajv} this for method chaining\n */\nfunction removeKeyword(keyword) {\n  /* jshint validthis: true */\n  var RULES = this.RULES;\n  delete RULES.keywords[keyword];\n  delete RULES.all[keyword];\n  delete RULES.custom[keyword];\n  for (var i=0; i<RULES.length; i++) {\n    var rules = RULES[i].rules;\n    for (var j=0; j<rules.length; j++) {\n      if (rules[j].keyword == keyword) {\n        rules.splice(j, 1);\n        break;\n      }\n    }\n  }\n  return this;\n}\n\n\n/**\n * Validate keyword definition\n * @this  Ajv\n * @param {Object} definition keyword definition object.\n * @param {Boolean} throwError true to throw exception if definition is invalid\n * @return {boolean} validation result\n */\nfunction validateKeyword(definition, throwError) {\n  validateKeyword.errors = null;\n  var v = this._validateKeyword = this._validateKeyword\n                                  || this.compile(definitionSchema, true);\n\n  if (v(definition)) return true;\n  validateKeyword.errors = v.errors;\n  if (throwError)\n    throw new Error('custom keyword definition is invalid: '  + this.errorsText(v.errors));\n  else\n    return false;\n}\n","'use strict';\nmodule.exports = function generate_items(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId;\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if (Array.isArray($schema)) {\n    var $additionalItems = it.schema.additionalItems;\n    if ($additionalItems === false) {\n      out += ' ' + ($valid) + ' = ' + ($data) + '.length <= ' + ($schema.length) + '; ';\n      var $currErrSchemaPath = $errSchemaPath;\n      $errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += '  if (!' + ($valid) + ') {   ';\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ('additionalItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schema.length) + ' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should NOT have more than ' + ($schema.length) + ' items\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n      out += ' } ';\n      $errSchemaPath = $currErrSchemaPath;\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($i) + ') { ';\n          var $passData = $data + '[' + $i + ']';\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + '[' + $i + ']';\n          $it.errSchemaPath = $errSchemaPath + '/' + $i;\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $i, it.opts.jsonPointers, true);\n          $it.dataPathArr[$dataNxt] = $i;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n    if (typeof $additionalItems == 'object' && (it.opts.strictKeywords ? (typeof $additionalItems == 'object' && Object.keys($additionalItems).length > 0) || $additionalItems === false : it.util.schemaHasRules($additionalItems, it.RULES.all))) {\n      $it.schema = $additionalItems;\n      $it.schemaPath = it.schemaPath + '.additionalItems';\n      $it.errSchemaPath = it.errSchemaPath + '/additionalItems';\n      out += ' ' + ($nextValid) + ' = true; if (' + ($data) + '.length > ' + ($schema.length) + ') {  for (var ' + ($idx) + ' = ' + ($schema.length) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n      $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n      var $passData = $data + '[' + $idx + ']';\n      $it.dataPathArr[$dataNxt] = $idx;\n      var $code = it.validate($it);\n      $it.baseId = $currentBaseId;\n      if (it.util.varOccurences($code, $nextData) < 2) {\n        out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n      } else {\n        out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n      }\n      if ($breakOnError) {\n        out += ' if (!' + ($nextValid) + ') break; ';\n      }\n      out += ' } }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  } else if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += '  for (var ' + ($idx) + ' = ' + (0) + '; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    if ($breakOnError) {\n      out += ' if (!' + ($nextValid) + ') break; ';\n    }\n    out += ' }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_dependencies(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $schemaDeps = {},\n    $propertyDeps = {},\n    $ownProperties = it.opts.ownProperties;\n  for ($property in $schema) {\n    if ($property == '__proto__') continue;\n    var $sch = $schema[$property];\n    var $deps = Array.isArray($sch) ? $propertyDeps : $schemaDeps;\n    $deps[$property] = $sch;\n  }\n  out += 'var ' + ($errs) + ' = errors;';\n  var $currentErrorPath = it.errorPath;\n  out += 'var missing' + ($lvl) + ';';\n  for (var $property in $propertyDeps) {\n    $deps = $propertyDeps[$property];\n    if ($deps.length) {\n      out += ' if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      if ($breakOnError) {\n        out += ' && ( ';\n        var arr1 = $deps;\n        if (arr1) {\n          var $propertyKey, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $propertyKey = arr1[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ')) {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should have ';\n            if ($deps.length == 1) {\n              out += 'property ' + (it.util.escapeQuotes($deps[0]));\n            } else {\n              out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n            }\n            out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      } else {\n        out += ' ) { ';\n        var arr2 = $deps;\n        if (arr2) {\n          var $propertyKey, i2 = -1,\n            l2 = arr2.length - 1;\n          while (i2 < l2) {\n            $propertyKey = arr2[i2 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('dependencies') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { property: \\'' + (it.util.escapeQuotes($property)) + '\\', missingProperty: \\'' + ($missingProperty) + '\\', depsCount: ' + ($deps.length) + ', deps: \\'' + (it.util.escapeQuotes($deps.length == 1 ? $deps[0] : $deps.join(\", \"))) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'should have ';\n                if ($deps.length == 1) {\n                  out += 'property ' + (it.util.escapeQuotes($deps[0]));\n                } else {\n                  out += 'properties ' + (it.util.escapeQuotes($deps.join(\", \")));\n                }\n                out += ' when property ' + (it.util.escapeQuotes($property)) + ' is present\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n      out += ' }   ';\n      if ($breakOnError) {\n        $closingBraces += '}';\n        out += ' else { ';\n      }\n    }\n  }\n  it.errorPath = $currentErrorPath;\n  var $currentBaseId = $it.baseId;\n  for (var $property in $schemaDeps) {\n    var $sch = $schemaDeps[$property];\n    if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n      out += ' ' + ($nextValid) + ' = true; if ( ' + ($data) + (it.util.getProperty($property)) + ' !== undefined ';\n      if ($ownProperties) {\n        out += ' && Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($property)) + '\\') ';\n      }\n      out += ') { ';\n      $it.schema = $sch;\n      $it.schemaPath = $schemaPath + it.util.getProperty($property);\n      $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($property);\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' }  ';\n      if ($breakOnError) {\n        out += ' if (' + ($nextValid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += '   ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_required(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    if ($schema.length < it.opts.loopRequired && it.schema.properties && Object.keys(it.schema.properties).length) {\n      var $required = [];\n      var arr1 = $schema;\n      if (arr1) {\n        var $property, i1 = -1,\n          l1 = arr1.length - 1;\n        while (i1 < l1) {\n          $property = arr1[i1 += 1];\n          var $propertySch = it.schema.properties[$property];\n          if (!($propertySch && (it.opts.strictKeywords ? (typeof $propertySch == 'object' && Object.keys($propertySch).length > 0) || $propertySch === false : it.util.schemaHasRules($propertySch, it.RULES.all)))) {\n            $required[$required.length] = $property;\n          }\n        }\n      }\n    } else {\n      var $required = $schema;\n    }\n  }\n  if ($isData || $required.length) {\n    var $currentErrorPath = it.errorPath,\n      $loopRequired = $isData || $required.length >= it.opts.loopRequired,\n      $ownProperties = it.opts.ownProperties;\n    if ($breakOnError) {\n      out += ' var missing' + ($lvl) + '; ';\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        out += ' var ' + ($valid) + ' = true; ';\n        if ($isData) {\n          out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { ' + ($valid) + ' = ' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] !== undefined ';\n        if ($ownProperties) {\n          out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += '; if (!' + ($valid) + ') break; } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n        out += '  if (!' + ($valid) + ') {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      } else {\n        out += ' if ( ';\n        var arr2 = $required;\n        if (arr2) {\n          var $propertyKey, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $propertyKey = arr2[$i += 1];\n            if ($i) {\n              out += ' || ';\n            }\n            var $prop = it.util.getProperty($propertyKey),\n              $useData = $data + $prop;\n            out += ' ( ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') && (missing' + ($lvl) + ' = ' + (it.util.toQuotedString(it.opts.jsonPointers ? $propertyKey : $prop)) + ') ) ';\n          }\n        }\n        out += ') {  ';\n        var $propertyPath = 'missing' + $lvl,\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.opts.jsonPointers ? it.util.getPathExpr($currentErrorPath, $propertyPath, true) : $currentErrorPath + ' + ' + $propertyPath;\n        }\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } else { ';\n      }\n    } else {\n      if ($loopRequired) {\n        if (!$isData) {\n          out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + '; ';\n        }\n        var $i = 'i' + $lvl,\n          $propertyPath = 'schema' + $lvl + '[' + $i + ']',\n          $missingProperty = '\\' + ' + $propertyPath + ' + \\'';\n        if (it.opts._errorDataPathProperty) {\n          it.errorPath = it.util.getPathExpr($currentErrorPath, $propertyPath, it.opts.jsonPointers);\n        }\n        if ($isData) {\n          out += ' if (' + ($vSchema) + ' && !Array.isArray(' + ($vSchema) + ')) {  var err =   '; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is a required property';\n              } else {\n                out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if (' + ($vSchema) + ' !== undefined) { ';\n        }\n        out += ' for (var ' + ($i) + ' = 0; ' + ($i) + ' < ' + ($vSchema) + '.length; ' + ($i) + '++) { if (' + ($data) + '[' + ($vSchema) + '[' + ($i) + ']] === undefined ';\n        if ($ownProperties) {\n          out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + ']) ';\n        }\n        out += ') {  var err =   '; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'';\n            if (it.opts._errorDataPathProperty) {\n              out += 'is a required property';\n            } else {\n              out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ';\n        if ($isData) {\n          out += '  }  ';\n        }\n      } else {\n        var arr3 = $required;\n        if (arr3) {\n          var $propertyKey, i3 = -1,\n            l3 = arr3.length - 1;\n          while (i3 < l3) {\n            $propertyKey = arr3[i3 += 1];\n            var $prop = it.util.getProperty($propertyKey),\n              $missingProperty = it.util.escapeQuotes($propertyKey),\n              $useData = $data + $prop;\n            if (it.opts._errorDataPathProperty) {\n              it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n            }\n            out += ' if ( ' + ($useData) + ' === undefined ';\n            if ($ownProperties) {\n              out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n            }\n            out += ') {  var err =   '; /* istanbul ignore else */\n            if (it.createErrors !== false) {\n              out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n              if (it.opts.messages !== false) {\n                out += ' , message: \\'';\n                if (it.opts._errorDataPathProperty) {\n                  out += 'is a required property';\n                } else {\n                  out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                }\n                out += '\\' ';\n              }\n              if (it.opts.verbose) {\n                out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n              }\n              out += ' } ';\n            } else {\n              out += ' {} ';\n            }\n            out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } ';\n          }\n        }\n      }\n    }\n    it.errorPath = $currentErrorPath;\n  } else if ($breakOnError) {\n    out += ' if (true) {';\n  }\n  return out;\n}\n","'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numberic identifiers include numberic identifiers but can be longer.\n// Therefore non-numberic identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n","'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n","'use strict';\n\n\nvar Cache = module.exports = function Cache() {\n  this._cache = {};\n};\n\n\nCache.prototype.put = function Cache_put(key, value) {\n  this._cache[key] = value;\n};\n\n\nCache.prototype.get = function Cache_get(key) {\n  return this._cache[key];\n};\n\n\nCache.prototype.del = function Cache_del(key) {\n  delete this._cache[key];\n};\n\n\nCache.prototype.clear = function Cache_clear() {\n  this._cache = {};\n};\n","'use strict';\nmodule.exports = function generate_custom(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $rule = this,\n    $definition = 'definition' + $lvl,\n    $rDef = $rule.definition,\n    $closingBraces = '';\n  var $compile, $inline, $macro, $ruleValidate, $validateCode;\n  if ($isData && $rDef.$data) {\n    $validateCode = 'keywordValidate' + $lvl;\n    var $validateSchema = $rDef.validateSchema;\n    out += ' var ' + ($definition) + ' = RULES.custom[\\'' + ($keyword) + '\\'].definition; var ' + ($validateCode) + ' = ' + ($definition) + '.validate;';\n  } else {\n    $ruleValidate = it.useCustomRule($rule, $schema, it.schema, it);\n    if (!$ruleValidate) return;\n    $schemaValue = 'validate.schema' + $schemaPath;\n    $validateCode = $ruleValidate.code;\n    $compile = $rDef.compile;\n    $inline = $rDef.inline;\n    $macro = $rDef.macro;\n  }\n  var $ruleErrs = $validateCode + '.errors',\n    $i = 'i' + $lvl,\n    $ruleErr = 'ruleErr' + $lvl,\n    $asyncKeyword = $rDef.async;\n  if ($asyncKeyword && !it.async) throw new Error('async keyword in sync schema');\n  if (!($inline || $macro)) {\n    out += '' + ($ruleErrs) + ' = null;';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($isData && $rDef.$data) {\n    $closingBraces += '}';\n    out += ' if (' + ($schemaValue) + ' === undefined) { ' + ($valid) + ' = true; } else { ';\n    if ($validateSchema) {\n      $closingBraces += '}';\n      out += ' ' + ($valid) + ' = ' + ($definition) + '.validateSchema(' + ($schemaValue) + '); if (' + ($valid) + ') { ';\n    }\n  }\n  if ($inline) {\n    if ($rDef.statements) {\n      out += ' ' + ($ruleValidate.validate) + ' ';\n    } else {\n      out += ' ' + ($valid) + ' = ' + ($ruleValidate.validate) + '; ';\n    }\n  } else if ($macro) {\n    var $it = it.util.copy(it);\n    var $closingBraces = '';\n    $it.level++;\n    var $nextValid = 'valid' + $it.level;\n    $it.schema = $ruleValidate.validate;\n    $it.schemaPath = '';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it).replace(/validate\\.schema/g, $validateCode);\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($code);\n  } else {\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    out += '  ' + ($validateCode) + '.call( ';\n    if (it.opts.passContext) {\n      out += 'this';\n    } else {\n      out += 'self';\n    }\n    if ($compile || $rDef.schema === false) {\n      out += ' , ' + ($data) + ' ';\n    } else {\n      out += ' , ' + ($schemaValue) + ' , ' + ($data) + ' , validate.schema' + (it.schemaPath) + ' ';\n    }\n    out += ' , (dataPath || \\'\\')';\n    if (it.errorPath != '\"\"') {\n      out += ' + ' + (it.errorPath);\n    }\n    var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n      $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n    out += ' , ' + ($parentData) + ' , ' + ($parentDataProperty) + ' , rootData )  ';\n    var def_callRuleValidate = out;\n    out = $$outStack.pop();\n    if ($rDef.errors === false) {\n      out += ' ' + ($valid) + ' = ';\n      if ($asyncKeyword) {\n        out += 'await ';\n      }\n      out += '' + (def_callRuleValidate) + '; ';\n    } else {\n      if ($asyncKeyword) {\n        $ruleErrs = 'customErrors' + $lvl;\n        out += ' var ' + ($ruleErrs) + ' = null; try { ' + ($valid) + ' = await ' + (def_callRuleValidate) + '; } catch (e) { ' + ($valid) + ' = false; if (e instanceof ValidationError) ' + ($ruleErrs) + ' = e.errors; else throw e; } ';\n      } else {\n        out += ' ' + ($ruleErrs) + ' = null; ' + ($valid) + ' = ' + (def_callRuleValidate) + '; ';\n      }\n    }\n  }\n  if ($rDef.modifying) {\n    out += ' if (' + ($parentData) + ') ' + ($data) + ' = ' + ($parentData) + '[' + ($parentDataProperty) + '];';\n  }\n  out += '' + ($closingBraces);\n  if ($rDef.valid) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  } else {\n    out += ' if ( ';\n    if ($rDef.valid === undefined) {\n      out += ' !';\n      if ($macro) {\n        out += '' + ($nextValid);\n      } else {\n        out += '' + ($valid);\n      }\n    } else {\n      out += ' ' + (!$rDef.valid) + ' ';\n    }\n    out += ') { ';\n    $errorKeyword = $rule.keyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = '';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    var def_customError = out;\n    out = $$outStack.pop();\n    if ($inline) {\n      if ($rDef.errors) {\n        if ($rDef.errors != 'full') {\n          out += '  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } ';\n        }\n      } else {\n        if ($rDef.errors === false) {\n          out += ' ' + (def_customError) + ' ';\n        } else {\n          out += ' if (' + ($errs) + ' == errors) { ' + (def_customError) + ' } else {  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + '; if (' + ($ruleErr) + '.schemaPath === undefined) { ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\"; } ';\n          if (it.opts.verbose) {\n            out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n          }\n          out += ' } } ';\n        }\n      }\n    } else if ($macro) {\n      out += '   var err =   '; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'custom') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { keyword: \\'' + ($rule.keyword) + '\\' } ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'should pass \"' + ($rule.keyword) + '\" keyword validation\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError(vErrors); ';\n        } else {\n          out += ' validate.errors = vErrors; return false; ';\n        }\n      }\n    } else {\n      if ($rDef.errors === false) {\n        out += ' ' + (def_customError) + ' ';\n      } else {\n        out += ' if (Array.isArray(' + ($ruleErrs) + ')) { if (vErrors === null) vErrors = ' + ($ruleErrs) + '; else vErrors = vErrors.concat(' + ($ruleErrs) + '); errors = vErrors.length;  for (var ' + ($i) + '=' + ($errs) + '; ' + ($i) + '<errors; ' + ($i) + '++) { var ' + ($ruleErr) + ' = vErrors[' + ($i) + ']; if (' + ($ruleErr) + '.dataPath === undefined) ' + ($ruleErr) + '.dataPath = (dataPath || \\'\\') + ' + (it.errorPath) + ';  ' + ($ruleErr) + '.schemaPath = \"' + ($errSchemaPath) + '\";  ';\n        if (it.opts.verbose) {\n          out += ' ' + ($ruleErr) + '.schema = ' + ($schemaValue) + '; ' + ($ruleErr) + '.data = ' + ($data) + '; ';\n        }\n        out += ' } } else { ' + (def_customError) + ' } ';\n      }\n    }\n    out += ' } ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_contains(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $idx = 'i' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $currentBaseId = it.baseId,\n    $nonEmptySchema = (it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all));\n  out += 'var ' + ($errs) + ' = errors;var ' + ($valid) + ';';\n  if ($nonEmptySchema) {\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($nextValid) + ' = false; for (var ' + ($idx) + ' = 0; ' + ($idx) + ' < ' + ($data) + '.length; ' + ($idx) + '++) { ';\n    $it.errorPath = it.util.getPathExpr(it.errorPath, $idx, it.opts.jsonPointers, true);\n    var $passData = $data + '[' + $idx + ']';\n    $it.dataPathArr[$dataNxt] = $idx;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    out += ' if (' + ($nextValid) + ') break; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($nextValid) + ') {';\n  } else {\n    out += ' if (' + ($data) + '.length == 0) {';\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('contains') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should contain a valid item\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } else { ';\n  if ($nonEmptySchema) {\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n  }\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst minSatisfying = (versions, range, options) => {\n  let min = null\n  let minSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\nmodule.exports = minSatisfying\n","module.exports = __WEBPACK_EXTERNAL_MODULE__2007__;","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Comparator = require('../classes/comparator')\nconst { ANY } = Comparator\nconst Range = require('../classes/range')\nconst satisfies = require('../functions/satisfies')\nconst gt = require('../functions/gt')\nconst lt = require('../functions/lt')\nconst lte = require('../functions/lte')\nconst gte = require('../functions/gte')\n\nconst outside = (version, range, hilo, options) => {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  let gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisfies the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let high = null\n    let low = null\n\n    comparators.forEach((comparator) => {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nmodule.exports = outside\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\nconst gt = require('../functions/gt')\n\nconst minVersion = (range, loose) => {\n  range = new Range(range, loose)\n\n  let minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (let i = 0; i < range.set.length; ++i) {\n    const comparators = range.set[i]\n\n    let setMin = null\n    comparators.forEach((comparator) => {\n      // Clone to avoid manipulating the comparator's semver object.\n      const compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!setMin || gt(compver, setMin)) {\n            setMin = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error(`Unexpected operation: ${comparator.operator}`)\n      }\n    })\n    if (setMin && (!minver || gt(minver, setMin))) {\n      minver = setMin\n    }\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\nmodule.exports = minVersion\n","'use strict';\n\nvar MissingRefError = require('./error_classes').MissingRef;\n\nmodule.exports = compileAsync;\n\n\n/**\n * Creates validating function for passed schema with asynchronous loading of missing schemas.\n * `loadSchema` option should be a function that accepts schema uri and returns promise that resolves with the schema.\n * @this  Ajv\n * @param {Object}   schema schema object\n * @param {Boolean}  meta optional true to compile meta-schema; this parameter can be skipped\n * @param {Function} callback an optional node-style callback, it is called with 2 parameters: error (or null) and validating function.\n * @return {Promise} promise that resolves with a validating function.\n */\nfunction compileAsync(schema, meta, callback) {\n  /* eslint no-shadow: 0 */\n  /* global Promise */\n  /* jshint validthis: true */\n  var self = this;\n  if (typeof this._opts.loadSchema != 'function')\n    throw new Error('options.loadSchema should be a function');\n\n  if (typeof meta == 'function') {\n    callback = meta;\n    meta = undefined;\n  }\n\n  var p = loadMetaSchemaOf(schema).then(function () {\n    var schemaObj = self._addSchema(schema, undefined, meta);\n    return schemaObj.validate || _compileAsync(schemaObj);\n  });\n\n  if (callback) {\n    p.then(\n      function(v) { callback(null, v); },\n      callback\n    );\n  }\n\n  return p;\n\n\n  function loadMetaSchemaOf(sch) {\n    var $schema = sch.$schema;\n    return $schema && !self.getSchema($schema)\n            ? compileAsync.call(self, { $ref: $schema }, true)\n            : Promise.resolve();\n  }\n\n\n  function _compileAsync(schemaObj) {\n    try { return self._compile(schemaObj); }\n    catch(e) {\n      if (e instanceof MissingRefError) return loadMissingSchema(e);\n      throw e;\n    }\n\n\n    function loadMissingSchema(e) {\n      var ref = e.missingSchema;\n      if (added(ref)) throw new Error('Schema ' + ref + ' is loaded but ' + e.missingRef + ' cannot be resolved');\n\n      var schemaPromise = self._loadingSchemas[ref];\n      if (!schemaPromise) {\n        schemaPromise = self._loadingSchemas[ref] = self._opts.loadSchema(ref);\n        schemaPromise.then(removePromise, removePromise);\n      }\n\n      return schemaPromise.then(function (sch) {\n        if (!added(ref)) {\n          return loadMetaSchemaOf(sch).then(function () {\n            if (!added(ref)) self.addSchema(sch, ref, undefined, meta);\n          });\n        }\n      }).then(function() {\n        return _compileAsync(schemaObj);\n      });\n\n      function removePromise() {\n        delete self._loadingSchemas[ref];\n      }\n\n      function added(ref) {\n        return self._refs[ref] || self._schemas[ref];\n      }\n    }\n  }\n}\n","'use strict';\n\nvar ruleModules = require('../dotjs')\n  , toHash = require('./util').toHash;\n\nmodule.exports = function rules() {\n  var RULES = [\n    { type: 'number',\n      rules: [ { 'maximum': ['exclusiveMaximum'] },\n               { 'minimum': ['exclusiveMinimum'] }, 'multipleOf', 'format'] },\n    { type: 'string',\n      rules: [ 'maxLength', 'minLength', 'pattern', 'format' ] },\n    { type: 'array',\n      rules: [ 'maxItems', 'minItems', 'items', 'contains', 'uniqueItems' ] },\n    { type: 'object',\n      rules: [ 'maxProperties', 'minProperties', 'required', 'dependencies', 'propertyNames',\n               { 'properties': ['additionalProperties', 'patternProperties'] } ] },\n    { rules: [ '$ref', 'const', 'enum', 'not', 'anyOf', 'oneOf', 'allOf', 'if' ] }\n  ];\n\n  var ALL = [ 'type', '$comment' ];\n  var KEYWORDS = [\n    '$schema', '$id', 'id', '$data', '$async', 'title',\n    'description', 'default', 'definitions',\n    'examples', 'readOnly', 'writeOnly',\n    'contentMediaType', 'contentEncoding',\n    'additionalItems', 'then', 'else'\n  ];\n  var TYPES = [ 'number', 'integer', 'string', 'array', 'object', 'boolean', 'null' ];\n  RULES.all = toHash(ALL);\n  RULES.types = toHash(TYPES);\n\n  RULES.forEach(function (group) {\n    group.rules = group.rules.map(function (keyword) {\n      var implKeywords;\n      if (typeof keyword == 'object') {\n        var key = Object.keys(keyword)[0];\n        implKeywords = keyword[key];\n        keyword = key;\n        implKeywords.forEach(function (k) {\n          ALL.push(k);\n          RULES.all[k] = true;\n        });\n      }\n      ALL.push(keyword);\n      var rule = RULES.all[keyword] = {\n        keyword: keyword,\n        code: ruleModules[keyword],\n        implements: implKeywords\n      };\n      return rule;\n    });\n\n    RULES.all.$comment = {\n      keyword: '$comment',\n      code: ruleModules.$comment\n    };\n\n    if (group.type) RULES.types[group.type] = group;\n  });\n\n  RULES.keywords = toHash(ALL.concat(KEYWORDS));\n  RULES.custom = {};\n\n  return RULES;\n};\n","'use strict';\n\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nmodule.exports = function ucs2length(str) {\n  var length = 0\n    , len = str.length\n    , pos = 0\n    , value;\n  while (pos < len) {\n    length++;\n    value = str.charCodeAt(pos++);\n    if (value >= 0xD800 && value <= 0xDBFF && pos < len) {\n      // high surrogate, and there is a next character\n      value = str.charCodeAt(pos);\n      if ((value & 0xFC00) == 0xDC00) pos++; // low surrogate\n    }\n  }\n  return length;\n};\n","'use strict';\nmodule.exports = function generate_multipleOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  out += 'var division' + ($lvl) + ';if (';\n  if ($isData) {\n    out += ' ' + ($schemaValue) + ' !== undefined && ( typeof ' + ($schemaValue) + ' != \\'number\\' || ';\n  }\n  out += ' (division' + ($lvl) + ' = ' + ($data) + ' / ' + ($schemaValue) + ', ';\n  if (it.opts.multipleOfPrecision) {\n    out += ' Math.abs(Math.round(division' + ($lvl) + ') - division' + ($lvl) + ') > 1e-' + (it.opts.multipleOfPrecision) + ' ';\n  } else {\n    out += ' division' + ($lvl) + ' !== parseInt(division' + ($lvl) + ') ';\n  }\n  out += ' ) ';\n  if ($isData) {\n    out += '  )  ';\n  }\n  out += ' ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('multipleOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { multipleOf: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be multiple of ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n","'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  comp = comp.replace(re[t.BUILD], '')\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n","'use strict';\n\nvar util = require('./util');\n\nvar DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0,31,28,31,30,31,30,31,31,30,31,30,31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nvar HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nvar URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\n// @todo Delete current URL in favour of the commented out URL rule when this issue is fixed https://github.com/eslint/eslint/issues/7983.\n// var URL = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-)*(?:[0-9a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[a-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nvar JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nvar JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nvar RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n\n\nmodule.exports = formats;\n\nfunction formats(mode) {\n  mode = mode == 'full' ? 'full' : 'fast';\n  return util.copy(formats[mode]);\n}\n\n\nformats.fast = {\n  // date: http://tools.ietf.org/html/rfc3339#section-5.6\n  date: /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/,\n  // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n  time: /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i,\n  'date-time': /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i,\n  // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n  uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n  'uri-reference': /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  // email (sources from jsen validator):\n  // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n  // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'willful violation')\n  email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n  hostname: HOSTNAME,\n  // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  // optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  // uuid: http://tools.ietf.org/html/rfc4122\n  uuid: UUID,\n  // JSON-pointer: https://tools.ietf.org/html/rfc6901\n  // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nformats.full = {\n  date: date,\n  time: time,\n  'date-time': date_time,\n  uri: uri,\n  'uri-reference': URIREF,\n  'uri-template': URITEMPLATE,\n  url: URL,\n  email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n  hostname: HOSTNAME,\n  ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n  ipv6: /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i,\n  regex: regex,\n  uuid: UUID,\n  'json-pointer': JSON_POINTER,\n  'json-pointer-uri-fragment': JSON_POINTER_URI_FRAGMENT,\n  'relative-json-pointer': RELATIVE_JSON_POINTER\n};\n\n\nfunction isLeapYear(year) {\n  // https://tools.ietf.org/html/rfc3339#appendix-C\n  return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\n\n\nfunction date(str) {\n  // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n  var matches = str.match(DATE);\n  if (!matches) return false;\n\n  var year = +matches[1];\n  var month = +matches[2];\n  var day = +matches[3];\n\n  return month >= 1 && month <= 12 && day >= 1 &&\n          day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\n\n\nfunction time(str, full) {\n  var matches = str.match(TIME);\n  if (!matches) return false;\n\n  var hour = matches[1];\n  var minute = matches[2];\n  var second = matches[3];\n  var timeZone = matches[5];\n  return ((hour <= 23 && minute <= 59 && second <= 59) ||\n          (hour == 23 && minute == 59 && second == 60)) &&\n         (!full || timeZone);\n}\n\n\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n  // http://tools.ietf.org/html/rfc3339#section-5.6\n  var dateTime = str.split(DATE_TIME_SEPARATOR);\n  return dateTime.length == 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\n\n\nvar NOT_URI_FRAGMENT = /\\/|:/;\nfunction uri(str) {\n  // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n  return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\n\n\nvar Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n  if (Z_ANCHOR.test(str)) return false;\n  try {\n    new RegExp(str);\n    return true;\n  } catch(e) {\n    return false;\n  }\n}\n","'use strict'\n\nconst parse = require('./parse')\nconst valid = (version, options) => {\n  const v = parse(version, options)\n  return v ? v.version : null\n}\nmodule.exports = valid\n","'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n","'use strict'\n\nconst parse = require('./parse')\nconst clean = (version, options) => {\n  const s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\nmodule.exports = clean\n","'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n","'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst rsort = (list, loose) => list.sort((a, b) => compareBuild(b, a, loose))\nmodule.exports = rsort\n","'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n","'use strict';\nmodule.exports = function generate_const(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!$isData) {\n    out += ' var schema' + ($lvl) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ' = equal(' + ($data) + ', schema' + ($lvl) + '); if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('const') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValue: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to constant\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate__limitLength(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxLength' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  if (it.opts.unicode === false) {\n    out += ' ' + ($data) + '.length ';\n  } else {\n    out += ' ucs2length(' + ($data) + ') ';\n  }\n  out += ' ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitLength') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT be ';\n      if ($keyword == 'maxLength') {\n        out += 'longer';\n      } else {\n        out += 'shorter';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' characters\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst minor = (a, loose) => new SemVer(a, loose).minor\nmodule.exports = minor\n","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = require('./parse')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst coerce = (version, options) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  let match = null\n  if (!options.rtl) {\n    match = version.match(options.includePrerelease ? re[t.COERCEFULL] : re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    // With includePrerelease option set, '1.2.3.4-rc' wants to coerce '2.3.4-rc', not '2.3.4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    const coerceRtlRegex = options.includePrerelease ? re[t.COERCERTLFULL] : re[t.COERCERTL]\n    let next\n    while ((next = coerceRtlRegex.exec(version)) &&\n        (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n            next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      coerceRtlRegex.lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    coerceRtlRegex.lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  const major = match[2]\n  const minor = match[3] || '0'\n  const patch = match[4] || '0'\n  const prerelease = options.includePrerelease && match[5] ? `-${match[5]}` : ''\n  const build = options.includePrerelease && match[6] ? `+${match[6]}` : ''\n\n  return parse(`${major}.${minor}.${patch}${prerelease}${build}`, options)\n}\nmodule.exports = coerce\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n","'use strict';\n\nvar resolve = require('./resolve')\n  , util = require('./util')\n  , errorClasses = require('./error_classes')\n  , stableStringify = require('fast-json-stable-stringify');\n\nvar validateGenerator = require('../dotjs/validate');\n\n/**\n * Functions below are used inside compiled validations function\n */\n\nvar ucs2length = util.ucs2length;\nvar equal = require('fast-deep-equal');\n\n// this error is thrown by async schemas to return validation errors via exception\nvar ValidationError = errorClasses.Validation;\n\nmodule.exports = compile;\n\n\n/**\n * Compiles schema to validation function\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Object} root object with information about the root schema for this schema\n * @param  {Object} localRefs the hash of local references inside the schema (created by resolve.id), used for inline resolution\n * @param  {String} baseId base ID for IDs in the schema\n * @return {Function} validation function\n */\nfunction compile(schema, root, localRefs, baseId) {\n  /* jshint validthis: true, evil: true */\n  /* eslint no-shadow: 0 */\n  var self = this\n    , opts = this._opts\n    , refVal = [ undefined ]\n    , refs = {}\n    , patterns = []\n    , patternsHash = {}\n    , defaults = []\n    , defaultsHash = {}\n    , customRules = [];\n\n  root = root || { schema: schema, refVal: refVal, refs: refs };\n\n  var c = checkCompiling.call(this, schema, root, baseId);\n  var compilation = this._compilations[c.index];\n  if (c.compiling) return (compilation.callValidate = callValidate);\n\n  var formats = this._formats;\n  var RULES = this.RULES;\n\n  try {\n    var v = localCompile(schema, root, localRefs, baseId);\n    compilation.validate = v;\n    var cv = compilation.callValidate;\n    if (cv) {\n      cv.schema = v.schema;\n      cv.errors = null;\n      cv.refs = v.refs;\n      cv.refVal = v.refVal;\n      cv.root = v.root;\n      cv.$async = v.$async;\n      if (opts.sourceCode) cv.source = v.source;\n    }\n    return v;\n  } finally {\n    endCompiling.call(this, schema, root, baseId);\n  }\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var validate = compilation.validate;\n    var result = validate.apply(this, arguments);\n    callValidate.errors = validate.errors;\n    return result;\n  }\n\n  function localCompile(_schema, _root, localRefs, baseId) {\n    var isRoot = !_root || (_root && _root.schema == _schema);\n    if (_root.schema != root.schema)\n      return compile.call(self, _schema, _root, localRefs, baseId);\n\n    var $async = _schema.$async === true;\n\n    var sourceCode = validateGenerator({\n      isTop: true,\n      schema: _schema,\n      isRoot: isRoot,\n      baseId: baseId,\n      root: _root,\n      schemaPath: '',\n      errSchemaPath: '#',\n      errorPath: '\"\"',\n      MissingRefError: errorClasses.MissingRef,\n      RULES: RULES,\n      validate: validateGenerator,\n      util: util,\n      resolve: resolve,\n      resolveRef: resolveRef,\n      usePattern: usePattern,\n      useDefault: useDefault,\n      useCustomRule: useCustomRule,\n      opts: opts,\n      formats: formats,\n      logger: self.logger,\n      self: self\n    });\n\n    sourceCode = vars(refVal, refValCode) + vars(patterns, patternCode)\n                   + vars(defaults, defaultCode) + vars(customRules, customRuleCode)\n                   + sourceCode;\n\n    if (opts.processCode) sourceCode = opts.processCode(sourceCode, _schema);\n    // console.log('\\n\\n\\n *** \\n', JSON.stringify(sourceCode));\n    var validate;\n    try {\n      var makeValidate = new Function(\n        'self',\n        'RULES',\n        'formats',\n        'root',\n        'refVal',\n        'defaults',\n        'customRules',\n        'equal',\n        'ucs2length',\n        'ValidationError',\n        sourceCode\n      );\n\n      validate = makeValidate(\n        self,\n        RULES,\n        formats,\n        root,\n        refVal,\n        defaults,\n        customRules,\n        equal,\n        ucs2length,\n        ValidationError\n      );\n\n      refVal[0] = validate;\n    } catch(e) {\n      self.logger.error('Error compiling schema, function code:', sourceCode);\n      throw e;\n    }\n\n    validate.schema = _schema;\n    validate.errors = null;\n    validate.refs = refs;\n    validate.refVal = refVal;\n    validate.root = isRoot ? validate : _root;\n    if ($async) validate.$async = true;\n    if (opts.sourceCode === true) {\n      validate.source = {\n        code: sourceCode,\n        patterns: patterns,\n        defaults: defaults\n      };\n    }\n\n    return validate;\n  }\n\n  function resolveRef(baseId, ref, isRoot) {\n    ref = resolve.url(baseId, ref);\n    var refIndex = refs[ref];\n    var _refVal, refCode;\n    if (refIndex !== undefined) {\n      _refVal = refVal[refIndex];\n      refCode = 'refVal[' + refIndex + ']';\n      return resolvedRef(_refVal, refCode);\n    }\n    if (!isRoot && root.refs) {\n      var rootRefId = root.refs[ref];\n      if (rootRefId !== undefined) {\n        _refVal = root.refVal[rootRefId];\n        refCode = addLocalRef(ref, _refVal);\n        return resolvedRef(_refVal, refCode);\n      }\n    }\n\n    refCode = addLocalRef(ref);\n    var v = resolve.call(self, localCompile, root, ref);\n    if (v === undefined) {\n      var localSchema = localRefs && localRefs[ref];\n      if (localSchema) {\n        v = resolve.inlineRef(localSchema, opts.inlineRefs)\n            ? localSchema\n            : compile.call(self, localSchema, root, localRefs, baseId);\n      }\n    }\n\n    if (v === undefined) {\n      removeLocalRef(ref);\n    } else {\n      replaceLocalRef(ref, v);\n      return resolvedRef(v, refCode);\n    }\n  }\n\n  function addLocalRef(ref, v) {\n    var refId = refVal.length;\n    refVal[refId] = v;\n    refs[ref] = refId;\n    return 'refVal' + refId;\n  }\n\n  function removeLocalRef(ref) {\n    delete refs[ref];\n  }\n\n  function replaceLocalRef(ref, v) {\n    var refId = refs[ref];\n    refVal[refId] = v;\n  }\n\n  function resolvedRef(refVal, code) {\n    return typeof refVal == 'object' || typeof refVal == 'boolean'\n            ? { code: code, schema: refVal, inline: true }\n            : { code: code, $async: refVal && !!refVal.$async };\n  }\n\n  function usePattern(regexStr) {\n    var index = patternsHash[regexStr];\n    if (index === undefined) {\n      index = patternsHash[regexStr] = patterns.length;\n      patterns[index] = regexStr;\n    }\n    return 'pattern' + index;\n  }\n\n  function useDefault(value) {\n    switch (typeof value) {\n      case 'boolean':\n      case 'number':\n        return '' + value;\n      case 'string':\n        return util.toQuotedString(value);\n      case 'object':\n        if (value === null) return 'null';\n        var valueStr = stableStringify(value);\n        var index = defaultsHash[valueStr];\n        if (index === undefined) {\n          index = defaultsHash[valueStr] = defaults.length;\n          defaults[index] = value;\n        }\n        return 'default' + index;\n    }\n  }\n\n  function useCustomRule(rule, schema, parentSchema, it) {\n    if (self._opts.validateSchema !== false) {\n      var deps = rule.definition.dependencies;\n      if (deps && !deps.every(function(keyword) {\n        return Object.prototype.hasOwnProperty.call(parentSchema, keyword);\n      }))\n        throw new Error('parent schema must have all required keywords: ' + deps.join(','));\n\n      var validateSchema = rule.definition.validateSchema;\n      if (validateSchema) {\n        var valid = validateSchema(schema);\n        if (!valid) {\n          var message = 'keyword schema is invalid: ' + self.errorsText(validateSchema.errors);\n          if (self._opts.validateSchema == 'log') self.logger.error(message);\n          else throw new Error(message);\n        }\n      }\n    }\n\n    var compile = rule.definition.compile\n      , inline = rule.definition.inline\n      , macro = rule.definition.macro;\n\n    var validate;\n    if (compile) {\n      validate = compile.call(self, schema, parentSchema, it);\n    } else if (macro) {\n      validate = macro.call(self, schema, parentSchema, it);\n      if (opts.validateSchema !== false) self.validateSchema(validate, true);\n    } else if (inline) {\n      validate = inline.call(self, it, rule.keyword, schema, parentSchema);\n    } else {\n      validate = rule.definition.validate;\n      if (!validate) return;\n    }\n\n    if (validate === undefined)\n      throw new Error('custom keyword \"' + rule.keyword + '\"failed to compile');\n\n    var index = customRules.length;\n    customRules[index] = validate;\n\n    return {\n      code: 'customRule' + index,\n      validate: validate\n    };\n  }\n}\n\n\n/**\n * Checks if the schema is currently compiled\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Object} object with properties \"index\" (compilation index) and \"compiling\" (boolean)\n */\nfunction checkCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var index = compIndex.call(this, schema, root, baseId);\n  if (index >= 0) return { index: index, compiling: true };\n  index = this._compilations.length;\n  this._compilations[index] = {\n    schema: schema,\n    root: root,\n    baseId: baseId\n  };\n  return { index: index, compiling: false };\n}\n\n\n/**\n * Removes the schema from the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n */\nfunction endCompiling(schema, root, baseId) {\n  /* jshint validthis: true */\n  var i = compIndex.call(this, schema, root, baseId);\n  if (i >= 0) this._compilations.splice(i, 1);\n}\n\n\n/**\n * Index of schema compilation in the currently compiled list\n * @this   Ajv\n * @param  {Object} schema schema to compile\n * @param  {Object} root root object\n * @param  {String} baseId base schema ID\n * @return {Integer} compilation index\n */\nfunction compIndex(schema, root, baseId) {\n  /* jshint validthis: true */\n  for (var i=0; i<this._compilations.length; i++) {\n    var c = this._compilations[i];\n    if (c.schema == schema && c.root == root && c.baseId == baseId) return i;\n  }\n  return -1;\n}\n\n\nfunction patternCode(i, patterns) {\n  return 'var pattern' + i + ' = new RegExp(' + util.toQuotedString(patterns[i]) + ');';\n}\n\n\nfunction defaultCode(i) {\n  return 'var default' + i + ' = defaults[' + i + '];';\n}\n\n\nfunction refValCode(i, refVal) {\n  return refVal[i] === undefined ? '' : 'var refVal' + i + ' = refVal[' + i + '];';\n}\n\n\nfunction customRuleCode(i) {\n  return 'var customRule' + i + ' = customRules[' + i + '];';\n}\n\n\nfunction vars(arr, statement) {\n  if (!arr.length) return '';\n  var code = '';\n  for (var i=0; i<arr.length; i++)\n    code += statement(i, arr);\n  return code;\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\nmodule.exports = function generate__limitProperties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxProperties' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' Object.keys(' + ($data) + ').length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxProperties') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' properties\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict'\n\nconst compare = require('./compare')\nconst rcompare = (a, b, loose) => compare(b, a, loose)\nmodule.exports = rcompare\n","'use strict'\n\nconst parse = require('./parse')\nconst prerelease = (version, options) => {\n  const parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\nmodule.exports = prerelease\n","'use strict';\n\nvar compileSchema = require('./compile')\n  , resolve = require('./compile/resolve')\n  , Cache = require('./cache')\n  , SchemaObject = require('./compile/schema_obj')\n  , stableStringify = require('fast-json-stable-stringify')\n  , formats = require('./compile/formats')\n  , rules = require('./compile/rules')\n  , $dataMetaSchema = require('./data')\n  , util = require('./compile/util');\n\nmodule.exports = Ajv;\n\nAjv.prototype.validate = validate;\nAjv.prototype.compile = compile;\nAjv.prototype.addSchema = addSchema;\nAjv.prototype.addMetaSchema = addMetaSchema;\nAjv.prototype.validateSchema = validateSchema;\nAjv.prototype.getSchema = getSchema;\nAjv.prototype.removeSchema = removeSchema;\nAjv.prototype.addFormat = addFormat;\nAjv.prototype.errorsText = errorsText;\n\nAjv.prototype._addSchema = _addSchema;\nAjv.prototype._compile = _compile;\n\nAjv.prototype.compileAsync = require('./compile/async');\nvar customKeyword = require('./keyword');\nAjv.prototype.addKeyword = customKeyword.add;\nAjv.prototype.getKeyword = customKeyword.get;\nAjv.prototype.removeKeyword = customKeyword.remove;\nAjv.prototype.validateKeyword = customKeyword.validate;\n\nvar errorClasses = require('./compile/error_classes');\nAjv.ValidationError = errorClasses.Validation;\nAjv.MissingRefError = errorClasses.MissingRef;\nAjv.$dataMetaSchema = $dataMetaSchema;\n\nvar META_SCHEMA_ID = 'http://json-schema.org/draft-07/schema';\n\nvar META_IGNORE_OPTIONS = [ 'removeAdditional', 'useDefaults', 'coerceTypes', 'strictDefaults' ];\nvar META_SUPPORT_DATA = ['/properties'];\n\n/**\n * Creates validator instance.\n * Usage: `Ajv(opts)`\n * @param {Object} opts optional options\n * @return {Object} ajv instance\n */\nfunction Ajv(opts) {\n  if (!(this instanceof Ajv)) return new Ajv(opts);\n  opts = this._opts = util.copy(opts) || {};\n  setLogger(this);\n  this._schemas = {};\n  this._refs = {};\n  this._fragments = {};\n  this._formats = formats(opts.format);\n\n  this._cache = opts.cache || new Cache;\n  this._loadingSchemas = {};\n  this._compilations = [];\n  this.RULES = rules();\n  this._getId = chooseGetId(opts);\n\n  opts.loopRequired = opts.loopRequired || Infinity;\n  if (opts.errorDataPath == 'property') opts._errorDataPathProperty = true;\n  if (opts.serialize === undefined) opts.serialize = stableStringify;\n  this._metaOpts = getMetaSchemaOptions(this);\n\n  if (opts.formats) addInitialFormats(this);\n  if (opts.keywords) addInitialKeywords(this);\n  addDefaultMetaSchema(this);\n  if (typeof opts.meta == 'object') this.addMetaSchema(opts.meta);\n  if (opts.nullable) this.addKeyword('nullable', {metaSchema: {type: 'boolean'}});\n  addInitialSchemas(this);\n}\n\n\n\n/**\n * Validate data using schema\n * Schema will be compiled and cached (using serialized JSON as key. [fast-json-stable-stringify](https://github.com/epoberezkin/fast-json-stable-stringify) is used to serialize.\n * @this   Ajv\n * @param  {String|Object} schemaKeyRef key, ref or schema object\n * @param  {Any} data to be validated\n * @return {Boolean} validation result. Errors from the last validation will be available in `ajv.errors` (and also in compiled schema: `schema.errors`).\n */\nfunction validate(schemaKeyRef, data) {\n  var v;\n  if (typeof schemaKeyRef == 'string') {\n    v = this.getSchema(schemaKeyRef);\n    if (!v) throw new Error('no schema with key or ref \"' + schemaKeyRef + '\"');\n  } else {\n    var schemaObj = this._addSchema(schemaKeyRef);\n    v = schemaObj.validate || this._compile(schemaObj);\n  }\n\n  var valid = v(data);\n  if (v.$async !== true) this.errors = v.errors;\n  return valid;\n}\n\n\n/**\n * Create validating function for passed schema.\n * @this   Ajv\n * @param  {Object} schema schema object\n * @param  {Boolean} _meta true if schema is a meta-schema. Used internally to compile meta schemas of custom keywords.\n * @return {Function} validating function\n */\nfunction compile(schema, _meta) {\n  var schemaObj = this._addSchema(schema, undefined, _meta);\n  return schemaObj.validate || this._compile(schemaObj);\n}\n\n\n/**\n * Adds schema to the instance.\n * @this   Ajv\n * @param {Object|Array} schema schema or array of schemas. If array is passed, `key` and other parameters will be ignored.\n * @param {String} key Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n * @param {Boolean} _skipValidation true to skip schema validation. Used internally, option validateSchema should be used instead.\n * @param {Boolean} _meta true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n * @return {Ajv} this for method chaining\n */\nfunction addSchema(schema, key, _skipValidation, _meta) {\n  if (Array.isArray(schema)){\n    for (var i=0; i<schema.length; i++) this.addSchema(schema[i], undefined, _skipValidation, _meta);\n    return this;\n  }\n  var id = this._getId(schema);\n  if (id !== undefined && typeof id != 'string')\n    throw new Error('schema id must be string');\n  key = resolve.normalizeId(key || id);\n  checkUnique(this, key);\n  this._schemas[key] = this._addSchema(schema, _skipValidation, _meta, true);\n  return this;\n}\n\n\n/**\n * Add schema that will be used to validate other schemas\n * options in META_IGNORE_OPTIONS are alway set to false\n * @this   Ajv\n * @param {Object} schema schema object\n * @param {String} key optional schema key\n * @param {Boolean} skipValidation true to skip schema validation, can be used to override validateSchema option for meta-schema\n * @return {Ajv} this for method chaining\n */\nfunction addMetaSchema(schema, key, skipValidation) {\n  this.addSchema(schema, key, skipValidation, true);\n  return this;\n}\n\n\n/**\n * Validate schema\n * @this   Ajv\n * @param {Object} schema schema to validate\n * @param {Boolean} throwOrLogError pass true to throw (or log) an error if invalid\n * @return {Boolean} true if schema is valid\n */\nfunction validateSchema(schema, throwOrLogError) {\n  var $schema = schema.$schema;\n  if ($schema !== undefined && typeof $schema != 'string')\n    throw new Error('$schema must be a string');\n  $schema = $schema || this._opts.defaultMeta || defaultMeta(this);\n  if (!$schema) {\n    this.logger.warn('meta-schema not available');\n    this.errors = null;\n    return true;\n  }\n  var valid = this.validate($schema, schema);\n  if (!valid && throwOrLogError) {\n    var message = 'schema is invalid: ' + this.errorsText();\n    if (this._opts.validateSchema == 'log') this.logger.error(message);\n    else throw new Error(message);\n  }\n  return valid;\n}\n\n\nfunction defaultMeta(self) {\n  var meta = self._opts.meta;\n  self._opts.defaultMeta = typeof meta == 'object'\n                            ? self._getId(meta) || meta\n                            : self.getSchema(META_SCHEMA_ID)\n                              ? META_SCHEMA_ID\n                              : undefined;\n  return self._opts.defaultMeta;\n}\n\n\n/**\n * Get compiled schema from the instance by `key` or `ref`.\n * @this   Ajv\n * @param  {String} keyRef `key` that was passed to `addSchema` or full schema reference (`schema.id` or resolved id).\n * @return {Function} schema validating function (with property `schema`).\n */\nfunction getSchema(keyRef) {\n  var schemaObj = _getSchemaObj(this, keyRef);\n  switch (typeof schemaObj) {\n    case 'object': return schemaObj.validate || this._compile(schemaObj);\n    case 'string': return this.getSchema(schemaObj);\n    case 'undefined': return _getSchemaFragment(this, keyRef);\n  }\n}\n\n\nfunction _getSchemaFragment(self, ref) {\n  var res = resolve.schema.call(self, { schema: {} }, ref);\n  if (res) {\n    var schema = res.schema\n      , root = res.root\n      , baseId = res.baseId;\n    var v = compileSchema.call(self, schema, root, undefined, baseId);\n    self._fragments[ref] = new SchemaObject({\n      ref: ref,\n      fragment: true,\n      schema: schema,\n      root: root,\n      baseId: baseId,\n      validate: v\n    });\n    return v;\n  }\n}\n\n\nfunction _getSchemaObj(self, keyRef) {\n  keyRef = resolve.normalizeId(keyRef);\n  return self._schemas[keyRef] || self._refs[keyRef] || self._fragments[keyRef];\n}\n\n\n/**\n * Remove cached schema(s).\n * If no parameter is passed all schemas but meta-schemas are removed.\n * If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n * Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n * @this   Ajv\n * @param  {String|Object|RegExp} schemaKeyRef key, ref, pattern to match key/ref or schema object\n * @return {Ajv} this for method chaining\n */\nfunction removeSchema(schemaKeyRef) {\n  if (schemaKeyRef instanceof RegExp) {\n    _removeAllSchemas(this, this._schemas, schemaKeyRef);\n    _removeAllSchemas(this, this._refs, schemaKeyRef);\n    return this;\n  }\n  switch (typeof schemaKeyRef) {\n    case 'undefined':\n      _removeAllSchemas(this, this._schemas);\n      _removeAllSchemas(this, this._refs);\n      this._cache.clear();\n      return this;\n    case 'string':\n      var schemaObj = _getSchemaObj(this, schemaKeyRef);\n      if (schemaObj) this._cache.del(schemaObj.cacheKey);\n      delete this._schemas[schemaKeyRef];\n      delete this._refs[schemaKeyRef];\n      return this;\n    case 'object':\n      var serialize = this._opts.serialize;\n      var cacheKey = serialize ? serialize(schemaKeyRef) : schemaKeyRef;\n      this._cache.del(cacheKey);\n      var id = this._getId(schemaKeyRef);\n      if (id) {\n        id = resolve.normalizeId(id);\n        delete this._schemas[id];\n        delete this._refs[id];\n      }\n  }\n  return this;\n}\n\n\nfunction _removeAllSchemas(self, schemas, regex) {\n  for (var keyRef in schemas) {\n    var schemaObj = schemas[keyRef];\n    if (!schemaObj.meta && (!regex || regex.test(keyRef))) {\n      self._cache.del(schemaObj.cacheKey);\n      delete schemas[keyRef];\n    }\n  }\n}\n\n\n/* @this   Ajv */\nfunction _addSchema(schema, skipValidation, meta, shouldAddSchema) {\n  if (typeof schema != 'object' && typeof schema != 'boolean')\n    throw new Error('schema should be object or boolean');\n  var serialize = this._opts.serialize;\n  var cacheKey = serialize ? serialize(schema) : schema;\n  var cached = this._cache.get(cacheKey);\n  if (cached) return cached;\n\n  shouldAddSchema = shouldAddSchema || this._opts.addUsedSchema !== false;\n\n  var id = resolve.normalizeId(this._getId(schema));\n  if (id && shouldAddSchema) checkUnique(this, id);\n\n  var willValidate = this._opts.validateSchema !== false && !skipValidation;\n  var recursiveMeta;\n  if (willValidate && !(recursiveMeta = id && id == resolve.normalizeId(schema.$schema)))\n    this.validateSchema(schema, true);\n\n  var localRefs = resolve.ids.call(this, schema);\n\n  var schemaObj = new SchemaObject({\n    id: id,\n    schema: schema,\n    localRefs: localRefs,\n    cacheKey: cacheKey,\n    meta: meta\n  });\n\n  if (id[0] != '#' && shouldAddSchema) this._refs[id] = schemaObj;\n  this._cache.put(cacheKey, schemaObj);\n\n  if (willValidate && recursiveMeta) this.validateSchema(schema, true);\n\n  return schemaObj;\n}\n\n\n/* @this   Ajv */\nfunction _compile(schemaObj, root) {\n  if (schemaObj.compiling) {\n    schemaObj.validate = callValidate;\n    callValidate.schema = schemaObj.schema;\n    callValidate.errors = null;\n    callValidate.root = root ? root : callValidate;\n    if (schemaObj.schema.$async === true)\n      callValidate.$async = true;\n    return callValidate;\n  }\n  schemaObj.compiling = true;\n\n  var currentOpts;\n  if (schemaObj.meta) {\n    currentOpts = this._opts;\n    this._opts = this._metaOpts;\n  }\n\n  var v;\n  try { v = compileSchema.call(this, schemaObj.schema, root, schemaObj.localRefs); }\n  catch(e) {\n    delete schemaObj.validate;\n    throw e;\n  }\n  finally {\n    schemaObj.compiling = false;\n    if (schemaObj.meta) this._opts = currentOpts;\n  }\n\n  schemaObj.validate = v;\n  schemaObj.refs = v.refs;\n  schemaObj.refVal = v.refVal;\n  schemaObj.root = v.root;\n  return v;\n\n\n  /* @this   {*} - custom context, see passContext option */\n  function callValidate() {\n    /* jshint validthis: true */\n    var _validate = schemaObj.validate;\n    var result = _validate.apply(this, arguments);\n    callValidate.errors = _validate.errors;\n    return result;\n  }\n}\n\n\nfunction chooseGetId(opts) {\n  switch (opts.schemaId) {\n    case 'auto': return _get$IdOrId;\n    case 'id': return _getId;\n    default: return _get$Id;\n  }\n}\n\n/* @this   Ajv */\nfunction _getId(schema) {\n  if (schema.$id) this.logger.warn('schema $id ignored', schema.$id);\n  return schema.id;\n}\n\n/* @this   Ajv */\nfunction _get$Id(schema) {\n  if (schema.id) this.logger.warn('schema id ignored', schema.id);\n  return schema.$id;\n}\n\n\nfunction _get$IdOrId(schema) {\n  if (schema.$id && schema.id && schema.$id != schema.id)\n    throw new Error('schema $id is different from id');\n  return schema.$id || schema.id;\n}\n\n\n/**\n * Convert array of error message objects to string\n * @this   Ajv\n * @param  {Array<Object>} errors optional array of validation errors, if not passed errors from the instance are used.\n * @param  {Object} options optional options with properties `separator` and `dataVar`.\n * @return {String} human readable string with all errors descriptions\n */\nfunction errorsText(errors, options) {\n  errors = errors || this.errors;\n  if (!errors) return 'No errors';\n  options = options || {};\n  var separator = options.separator === undefined ? ', ' : options.separator;\n  var dataVar = options.dataVar === undefined ? 'data' : options.dataVar;\n\n  var text = '';\n  for (var i=0; i<errors.length; i++) {\n    var e = errors[i];\n    if (e) text += dataVar + e.dataPath + ' ' + e.message + separator;\n  }\n  return text.slice(0, -separator.length);\n}\n\n\n/**\n * Add custom format\n * @this   Ajv\n * @param {String} name format name\n * @param {String|RegExp|Function} format string is converted to RegExp; function should return boolean (true when valid)\n * @return {Ajv} this for method chaining\n */\nfunction addFormat(name, format) {\n  if (typeof format == 'string') format = new RegExp(format);\n  this._formats[name] = format;\n  return this;\n}\n\n\nfunction addDefaultMetaSchema(self) {\n  var $dataSchema;\n  if (self._opts.$data) {\n    $dataSchema = require('./refs/data.json');\n    self.addMetaSchema($dataSchema, $dataSchema.$id, true);\n  }\n  if (self._opts.meta === false) return;\n  var metaSchema = require('./refs/json-schema-draft-07.json');\n  if (self._opts.$data) metaSchema = $dataMetaSchema(metaSchema, META_SUPPORT_DATA);\n  self.addMetaSchema(metaSchema, META_SCHEMA_ID, true);\n  self._refs['http://json-schema.org/schema'] = META_SCHEMA_ID;\n}\n\n\nfunction addInitialSchemas(self) {\n  var optsSchemas = self._opts.schemas;\n  if (!optsSchemas) return;\n  if (Array.isArray(optsSchemas)) self.addSchema(optsSchemas);\n  else for (var key in optsSchemas) self.addSchema(optsSchemas[key], key);\n}\n\n\nfunction addInitialFormats(self) {\n  for (var name in self._opts.formats) {\n    var format = self._opts.formats[name];\n    self.addFormat(name, format);\n  }\n}\n\n\nfunction addInitialKeywords(self) {\n  for (var name in self._opts.keywords) {\n    var keyword = self._opts.keywords[name];\n    self.addKeyword(name, keyword);\n  }\n}\n\n\nfunction checkUnique(self, id) {\n  if (self._schemas[id] || self._refs[id])\n    throw new Error('schema with key or id \"' + id + '\" already exists');\n}\n\n\nfunction getMetaSchemaOptions(self) {\n  var metaOpts = util.copy(self._opts);\n  for (var i=0; i<META_IGNORE_OPTIONS.length; i++)\n    delete metaOpts[META_IGNORE_OPTIONS[i]];\n  return metaOpts;\n}\n\n\nfunction setLogger(self) {\n  var logger = self._opts.logger;\n  if (logger === false) {\n    self.logger = {log: noop, warn: noop, error: noop};\n  } else {\n    if (logger === undefined) logger = console;\n    if (!(typeof logger == 'object' && logger.log && logger.warn && logger.error))\n      throw new Error('logger must implement log, warn and error methods');\n    self.logger = logger;\n  }\n}\n\n\nfunction noop() {}\n","'use strict';\nmodule.exports = function generate__limit(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $isMax = $keyword == 'maximum',\n    $exclusiveKeyword = $isMax ? 'exclusiveMaximum' : 'exclusiveMinimum',\n    $schemaExcl = it.schema[$exclusiveKeyword],\n    $isDataExcl = it.opts.$data && $schemaExcl && $schemaExcl.$data,\n    $op = $isMax ? '<' : '>',\n    $notOp = $isMax ? '>' : '<',\n    $errorKeyword = undefined;\n  if (!($isData || typeof $schema == 'number' || $schema === undefined)) {\n    throw new Error($keyword + ' must be number');\n  }\n  if (!($isDataExcl || $schemaExcl === undefined || typeof $schemaExcl == 'number' || typeof $schemaExcl == 'boolean')) {\n    throw new Error($exclusiveKeyword + ' must be number or boolean');\n  }\n  if ($isDataExcl) {\n    var $schemaValueExcl = it.util.getData($schemaExcl.$data, $dataLvl, it.dataPathArr),\n      $exclusive = 'exclusive' + $lvl,\n      $exclType = 'exclType' + $lvl,\n      $exclIsNumber = 'exclIsNumber' + $lvl,\n      $opExpr = 'op' + $lvl,\n      $opStr = '\\' + ' + $opExpr + ' + \\'';\n    out += ' var schemaExcl' + ($lvl) + ' = ' + ($schemaValueExcl) + '; ';\n    $schemaValueExcl = 'schemaExcl' + $lvl;\n    out += ' var ' + ($exclusive) + '; var ' + ($exclType) + ' = typeof ' + ($schemaValueExcl) + '; if (' + ($exclType) + ' != \\'boolean\\' && ' + ($exclType) + ' != \\'undefined\\' && ' + ($exclType) + ' != \\'number\\') { ';\n    var $errorKeyword = $exclusiveKeyword;\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ($errorKeyword || '_exclusiveLimit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'' + ($exclusiveKeyword) + ' should be boolean\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else if ( ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n    }\n    out += ' ' + ($exclType) + ' == \\'number\\' ? ( (' + ($exclusive) + ' = ' + ($schemaValue) + ' === undefined || ' + ($schemaValueExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ') ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValueExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) : ( (' + ($exclusive) + ' = ' + ($schemaValueExcl) + ' === true) ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaValue) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { var op' + ($lvl) + ' = ' + ($exclusive) + ' ? \\'' + ($op) + '\\' : \\'' + ($op) + '=\\'; ';\n    if ($schema === undefined) {\n      $errorKeyword = $exclusiveKeyword;\n      $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n      $schemaValue = $schemaValueExcl;\n      $isData = $isDataExcl;\n    }\n  } else {\n    var $exclIsNumber = typeof $schemaExcl == 'number',\n      $opStr = $op;\n    if ($exclIsNumber && $isData) {\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ( ' + ($schemaValue) + ' === undefined || ' + ($schemaExcl) + ' ' + ($op) + '= ' + ($schemaValue) + ' ? ' + ($data) + ' ' + ($notOp) + '= ' + ($schemaExcl) + ' : ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' ) || ' + ($data) + ' !== ' + ($data) + ') { ';\n    } else {\n      if ($exclIsNumber && $schema === undefined) {\n        $exclusive = true;\n        $errorKeyword = $exclusiveKeyword;\n        $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n        $schemaValue = $schemaExcl;\n        $notOp += '=';\n      } else {\n        if ($exclIsNumber) $schemaValue = Math[$isMax ? 'min' : 'max']($schemaExcl, $schema);\n        if ($schemaExcl === ($exclIsNumber ? $schemaValue : true)) {\n          $exclusive = true;\n          $errorKeyword = $exclusiveKeyword;\n          $errSchemaPath = it.errSchemaPath + '/' + $exclusiveKeyword;\n          $notOp += '=';\n        } else {\n          $exclusive = false;\n          $opStr += '=';\n        }\n      }\n      var $opExpr = '\\'' + $opStr + '\\'';\n      out += ' if ( ';\n      if ($isData) {\n        out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n      }\n      out += ' ' + ($data) + ' ' + ($notOp) + ' ' + ($schemaValue) + ' || ' + ($data) + ' !== ' + ($data) + ') { ';\n    }\n  }\n  $errorKeyword = $errorKeyword || $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limit') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { comparison: ' + ($opExpr) + ', limit: ' + ($schemaValue) + ', exclusive: ' + ($exclusive) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be ' + ($opStr) + ' ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue);\n      } else {\n        out += '' + ($schemaValue) + '\\'';\n      }\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_oneOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $prevValid = 'prevValid' + $lvl,\n    $passingSchemas = 'passingSchemas' + $lvl;\n  out += 'var ' + ($errs) + ' = errors , ' + ($prevValid) + ' = false , ' + ($valid) + ' = false , ' + ($passingSchemas) + ' = null; ';\n  var $wasComposite = it.compositeRule;\n  it.compositeRule = $it.compositeRule = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n      } else {\n        out += ' var ' + ($nextValid) + ' = true; ';\n      }\n      if ($i) {\n        out += ' if (' + ($nextValid) + ' && ' + ($prevValid) + ') { ' + ($valid) + ' = false; ' + ($passingSchemas) + ' = [' + ($passingSchemas) + ', ' + ($i) + ']; } else { ';\n        $closingBraces += '}';\n      }\n      out += ' if (' + ($nextValid) + ') { ' + ($valid) + ' = ' + ($prevValid) + ' = true; ' + ($passingSchemas) + ' = ' + ($i) + '; }';\n    }\n  }\n  it.compositeRule = $it.compositeRule = $wasComposite;\n  out += '' + ($closingBraces) + 'if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('oneOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { passingSchemas: ' + ($passingSchemas) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match exactly one schema in oneOf\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; return false; ';\n    }\n  }\n  out += '} else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }';\n  if (it.opts.allErrors) {\n    out += ' } ';\n  }\n  return out;\n}\n","'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n","'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n","'use strict'\n\nconst compareBuild = require('./compare-build')\nconst sort = (list, loose) => list.sort((a, b) => compareBuild(a, b, loose))\nmodule.exports = sort\n","'use strict';\nmodule.exports = function generate_if(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $thenSch = it.schema['then'],\n    $elseSch = it.schema['else'],\n    $thenPresent = $thenSch !== undefined && (it.opts.strictKeywords ? (typeof $thenSch == 'object' && Object.keys($thenSch).length > 0) || $thenSch === false : it.util.schemaHasRules($thenSch, it.RULES.all)),\n    $elsePresent = $elseSch !== undefined && (it.opts.strictKeywords ? (typeof $elseSch == 'object' && Object.keys($elseSch).length > 0) || $elseSch === false : it.util.schemaHasRules($elseSch, it.RULES.all)),\n    $currentBaseId = $it.baseId;\n  if ($thenPresent || $elsePresent) {\n    var $ifClause;\n    $it.createErrors = false;\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = true;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    out += '  ' + (it.validate($it)) + ' ';\n    $it.baseId = $currentBaseId;\n    $it.createErrors = true;\n    out += '  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; }  ';\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    if ($thenPresent) {\n      out += ' if (' + ($nextValid) + ') {  ';\n      $it.schema = it.schema['then'];\n      $it.schemaPath = it.schemaPath + '.then';\n      $it.errSchemaPath = it.errSchemaPath + '/then';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'then\\'; ';\n      } else {\n        $ifClause = '\\'then\\'';\n      }\n      out += ' } ';\n      if ($elsePresent) {\n        out += ' else { ';\n      }\n    } else {\n      out += ' if (!' + ($nextValid) + ') { ';\n    }\n    if ($elsePresent) {\n      $it.schema = it.schema['else'];\n      $it.schemaPath = it.schemaPath + '.else';\n      $it.errSchemaPath = it.errSchemaPath + '/else';\n      out += '  ' + (it.validate($it)) + ' ';\n      $it.baseId = $currentBaseId;\n      out += ' ' + ($valid) + ' = ' + ($nextValid) + '; ';\n      if ($thenPresent && $elsePresent) {\n        $ifClause = 'ifClause' + $lvl;\n        out += ' var ' + ($ifClause) + ' = \\'else\\'; ';\n      } else {\n        $ifClause = '\\'else\\'';\n      }\n      out += ' } ';\n    }\n    out += ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('if') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { failingKeyword: ' + ($ifClause) + ' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match \"\\' + ' + ($ifClause) + ' + \\'\" schema\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' }   ';\n    if ($breakOnError) {\n      out += ' else { ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","'use strict';\n\n//all requires must be explicit because browserify won't work with dynamic requires\nmodule.exports = {\n  '$ref': require('./ref'),\n  allOf: require('./allOf'),\n  anyOf: require('./anyOf'),\n  '$comment': require('./comment'),\n  const: require('./const'),\n  contains: require('./contains'),\n  dependencies: require('./dependencies'),\n  'enum': require('./enum'),\n  format: require('./format'),\n  'if': require('./if'),\n  items: require('./items'),\n  maximum: require('./_limit'),\n  minimum: require('./_limit'),\n  maxItems: require('./_limitItems'),\n  minItems: require('./_limitItems'),\n  maxLength: require('./_limitLength'),\n  minLength: require('./_limitLength'),\n  maxProperties: require('./_limitProperties'),\n  minProperties: require('./_limitProperties'),\n  multipleOf: require('./multipleOf'),\n  not: require('./not'),\n  oneOf: require('./oneOf'),\n  pattern: require('./pattern'),\n  properties: require('./properties'),\n  propertyNames: require('./propertyNames'),\n  required: require('./required'),\n  uniqueItems: require('./uniqueItems'),\n  validate: require('./validate')\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__5959__;","'use strict';\nmodule.exports = function generate_format(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  if (it.opts.format === false) {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n    return out;\n  }\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $unknownFormats = it.opts.unknownFormats,\n    $allowUnknown = Array.isArray($unknownFormats);\n  if ($isData) {\n    var $format = 'format' + $lvl,\n      $isObject = 'isObject' + $lvl,\n      $formatType = 'formatType' + $lvl;\n    out += ' var ' + ($format) + ' = formats[' + ($schemaValue) + ']; var ' + ($isObject) + ' = typeof ' + ($format) + ' == \\'object\\' && !(' + ($format) + ' instanceof RegExp) && ' + ($format) + '.validate; var ' + ($formatType) + ' = ' + ($isObject) + ' && ' + ($format) + '.type || \\'string\\'; if (' + ($isObject) + ') { ';\n    if (it.async) {\n      out += ' var async' + ($lvl) + ' = ' + ($format) + '.async; ';\n    }\n    out += ' ' + ($format) + ' = ' + ($format) + '.validate; } if (  ';\n    if ($isData) {\n      out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n    }\n    out += ' (';\n    if ($unknownFormats != 'ignore') {\n      out += ' (' + ($schemaValue) + ' && !' + ($format) + ' ';\n      if ($allowUnknown) {\n        out += ' && self._opts.unknownFormats.indexOf(' + ($schemaValue) + ') == -1 ';\n      }\n      out += ') || ';\n    }\n    out += ' (' + ($format) + ' && ' + ($formatType) + ' == \\'' + ($ruleType) + '\\' && !(typeof ' + ($format) + ' == \\'function\\' ? ';\n    if (it.async) {\n      out += ' (async' + ($lvl) + ' ? await ' + ($format) + '(' + ($data) + ') : ' + ($format) + '(' + ($data) + ')) ';\n    } else {\n      out += ' ' + ($format) + '(' + ($data) + ') ';\n    }\n    out += ' : ' + ($format) + '.test(' + ($data) + '))))) {';\n  } else {\n    var $format = it.formats[$schema];\n    if (!$format) {\n      if ($unknownFormats == 'ignore') {\n        it.logger.warn('unknown format \"' + $schema + '\" ignored in schema at path \"' + it.errSchemaPath + '\"');\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else if ($allowUnknown && $unknownFormats.indexOf($schema) >= 0) {\n        if ($breakOnError) {\n          out += ' if (true) { ';\n        }\n        return out;\n      } else {\n        throw new Error('unknown format \"' + $schema + '\" is used in schema at path \"' + it.errSchemaPath + '\"');\n      }\n    }\n    var $isObject = typeof $format == 'object' && !($format instanceof RegExp) && $format.validate;\n    var $formatType = $isObject && $format.type || 'string';\n    if ($isObject) {\n      var $async = $format.async === true;\n      $format = $format.validate;\n    }\n    if ($formatType != $ruleType) {\n      if ($breakOnError) {\n        out += ' if (true) { ';\n      }\n      return out;\n    }\n    if ($async) {\n      if (!it.async) throw new Error('async format in sync schema');\n      var $formatRef = 'formats' + it.util.getProperty($schema) + '.validate';\n      out += ' if (!(await ' + ($formatRef) + '(' + ($data) + '))) { ';\n    } else {\n      out += ' if (! ';\n      var $formatRef = 'formats' + it.util.getProperty($schema);\n      if ($isObject) $formatRef += '.validate';\n      if (typeof $format == 'function') {\n        out += ' ' + ($formatRef) + '(' + ($data) + ') ';\n      } else {\n        out += ' ' + ($formatRef) + '.test(' + ($data) + ') ';\n      }\n      out += ') { ';\n    }\n  }\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('format') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { format:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match format \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' } ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_propertyNames(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  out += 'var ' + ($errs) + ' = errors;';\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    var $key = 'key' + $lvl,\n      $idx = 'idx' + $lvl,\n      $i = 'i' + $lvl,\n      $invalidName = '\\' + ' + $key + ' + \\'',\n      $dataNxt = $it.dataLevel = it.dataLevel + 1,\n      $nextData = 'data' + $dataNxt,\n      $dataProperties = 'dataProperties' + $lvl,\n      $ownProperties = it.opts.ownProperties,\n      $currentBaseId = it.baseId;\n    if ($ownProperties) {\n      out += ' var ' + ($dataProperties) + ' = undefined; ';\n    }\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    out += ' var startErrs' + ($lvl) + ' = errors; ';\n    var $passData = $key;\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var $code = it.validate($it);\n    $it.baseId = $currentBaseId;\n    if (it.util.varOccurences($code, $nextData) < 2) {\n      out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n    } else {\n      out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (!' + ($nextValid) + ') { for (var ' + ($i) + '=startErrs' + ($lvl) + '; ' + ($i) + '<errors; ' + ($i) + '++) { vErrors[' + ($i) + '].propertyName = ' + ($key) + '; }   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('propertyNames') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { propertyName: \\'' + ($invalidName) + '\\' } ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'property name \\\\\\'' + ($invalidName) + '\\\\\\' is invalid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    if ($breakOnError) {\n      out += ' break; ';\n    }\n    out += ' } }';\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_anyOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $noEmptySchema = $schema.every(function($sch) {\n    return (it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all));\n  });\n  if ($noEmptySchema) {\n    var $currentBaseId = $it.baseId;\n    out += ' var ' + ($errs) + ' = errors; var ' + ($valid) + ' = false;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    var arr1 = $schema;\n    if (arr1) {\n      var $sch, $i = -1,\n        l1 = arr1.length - 1;\n      while ($i < l1) {\n        $sch = arr1[$i += 1];\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        out += ' ' + ($valid) + ' = ' + ($valid) + ' || ' + ($nextValid) + '; if (!' + ($valid) + ') { ';\n        $closingBraces += '}';\n      }\n    }\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' ' + ($closingBraces) + ' if (!' + ($valid) + ') {   var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('anyOf') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should match some schema in anyOf\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError(vErrors); ';\n      } else {\n        out += ' validate.errors = vErrors; return false; ';\n      }\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    if ($breakOnError) {\n      out += ' if (true) { ';\n    }\n  }\n  return out;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6089__;","'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    if (this.major < other.major) {\n      return -1\n    }\n    if (this.major > other.major) {\n      return 1\n    }\n    if (this.minor < other.minor) {\n      return -1\n    }\n    if (this.minor > other.minor) {\n      return 1\n    }\n    if (this.patch < other.patch) {\n      return -1\n    }\n    if (this.patch > other.patch) {\n      return 1\n    }\n    return 0\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n","'use strict'\n\nconst parse = require('./parse.js')\n\nconst diff = (version1, version2) => {\n  const v1 = parse(version1, null, true)\n  const v2 = parse(version2, null, true)\n  const comparison = v1.compare(v2)\n\n  if (comparison === 0) {\n    return null\n  }\n\n  const v1Higher = comparison > 0\n  const highVersion = v1Higher ? v1 : v2\n  const lowVersion = v1Higher ? v2 : v1\n  const highHasPre = !!highVersion.prerelease.length\n  const lowHasPre = !!lowVersion.prerelease.length\n\n  if (lowHasPre && !highHasPre) {\n    // Going from prerelease -> no prerelease requires some special casing\n\n    // If the low version has only a major, then it will always be a major\n    // Some examples:\n    // 1.0.0-1 -> 1.0.0\n    // 1.0.0-1 -> 1.1.1\n    // 1.0.0-1 -> 2.0.0\n    if (!lowVersion.patch && !lowVersion.minor) {\n      return 'major'\n    }\n\n    // If the main part has no difference\n    if (lowVersion.compareMain(highVersion) === 0) {\n      if (lowVersion.minor && !lowVersion.patch) {\n        return 'minor'\n      }\n      return 'patch'\n    }\n  }\n\n  // add the `pre` prefix if we are going to a prerelease version\n  const prefix = highHasPre ? 'pre' : ''\n\n  if (v1.major !== v2.major) {\n    return prefix + 'major'\n  }\n\n  if (v1.minor !== v2.minor) {\n    return prefix + 'minor'\n  }\n\n  if (v1.patch !== v2.patch) {\n    return prefix + 'patch'\n  }\n\n  // high and low are preleases\n  return 'prerelease'\n}\n\nmodule.exports = diff\n","'use strict'\n\nconst compare = require('./compare')\nconst compareLoose = (a, b) => compare(a, b, true)\nmodule.exports = compareLoose\n","'use strict';\nmodule.exports = function generate_enum(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $valid = 'valid' + $lvl;\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $i = 'i' + $lvl,\n    $vSchema = 'schema' + $lvl;\n  if (!$isData) {\n    out += ' var ' + ($vSchema) + ' = validate.schema' + ($schemaPath) + ';';\n  }\n  out += 'var ' + ($valid) + ';';\n  if ($isData) {\n    out += ' if (schema' + ($lvl) + ' === undefined) ' + ($valid) + ' = true; else if (!Array.isArray(schema' + ($lvl) + ')) ' + ($valid) + ' = false; else {';\n  }\n  out += '' + ($valid) + ' = false;for (var ' + ($i) + '=0; ' + ($i) + '<' + ($vSchema) + '.length; ' + ($i) + '++) if (equal(' + ($data) + ', ' + ($vSchema) + '[' + ($i) + '])) { ' + ($valid) + ' = true; break; }';\n  if ($isData) {\n    out += '  }  ';\n  }\n  out += ' if (!' + ($valid) + ') {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('enum') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { allowedValues: schema' + ($lvl) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should be equal to one of the allowed values\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += ' }';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict'\n\n// Determine if version is greater than all the versions possible in the range.\nconst outside = require('./outside')\nconst gtr = (version, range, options) => outside(version, range, '>', options)\nmodule.exports = gtr\n","'use strict';\nmodule.exports = function generate_allOf(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $currentBaseId = $it.baseId,\n    $allSchemasEmpty = true;\n  var arr1 = $schema;\n  if (arr1) {\n    var $sch, $i = -1,\n      l1 = arr1.length - 1;\n    while ($i < l1) {\n      $sch = arr1[$i += 1];\n      if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n        $allSchemasEmpty = false;\n        $it.schema = $sch;\n        $it.schemaPath = $schemaPath + '[' + $i + ']';\n        $it.errSchemaPath = $errSchemaPath + '/' + $i;\n        out += '  ' + (it.validate($it)) + ' ';\n        $it.baseId = $currentBaseId;\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    if ($allSchemasEmpty) {\n      out += ' if (true) { ';\n    } else {\n      out += ' ' + ($closingBraces.slice(0, -1)) + ' ';\n    }\n  }\n  return out;\n}\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst Range = require('../classes/range')\n\nconst maxSatisfying = (versions, range, options) => {\n  let max = null\n  let maxSV = null\n  let rangeObj = null\n  try {\n    rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach((v) => {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\nmodule.exports = maxSatisfying\n","'use strict';\n\n\nmodule.exports = {\n  copy: copy,\n  checkDataType: checkDataType,\n  checkDataTypes: checkDataTypes,\n  coerceToTypes: coerceToTypes,\n  toHash: toHash,\n  getProperty: getProperty,\n  escapeQuotes: escapeQuotes,\n  equal: require('fast-deep-equal'),\n  ucs2length: require('./ucs2length'),\n  varOccurences: varOccurences,\n  varReplace: varReplace,\n  schemaHasRules: schemaHasRules,\n  schemaHasRulesExcept: schemaHasRulesExcept,\n  schemaUnknownRules: schemaUnknownRules,\n  toQuotedString: toQuotedString,\n  getPathExpr: getPathExpr,\n  getPath: getPath,\n  getData: getData,\n  unescapeFragment: unescapeFragment,\n  unescapeJsonPointer: unescapeJsonPointer,\n  escapeFragment: escapeFragment,\n  escapeJsonPointer: escapeJsonPointer\n};\n\n\nfunction copy(o, to) {\n  to = to || {};\n  for (var key in o) to[key] = o[key];\n  return to;\n}\n\n\nfunction checkDataType(dataType, data, strictNumbers, negate) {\n  var EQUAL = negate ? ' !== ' : ' === '\n    , AND = negate ? ' || ' : ' && '\n    , OK = negate ? '!' : ''\n    , NOT = negate ? '' : '!';\n  switch (dataType) {\n    case 'null': return data + EQUAL + 'null';\n    case 'array': return OK + 'Array.isArray(' + data + ')';\n    case 'object': return '(' + OK + data + AND +\n                          'typeof ' + data + EQUAL + '\"object\"' + AND +\n                          NOT + 'Array.isArray(' + data + '))';\n    case 'integer': return '(typeof ' + data + EQUAL + '\"number\"' + AND +\n                           NOT + '(' + data + ' % 1)' +\n                           AND + data + EQUAL + data +\n                           (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    case 'number': return '(typeof ' + data + EQUAL + '\"' + dataType + '\"' +\n                          (strictNumbers ? (AND + OK + 'isFinite(' + data + ')') : '') + ')';\n    default: return 'typeof ' + data + EQUAL + '\"' + dataType + '\"';\n  }\n}\n\n\nfunction checkDataTypes(dataTypes, data, strictNumbers) {\n  switch (dataTypes.length) {\n    case 1: return checkDataType(dataTypes[0], data, strictNumbers, true);\n    default:\n      var code = '';\n      var types = toHash(dataTypes);\n      if (types.array && types.object) {\n        code = types.null ? '(': '(!' + data + ' || ';\n        code += 'typeof ' + data + ' !== \"object\")';\n        delete types.null;\n        delete types.array;\n        delete types.object;\n      }\n      if (types.number) delete types.integer;\n      for (var t in types)\n        code += (code ? ' && ' : '' ) + checkDataType(t, data, strictNumbers, true);\n\n      return code;\n  }\n}\n\n\nvar COERCE_TO_TYPES = toHash([ 'string', 'number', 'integer', 'boolean', 'null' ]);\nfunction coerceToTypes(optionCoerceTypes, dataTypes) {\n  if (Array.isArray(dataTypes)) {\n    var types = [];\n    for (var i=0; i<dataTypes.length; i++) {\n      var t = dataTypes[i];\n      if (COERCE_TO_TYPES[t]) types[types.length] = t;\n      else if (optionCoerceTypes === 'array' && t === 'array') types[types.length] = t;\n    }\n    if (types.length) return types;\n  } else if (COERCE_TO_TYPES[dataTypes]) {\n    return [dataTypes];\n  } else if (optionCoerceTypes === 'array' && dataTypes === 'array') {\n    return ['array'];\n  }\n}\n\n\nfunction toHash(arr) {\n  var hash = {};\n  for (var i=0; i<arr.length; i++) hash[arr[i]] = true;\n  return hash;\n}\n\n\nvar IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nvar SINGLE_QUOTE = /'|\\\\/g;\nfunction getProperty(key) {\n  return typeof key == 'number'\n          ? '[' + key + ']'\n          : IDENTIFIER.test(key)\n            ? '.' + key\n            : \"['\" + escapeQuotes(key) + \"']\";\n}\n\n\nfunction escapeQuotes(str) {\n  return str.replace(SINGLE_QUOTE, '\\\\$&')\n            .replace(/\\n/g, '\\\\n')\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\f/g, '\\\\f')\n            .replace(/\\t/g, '\\\\t');\n}\n\n\nfunction varOccurences(str, dataVar) {\n  dataVar += '[^0-9]';\n  var matches = str.match(new RegExp(dataVar, 'g'));\n  return matches ? matches.length : 0;\n}\n\n\nfunction varReplace(str, dataVar, expr) {\n  dataVar += '([^0-9])';\n  expr = expr.replace(/\\$/g, '$$$$');\n  return str.replace(new RegExp(dataVar, 'g'), expr + '$1');\n}\n\n\nfunction schemaHasRules(schema, rules) {\n  if (typeof schema == 'boolean') return !schema;\n  for (var key in schema) if (rules[key]) return true;\n}\n\n\nfunction schemaHasRulesExcept(schema, rules, exceptKeyword) {\n  if (typeof schema == 'boolean') return !schema && exceptKeyword != 'not';\n  for (var key in schema) if (key != exceptKeyword && rules[key]) return true;\n}\n\n\nfunction schemaUnknownRules(schema, rules) {\n  if (typeof schema == 'boolean') return;\n  for (var key in schema) if (!rules[key]) return key;\n}\n\n\nfunction toQuotedString(str) {\n  return '\\'' + escapeQuotes(str) + '\\'';\n}\n\n\nfunction getPathExpr(currentPath, expr, jsonPointers, isNumber) {\n  var path = jsonPointers // false by default\n              ? '\\'/\\' + ' + expr + (isNumber ? '' : '.replace(/~/g, \\'~0\\').replace(/\\\\//g, \\'~1\\')')\n              : (isNumber ? '\\'[\\' + ' + expr + ' + \\']\\'' : '\\'[\\\\\\'\\' + ' + expr + ' + \\'\\\\\\']\\'');\n  return joinPaths(currentPath, path);\n}\n\n\nfunction getPath(currentPath, prop, jsonPointers) {\n  var path = jsonPointers // false by default\n              ? toQuotedString('/' + escapeJsonPointer(prop))\n              : toQuotedString(getProperty(prop));\n  return joinPaths(currentPath, path);\n}\n\n\nvar JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nvar RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, lvl, paths) {\n  var up, jsonPointer, data, matches;\n  if ($data === '') return 'rootData';\n  if ($data[0] == '/') {\n    if (!JSON_POINTER.test($data)) throw new Error('Invalid JSON-pointer: ' + $data);\n    jsonPointer = $data;\n    data = 'rootData';\n  } else {\n    matches = $data.match(RELATIVE_JSON_POINTER);\n    if (!matches) throw new Error('Invalid JSON-pointer: ' + $data);\n    up = +matches[1];\n    jsonPointer = matches[2];\n    if (jsonPointer == '#') {\n      if (up >= lvl) throw new Error('Cannot access property/index ' + up + ' levels up, current level is ' + lvl);\n      return paths[lvl - up];\n    }\n\n    if (up > lvl) throw new Error('Cannot access data ' + up + ' levels up, current level is ' + lvl);\n    data = 'data' + ((lvl - up) || '');\n    if (!jsonPointer) return data;\n  }\n\n  var expr = data;\n  var segments = jsonPointer.split('/');\n  for (var i=0; i<segments.length; i++) {\n    var segment = segments[i];\n    if (segment) {\n      data += getProperty(unescapeJsonPointer(segment));\n      expr += ' && ' + data;\n    }\n  }\n  return expr;\n}\n\n\nfunction joinPaths (a, b) {\n  if (a == '\"\"') return b;\n  return (a + ' + ' + b).replace(/([^\\\\])' \\+ '/g, '$1');\n}\n\n\nfunction unescapeFragment(str) {\n  return unescapeJsonPointer(decodeURIComponent(str));\n}\n\n\nfunction escapeFragment(str) {\n  return encodeURIComponent(escapeJsonPointer(str));\n}\n\n\nfunction escapeJsonPointer(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n\n\nfunction unescapeJsonPointer(str) {\n  return str.replace(/~1/g, '/').replace(/~0/g, '~');\n}\n","'use strict';\nmodule.exports = function generate__limitItems(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $errorKeyword;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  if (!($isData || typeof $schema == 'number')) {\n    throw new Error($keyword + ' must be number');\n  }\n  var $op = $keyword == 'maxItems' ? '>' : '<';\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'number\\') || ';\n  }\n  out += ' ' + ($data) + '.length ' + ($op) + ' ' + ($schemaValue) + ') { ';\n  var $errorKeyword = $keyword;\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ($errorKeyword || '_limitItems') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { limit: ' + ($schemaValue) + ' } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should NOT have ';\n      if ($keyword == 'maxItems') {\n        out += 'more';\n      } else {\n        out += 'fewer';\n      }\n      out += ' than ';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + ($schema);\n      }\n      out += ' items\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + ($schema);\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n","'use strict';\n\nmodule.exports = function (data, opts) {\n    if (!opts) opts = {};\n    if (typeof opts === 'function') opts = { cmp: opts };\n    var cycles = (typeof opts.cycles === 'boolean') ? opts.cycles : false;\n\n    var cmp = opts.cmp && (function (f) {\n        return function (node) {\n            return function (a, b) {\n                var aobj = { key: a, value: node[a] };\n                var bobj = { key: b, value: node[b] };\n                return f(aobj, bobj);\n            };\n        };\n    })(opts.cmp);\n\n    var seen = [];\n    return (function stringify (node) {\n        if (node && node.toJSON && typeof node.toJSON === 'function') {\n            node = node.toJSON();\n        }\n\n        if (node === undefined) return;\n        if (typeof node == 'number') return isFinite(node) ? '' + node : 'null';\n        if (typeof node !== 'object') return JSON.stringify(node);\n\n        var i, out;\n        if (Array.isArray(node)) {\n            out = '[';\n            for (i = 0; i < node.length; i++) {\n                if (i) out += ',';\n                out += stringify(node[i]) || 'null';\n            }\n            return out + ']';\n        }\n\n        if (node === null) return 'null';\n\n        if (seen.indexOf(node) !== -1) {\n            if (cycles) return JSON.stringify('__cycle__');\n            throw new TypeError('Converting circular structure to JSON');\n        }\n\n        var seenIndex = seen.push(node) - 1;\n        var keys = Object.keys(node).sort(cmp && cmp(node));\n        out = '';\n        for (i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var value = stringify(node[key]);\n\n            if (!value) continue;\n            if (out) out += ',';\n            out += JSON.stringify(key) + ':' + value;\n        }\n        seen.splice(seenIndex, 1);\n        return '{' + out + '}';\n    })(data);\n};\n","'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n","'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n","'use strict';\n\nvar util = require('./util');\n\nmodule.exports = SchemaObject;\n\nfunction SchemaObject(obj) {\n  util.copy(obj, this);\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__7781__;","'use strict';\n\nvar URI = require('uri-js')\n  , equal = require('fast-deep-equal')\n  , util = require('./util')\n  , SchemaObject = require('./schema_obj')\n  , traverse = require('json-schema-traverse');\n\nmodule.exports = resolve;\n\nresolve.normalizeId = normalizeId;\nresolve.fullPath = getFullPath;\nresolve.url = resolveUrl;\nresolve.ids = resolveIds;\nresolve.inlineRef = inlineRef;\nresolve.schema = resolveSchema;\n\n/**\n * [resolve and compile the references ($ref)]\n * @this   Ajv\n * @param  {Function} compile reference to schema compilation funciton (localCompile)\n * @param  {Object} root object with information about the root schema for the current schema\n * @param  {String} ref reference to resolve\n * @return {Object|Function} schema object (if the schema can be inlined) or validation function\n */\nfunction resolve(compile, root, ref) {\n  /* jshint validthis: true */\n  var refVal = this._refs[ref];\n  if (typeof refVal == 'string') {\n    if (this._refs[refVal]) refVal = this._refs[refVal];\n    else return resolve.call(this, compile, root, refVal);\n  }\n\n  refVal = refVal || this._schemas[ref];\n  if (refVal instanceof SchemaObject) {\n    return inlineRef(refVal.schema, this._opts.inlineRefs)\n            ? refVal.schema\n            : refVal.validate || this._compile(refVal);\n  }\n\n  var res = resolveSchema.call(this, root, ref);\n  var schema, v, baseId;\n  if (res) {\n    schema = res.schema;\n    root = res.root;\n    baseId = res.baseId;\n  }\n\n  if (schema instanceof SchemaObject) {\n    v = schema.validate || compile.call(this, schema.schema, root, undefined, baseId);\n  } else if (schema !== undefined) {\n    v = inlineRef(schema, this._opts.inlineRefs)\n        ? schema\n        : compile.call(this, schema, root, undefined, baseId);\n  }\n\n  return v;\n}\n\n\n/**\n * Resolve schema, its root and baseId\n * @this Ajv\n * @param  {Object} root root object with properties schema, refVal, refs\n * @param  {String} ref  reference to resolve\n * @return {Object} object with properties schema, root, baseId\n */\nfunction resolveSchema(root, ref) {\n  /* jshint validthis: true */\n  var p = URI.parse(ref)\n    , refPath = _getFullPath(p)\n    , baseId = getFullPath(this._getId(root.schema));\n  if (Object.keys(root.schema).length === 0 || refPath !== baseId) {\n    var id = normalizeId(refPath);\n    var refVal = this._refs[id];\n    if (typeof refVal == 'string') {\n      return resolveRecursive.call(this, root, refVal, p);\n    } else if (refVal instanceof SchemaObject) {\n      if (!refVal.validate) this._compile(refVal);\n      root = refVal;\n    } else {\n      refVal = this._schemas[id];\n      if (refVal instanceof SchemaObject) {\n        if (!refVal.validate) this._compile(refVal);\n        if (id == normalizeId(ref))\n          return { schema: refVal, root: root, baseId: baseId };\n        root = refVal;\n      } else {\n        return;\n      }\n    }\n    if (!root.schema) return;\n    baseId = getFullPath(this._getId(root.schema));\n  }\n  return getJsonPointer.call(this, p, baseId, root.schema, root);\n}\n\n\n/* @this Ajv */\nfunction resolveRecursive(root, ref, parsedRef) {\n  /* jshint validthis: true */\n  var res = resolveSchema.call(this, root, ref);\n  if (res) {\n    var schema = res.schema;\n    var baseId = res.baseId;\n    root = res.root;\n    var id = this._getId(schema);\n    if (id) baseId = resolveUrl(baseId, id);\n    return getJsonPointer.call(this, parsedRef, baseId, schema, root);\n  }\n}\n\n\nvar PREVENT_SCOPE_CHANGE = util.toHash(['properties', 'patternProperties', 'enum', 'dependencies', 'definitions']);\n/* @this Ajv */\nfunction getJsonPointer(parsedRef, baseId, schema, root) {\n  /* jshint validthis: true */\n  parsedRef.fragment = parsedRef.fragment || '';\n  if (parsedRef.fragment.slice(0,1) != '/') return;\n  var parts = parsedRef.fragment.split('/');\n\n  for (var i = 1; i < parts.length; i++) {\n    var part = parts[i];\n    if (part) {\n      part = util.unescapeFragment(part);\n      schema = schema[part];\n      if (schema === undefined) break;\n      var id;\n      if (!PREVENT_SCOPE_CHANGE[part]) {\n        id = this._getId(schema);\n        if (id) baseId = resolveUrl(baseId, id);\n        if (schema.$ref) {\n          var $ref = resolveUrl(baseId, schema.$ref);\n          var res = resolveSchema.call(this, root, $ref);\n          if (res) {\n            schema = res.schema;\n            root = res.root;\n            baseId = res.baseId;\n          }\n        }\n      }\n    }\n  }\n  if (schema !== undefined && schema !== root.schema)\n    return { schema: schema, root: root, baseId: baseId };\n}\n\n\nvar SIMPLE_INLINED = util.toHash([\n  'type', 'format', 'pattern',\n  'maxLength', 'minLength',\n  'maxProperties', 'minProperties',\n  'maxItems', 'minItems',\n  'maximum', 'minimum',\n  'uniqueItems', 'multipleOf',\n  'required', 'enum'\n]);\nfunction inlineRef(schema, limit) {\n  if (limit === false) return false;\n  if (limit === undefined || limit === true) return checkNoRef(schema);\n  else if (limit) return countKeys(schema) <= limit;\n}\n\n\nfunction checkNoRef(schema) {\n  var item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return false;\n      item = schema[key];\n      if (typeof item == 'object' && !checkNoRef(item)) return false;\n    }\n  }\n  return true;\n}\n\n\nfunction countKeys(schema) {\n  var count = 0, item;\n  if (Array.isArray(schema)) {\n    for (var i=0; i<schema.length; i++) {\n      item = schema[i];\n      if (typeof item == 'object') count += countKeys(item);\n      if (count == Infinity) return Infinity;\n    }\n  } else {\n    for (var key in schema) {\n      if (key == '$ref') return Infinity;\n      if (SIMPLE_INLINED[key]) {\n        count++;\n      } else {\n        item = schema[key];\n        if (typeof item == 'object') count += countKeys(item) + 1;\n        if (count == Infinity) return Infinity;\n      }\n    }\n  }\n  return count;\n}\n\n\nfunction getFullPath(id, normalize) {\n  if (normalize !== false) id = normalizeId(id);\n  var p = URI.parse(id);\n  return _getFullPath(p);\n}\n\n\nfunction _getFullPath(p) {\n  return URI.serialize(p).split('#')[0] + '#';\n}\n\n\nvar TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n  return id ? id.replace(TRAILING_SLASH_HASH, '') : '';\n}\n\n\nfunction resolveUrl(baseId, id) {\n  id = normalizeId(id);\n  return URI.resolve(baseId, id);\n}\n\n\n/* @this Ajv */\nfunction resolveIds(schema) {\n  var schemaId = normalizeId(this._getId(schema));\n  var baseIds = {'': schemaId};\n  var fullPaths = {'': getFullPath(schemaId, false)};\n  var localRefs = {};\n  var self = this;\n\n  traverse(schema, {allKeys: true}, function(sch, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n    if (jsonPtr === '') return;\n    var id = self._getId(sch);\n    var baseId = baseIds[parentJsonPtr];\n    var fullPath = fullPaths[parentJsonPtr] + '/' + parentKeyword;\n    if (keyIndex !== undefined)\n      fullPath += '/' + (typeof keyIndex == 'number' ? keyIndex : util.escapeFragment(keyIndex));\n\n    if (typeof id == 'string') {\n      id = baseId = normalizeId(baseId ? URI.resolve(baseId, id) : id);\n\n      var refVal = self._refs[id];\n      if (typeof refVal == 'string') refVal = self._refs[refVal];\n      if (refVal && refVal.schema) {\n        if (!equal(sch, refVal.schema))\n          throw new Error('id \"' + id + '\" resolves to more than one schema');\n      } else if (id != normalizeId(fullPath)) {\n        if (id[0] == '#') {\n          if (localRefs[id] && !equal(sch, localRefs[id]))\n            throw new Error('id \"' + id + '\" resolves to more than one schema');\n          localRefs[id] = sch;\n        } else {\n          self._refs[id] = fullPath;\n        }\n      }\n    }\n    baseIds[jsonPtr] = baseId;\n    fullPaths[jsonPtr] = fullPath;\n  });\n\n  return localRefs;\n}\n","'use strict'\n\nconst SemVer = require('../classes/semver')\nconst patch = (a, loose) => new SemVer(a, loose).patch\nmodule.exports = patch\n","'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n","'use strict'\n\nconst outside = require('./outside')\n// Determine if version is less than all the versions possible in the range\nconst ltr = (version, range, options) => outside(version, range, '<', options)\nmodule.exports = ltr\n","'use strict';\nmodule.exports = function generate_comment(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $schema = it.schema[$keyword];\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $comment = it.util.toQuotedString($schema);\n  if (it.opts.$comment === true) {\n    out += ' console.log(' + ($comment) + ');';\n  } else if (typeof it.opts.$comment == 'function') {\n    out += ' self._opts.$comment(' + ($comment) + ', ' + (it.util.toQuotedString($errSchemaPath)) + ', validate.root.schema);';\n  }\n  return out;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8531__;","'use strict';\n\nvar resolve = require('./resolve');\n\nmodule.exports = {\n  Validation: errorSubclass(ValidationError),\n  MissingRef: errorSubclass(MissingRefError)\n};\n\n\nfunction ValidationError(errors) {\n  this.message = 'validation failed';\n  this.errors = errors;\n  this.ajv = this.validation = true;\n}\n\n\nMissingRefError.message = function (baseId, ref) {\n  return 'can\\'t resolve reference ' + ref + ' from id ' + baseId;\n};\n\n\nfunction MissingRefError(baseId, ref, message) {\n  this.message = message || MissingRefError.message(baseId, ref);\n  this.missingRef = resolve.url(baseId, ref);\n  this.missingSchema = resolve.normalizeId(resolve.fullPath(this.missingRef));\n}\n\n\nfunction errorSubclass(Subclass) {\n  Subclass.prototype = Object.create(Error.prototype);\n  Subclass.prototype.constructor = Subclass;\n  return Subclass;\n}\n","'use strict';\nmodule.exports = function generate_pattern(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $isData = it.opts.$data && $schema && $schema.$data,\n    $schemaValue;\n  if ($isData) {\n    out += ' var schema' + ($lvl) + ' = ' + (it.util.getData($schema.$data, $dataLvl, it.dataPathArr)) + '; ';\n    $schemaValue = 'schema' + $lvl;\n  } else {\n    $schemaValue = $schema;\n  }\n  var $regexp = $isData ? '(new RegExp(' + $schemaValue + '))' : it.usePattern($schema);\n  out += 'if ( ';\n  if ($isData) {\n    out += ' (' + ($schemaValue) + ' !== undefined && typeof ' + ($schemaValue) + ' != \\'string\\') || ';\n  }\n  out += ' !' + ($regexp) + '.test(' + ($data) + ') ) {   ';\n  var $$outStack = $$outStack || [];\n  $$outStack.push(out);\n  out = ''; /* istanbul ignore else */\n  if (it.createErrors !== false) {\n    out += ' { keyword: \\'' + ('pattern') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { pattern:  ';\n    if ($isData) {\n      out += '' + ($schemaValue);\n    } else {\n      out += '' + (it.util.toQuotedString($schema));\n    }\n    out += '  } ';\n    if (it.opts.messages !== false) {\n      out += ' , message: \\'should match pattern \"';\n      if ($isData) {\n        out += '\\' + ' + ($schemaValue) + ' + \\'';\n      } else {\n        out += '' + (it.util.escapeQuotes($schema));\n      }\n      out += '\"\\' ';\n    }\n    if (it.opts.verbose) {\n      out += ' , schema:  ';\n      if ($isData) {\n        out += 'validate.schema' + ($schemaPath);\n      } else {\n        out += '' + (it.util.toQuotedString($schema));\n      }\n      out += '         , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n    }\n    out += ' } ';\n  } else {\n    out += ' {} ';\n  }\n  var __err = out;\n  out = $$outStack.pop();\n  if (!it.compositeRule && $breakOnError) {\n    /* istanbul ignore if */\n    if (it.async) {\n      out += ' throw new ValidationError([' + (__err) + ']); ';\n    } else {\n      out += ' validate.errors = [' + (__err) + ']; return false; ';\n    }\n  } else {\n    out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n  }\n  out += '} ';\n  if ($breakOnError) {\n    out += ' else { ';\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_validate(it, $keyword, $ruleType) {\n  var out = '';\n  var $async = it.schema.$async === true,\n    $refKeywords = it.util.schemaHasRulesExcept(it.schema, it.RULES.all, '$ref'),\n    $id = it.self._getId(it.schema);\n  if (it.opts.strictKeywords) {\n    var $unknownKwd = it.util.schemaUnknownRules(it.schema, it.RULES.keywords);\n    if ($unknownKwd) {\n      var $keywordsMsg = 'unknown keyword: ' + $unknownKwd;\n      if (it.opts.strictKeywords === 'log') it.logger.warn($keywordsMsg);\n      else throw new Error($keywordsMsg);\n    }\n  }\n  if (it.isTop) {\n    out += ' var validate = ';\n    if ($async) {\n      it.async = true;\n      out += 'async ';\n    }\n    out += 'function(data, dataPath, parentData, parentDataProperty, rootData) { \\'use strict\\'; ';\n    if ($id && (it.opts.sourceCode || it.opts.processCode)) {\n      out += ' ' + ('/\\*# sourceURL=' + $id + ' */') + ' ';\n    }\n  }\n  if (typeof it.schema == 'boolean' || !($refKeywords || it.schema.$ref)) {\n    var $keyword = 'false schema';\n    var $lvl = it.level;\n    var $dataLvl = it.dataLevel;\n    var $schema = it.schema[$keyword];\n    var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n    var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n    var $breakOnError = !it.opts.allErrors;\n    var $errorKeyword;\n    var $data = 'data' + ($dataLvl || '');\n    var $valid = 'valid' + $lvl;\n    if (it.schema === false) {\n      if (it.isTop) {\n        $breakOnError = true;\n      } else {\n        out += ' var ' + ($valid) + ' = false; ';\n      }\n      var $$outStack = $$outStack || [];\n      $$outStack.push(out);\n      out = ''; /* istanbul ignore else */\n      if (it.createErrors !== false) {\n        out += ' { keyword: \\'' + ($errorKeyword || 'false schema') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n        if (it.opts.messages !== false) {\n          out += ' , message: \\'boolean schema is false\\' ';\n        }\n        if (it.opts.verbose) {\n          out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n        }\n        out += ' } ';\n      } else {\n        out += ' {} ';\n      }\n      var __err = out;\n      out = $$outStack.pop();\n      if (!it.compositeRule && $breakOnError) {\n        /* istanbul ignore if */\n        if (it.async) {\n          out += ' throw new ValidationError([' + (__err) + ']); ';\n        } else {\n          out += ' validate.errors = [' + (__err) + ']; return false; ';\n        }\n      } else {\n        out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n      }\n    } else {\n      if (it.isTop) {\n        if ($async) {\n          out += ' return data; ';\n        } else {\n          out += ' validate.errors = null; return true; ';\n        }\n      } else {\n        out += ' var ' + ($valid) + ' = true; ';\n      }\n    }\n    if (it.isTop) {\n      out += ' }; return validate; ';\n    }\n    return out;\n  }\n  if (it.isTop) {\n    var $top = it.isTop,\n      $lvl = it.level = 0,\n      $dataLvl = it.dataLevel = 0,\n      $data = 'data';\n    it.rootId = it.resolve.fullPath(it.self._getId(it.root.schema));\n    it.baseId = it.baseId || it.rootId;\n    delete it.isTop;\n    it.dataPathArr = [\"\"];\n    if (it.schema.default !== undefined && it.opts.useDefaults && it.opts.strictDefaults) {\n      var $defaultMsg = 'default is ignored in the schema root';\n      if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n      else throw new Error($defaultMsg);\n    }\n    out += ' var vErrors = null; ';\n    out += ' var errors = 0;     ';\n    out += ' if (rootData === undefined) rootData = data; ';\n  } else {\n    var $lvl = it.level,\n      $dataLvl = it.dataLevel,\n      $data = 'data' + ($dataLvl || '');\n    if ($id) it.baseId = it.resolve.url(it.baseId, $id);\n    if ($async && !it.async) throw new Error('async schema in sync schema');\n    out += ' var errs_' + ($lvl) + ' = errors;';\n  }\n  var $valid = 'valid' + $lvl,\n    $breakOnError = !it.opts.allErrors,\n    $closingBraces1 = '',\n    $closingBraces2 = '';\n  var $errorKeyword;\n  var $typeSchema = it.schema.type,\n    $typeIsArray = Array.isArray($typeSchema);\n  if ($typeSchema && it.opts.nullable && it.schema.nullable === true) {\n    if ($typeIsArray) {\n      if ($typeSchema.indexOf('null') == -1) $typeSchema = $typeSchema.concat('null');\n    } else if ($typeSchema != 'null') {\n      $typeSchema = [$typeSchema, 'null'];\n      $typeIsArray = true;\n    }\n  }\n  if ($typeIsArray && $typeSchema.length == 1) {\n    $typeSchema = $typeSchema[0];\n    $typeIsArray = false;\n  }\n  if (it.schema.$ref && $refKeywords) {\n    if (it.opts.extendRefs == 'fail') {\n      throw new Error('$ref: validation keywords used in schema at path \"' + it.errSchemaPath + '\" (see option extendRefs)');\n    } else if (it.opts.extendRefs !== true) {\n      $refKeywords = false;\n      it.logger.warn('$ref: keywords ignored in schema at path \"' + it.errSchemaPath + '\"');\n    }\n  }\n  if (it.schema.$comment && it.opts.$comment) {\n    out += ' ' + (it.RULES.all.$comment.code(it, '$comment'));\n  }\n  if ($typeSchema) {\n    if (it.opts.coerceTypes) {\n      var $coerceToTypes = it.util.coerceToTypes(it.opts.coerceTypes, $typeSchema);\n    }\n    var $rulesGroup = it.RULES.types[$typeSchema];\n    if ($coerceToTypes || $typeIsArray || $rulesGroup === true || ($rulesGroup && !$shouldUseGroup($rulesGroup))) {\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type';\n      var $schemaPath = it.schemaPath + '.type',\n        $errSchemaPath = it.errSchemaPath + '/type',\n        $method = $typeIsArray ? 'checkDataTypes' : 'checkDataType';\n      out += ' if (' + (it.util[$method]($typeSchema, $data, it.opts.strictNumbers, true)) + ') { ';\n      if ($coerceToTypes) {\n        var $dataType = 'dataType' + $lvl,\n          $coerced = 'coerced' + $lvl;\n        out += ' var ' + ($dataType) + ' = typeof ' + ($data) + '; var ' + ($coerced) + ' = undefined; ';\n        if (it.opts.coerceTypes == 'array') {\n          out += ' if (' + ($dataType) + ' == \\'object\\' && Array.isArray(' + ($data) + ') && ' + ($data) + '.length == 1) { ' + ($data) + ' = ' + ($data) + '[0]; ' + ($dataType) + ' = typeof ' + ($data) + '; if (' + (it.util.checkDataType(it.schema.type, $data, it.opts.strictNumbers)) + ') ' + ($coerced) + ' = ' + ($data) + '; } ';\n        }\n        out += ' if (' + ($coerced) + ' !== undefined) ; ';\n        var arr1 = $coerceToTypes;\n        if (arr1) {\n          var $type, $i = -1,\n            l1 = arr1.length - 1;\n          while ($i < l1) {\n            $type = arr1[$i += 1];\n            if ($type == 'string') {\n              out += ' else if (' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\') ' + ($coerced) + ' = \\'\\' + ' + ($data) + '; else if (' + ($data) + ' === null) ' + ($coerced) + ' = \\'\\'; ';\n            } else if ($type == 'number' || $type == 'integer') {\n              out += ' else if (' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' === null || (' + ($dataType) + ' == \\'string\\' && ' + ($data) + ' && ' + ($data) + ' == +' + ($data) + ' ';\n              if ($type == 'integer') {\n                out += ' && !(' + ($data) + ' % 1)';\n              }\n              out += ')) ' + ($coerced) + ' = +' + ($data) + '; ';\n            } else if ($type == 'boolean') {\n              out += ' else if (' + ($data) + ' === \\'false\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === null) ' + ($coerced) + ' = false; else if (' + ($data) + ' === \\'true\\' || ' + ($data) + ' === 1) ' + ($coerced) + ' = true; ';\n            } else if ($type == 'null') {\n              out += ' else if (' + ($data) + ' === \\'\\' || ' + ($data) + ' === 0 || ' + ($data) + ' === false) ' + ($coerced) + ' = null; ';\n            } else if (it.opts.coerceTypes == 'array' && $type == 'array') {\n              out += ' else if (' + ($dataType) + ' == \\'string\\' || ' + ($dataType) + ' == \\'number\\' || ' + ($dataType) + ' == \\'boolean\\' || ' + ($data) + ' == null) ' + ($coerced) + ' = [' + ($data) + ']; ';\n            }\n          }\n        }\n        out += ' else {   ';\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n        out += ' } if (' + ($coerced) + ' !== undefined) {  ';\n        var $parentData = $dataLvl ? 'data' + (($dataLvl - 1) || '') : 'parentData',\n          $parentDataProperty = $dataLvl ? it.dataPathArr[$dataLvl] : 'parentDataProperty';\n        out += ' ' + ($data) + ' = ' + ($coerced) + '; ';\n        if (!$dataLvl) {\n          out += 'if (' + ($parentData) + ' !== undefined)';\n        }\n        out += ' ' + ($parentData) + '[' + ($parentDataProperty) + '] = ' + ($coerced) + '; } ';\n      } else {\n        var $$outStack = $$outStack || [];\n        $$outStack.push(out);\n        out = ''; /* istanbul ignore else */\n        if (it.createErrors !== false) {\n          out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n          if ($typeIsArray) {\n            out += '' + ($typeSchema.join(\",\"));\n          } else {\n            out += '' + ($typeSchema);\n          }\n          out += '\\' } ';\n          if (it.opts.messages !== false) {\n            out += ' , message: \\'should be ';\n            if ($typeIsArray) {\n              out += '' + ($typeSchema.join(\",\"));\n            } else {\n              out += '' + ($typeSchema);\n            }\n            out += '\\' ';\n          }\n          if (it.opts.verbose) {\n            out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n          }\n          out += ' } ';\n        } else {\n          out += ' {} ';\n        }\n        var __err = out;\n        out = $$outStack.pop();\n        if (!it.compositeRule && $breakOnError) {\n          /* istanbul ignore if */\n          if (it.async) {\n            out += ' throw new ValidationError([' + (__err) + ']); ';\n          } else {\n            out += ' validate.errors = [' + (__err) + ']; return false; ';\n          }\n        } else {\n          out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n        }\n      }\n      out += ' } ';\n    }\n  }\n  if (it.schema.$ref && !$refKeywords) {\n    out += ' ' + (it.RULES.all.$ref.code(it, '$ref')) + ' ';\n    if ($breakOnError) {\n      out += ' } if (errors === ';\n      if ($top) {\n        out += '0';\n      } else {\n        out += 'errs_' + ($lvl);\n      }\n      out += ') { ';\n      $closingBraces2 += '}';\n    }\n  } else {\n    var arr2 = it.RULES;\n    if (arr2) {\n      var $rulesGroup, i2 = -1,\n        l2 = arr2.length - 1;\n      while (i2 < l2) {\n        $rulesGroup = arr2[i2 += 1];\n        if ($shouldUseGroup($rulesGroup)) {\n          if ($rulesGroup.type) {\n            out += ' if (' + (it.util.checkDataType($rulesGroup.type, $data, it.opts.strictNumbers)) + ') { ';\n          }\n          if (it.opts.useDefaults) {\n            if ($rulesGroup.type == 'object' && it.schema.properties) {\n              var $schema = it.schema.properties,\n                $schemaKeys = Object.keys($schema);\n              var arr3 = $schemaKeys;\n              if (arr3) {\n                var $propertyKey, i3 = -1,\n                  l3 = arr3.length - 1;\n                while (i3 < l3) {\n                  $propertyKey = arr3[i3 += 1];\n                  var $sch = $schema[$propertyKey];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + it.util.getProperty($propertyKey);\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            } else if ($rulesGroup.type == 'array' && Array.isArray(it.schema.items)) {\n              var arr4 = it.schema.items;\n              if (arr4) {\n                var $sch, $i = -1,\n                  l4 = arr4.length - 1;\n                while ($i < l4) {\n                  $sch = arr4[$i += 1];\n                  if ($sch.default !== undefined) {\n                    var $passData = $data + '[' + $i + ']';\n                    if (it.compositeRule) {\n                      if (it.opts.strictDefaults) {\n                        var $defaultMsg = 'default is ignored for: ' + $passData;\n                        if (it.opts.strictDefaults === 'log') it.logger.warn($defaultMsg);\n                        else throw new Error($defaultMsg);\n                      }\n                    } else {\n                      out += ' if (' + ($passData) + ' === undefined ';\n                      if (it.opts.useDefaults == 'empty') {\n                        out += ' || ' + ($passData) + ' === null || ' + ($passData) + ' === \\'\\' ';\n                      }\n                      out += ' ) ' + ($passData) + ' = ';\n                      if (it.opts.useDefaults == 'shared') {\n                        out += ' ' + (it.useDefault($sch.default)) + ' ';\n                      } else {\n                        out += ' ' + (JSON.stringify($sch.default)) + ' ';\n                      }\n                      out += '; ';\n                    }\n                  }\n                }\n              }\n            }\n          }\n          var arr5 = $rulesGroup.rules;\n          if (arr5) {\n            var $rule, i5 = -1,\n              l5 = arr5.length - 1;\n            while (i5 < l5) {\n              $rule = arr5[i5 += 1];\n              if ($shouldUseRule($rule)) {\n                var $code = $rule.code(it, $rule.keyword, $rulesGroup.type);\n                if ($code) {\n                  out += ' ' + ($code) + ' ';\n                  if ($breakOnError) {\n                    $closingBraces1 += '}';\n                  }\n                }\n              }\n            }\n          }\n          if ($breakOnError) {\n            out += ' ' + ($closingBraces1) + ' ';\n            $closingBraces1 = '';\n          }\n          if ($rulesGroup.type) {\n            out += ' } ';\n            if ($typeSchema && $typeSchema === $rulesGroup.type && !$coerceToTypes) {\n              out += ' else { ';\n              var $schemaPath = it.schemaPath + '.type',\n                $errSchemaPath = it.errSchemaPath + '/type';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ($errorKeyword || 'type') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { type: \\'';\n                if ($typeIsArray) {\n                  out += '' + ($typeSchema.join(\",\"));\n                } else {\n                  out += '' + ($typeSchema);\n                }\n                out += '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'should be ';\n                  if ($typeIsArray) {\n                    out += '' + ($typeSchema.join(\",\"));\n                  } else {\n                    out += '' + ($typeSchema);\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              out += ' } ';\n            }\n          }\n          if ($breakOnError) {\n            out += ' if (errors === ';\n            if ($top) {\n              out += '0';\n            } else {\n              out += 'errs_' + ($lvl);\n            }\n            out += ') { ';\n            $closingBraces2 += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces2) + ' ';\n  }\n  if ($top) {\n    if ($async) {\n      out += ' if (errors === 0) return data;           ';\n      out += ' else throw new ValidationError(vErrors); ';\n    } else {\n      out += ' validate.errors = vErrors; ';\n      out += ' return errors === 0;       ';\n    }\n    out += ' }; return validate;';\n  } else {\n    out += ' var ' + ($valid) + ' = errors === errs_' + ($lvl) + ';';\n  }\n\n  function $shouldUseGroup($rulesGroup) {\n    var rules = $rulesGroup.rules;\n    for (var i = 0; i < rules.length; i++)\n      if ($shouldUseRule(rules[i])) return true;\n  }\n\n  function $shouldUseRule($rule) {\n    return it.schema[$rule.keyword] !== undefined || ($rule.implements && $ruleImplementsSomeKeyword($rule));\n  }\n\n  function $ruleImplementsSomeKeyword($rule) {\n    var impl = $rule.implements;\n    for (var i = 0; i < impl.length; i++)\n      if (it.schema[impl[i]] !== undefined) return true;\n  }\n  return out;\n}\n","'use strict';\nmodule.exports = function generate_not(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  if ((it.opts.strictKeywords ? (typeof $schema == 'object' && Object.keys($schema).length > 0) || $schema === false : it.util.schemaHasRules($schema, it.RULES.all))) {\n    $it.schema = $schema;\n    $it.schemaPath = $schemaPath;\n    $it.errSchemaPath = $errSchemaPath;\n    out += ' var ' + ($errs) + ' = errors;  ';\n    var $wasComposite = it.compositeRule;\n    it.compositeRule = $it.compositeRule = true;\n    $it.createErrors = false;\n    var $allErrorsOption;\n    if ($it.opts.allErrors) {\n      $allErrorsOption = $it.opts.allErrors;\n      $it.opts.allErrors = false;\n    }\n    out += ' ' + (it.validate($it)) + ' ';\n    $it.createErrors = true;\n    if ($allErrorsOption) $it.opts.allErrors = $allErrorsOption;\n    it.compositeRule = $it.compositeRule = $wasComposite;\n    out += ' if (' + ($nextValid) + ') {   ';\n    var $$outStack = $$outStack || [];\n    $$outStack.push(out);\n    out = ''; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    var __err = out;\n    out = $$outStack.pop();\n    if (!it.compositeRule && $breakOnError) {\n      /* istanbul ignore if */\n      if (it.async) {\n        out += ' throw new ValidationError([' + (__err) + ']); ';\n      } else {\n        out += ' validate.errors = [' + (__err) + ']; return false; ';\n      }\n    } else {\n      out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    }\n    out += ' } else {  errors = ' + ($errs) + '; if (vErrors !== null) { if (' + ($errs) + ') vErrors.length = ' + ($errs) + '; else vErrors = null; } ';\n    if (it.opts.allErrors) {\n      out += ' } ';\n    }\n  } else {\n    out += '  var err =   '; /* istanbul ignore else */\n    if (it.createErrors !== false) {\n      out += ' { keyword: \\'' + ('not') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: {} ';\n      if (it.opts.messages !== false) {\n        out += ' , message: \\'should NOT be valid\\' ';\n      }\n      if (it.opts.verbose) {\n        out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n      }\n      out += ' } ';\n    } else {\n      out += ' {} ';\n    }\n    out += ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n    if ($breakOnError) {\n      out += ' if (false) { ';\n    }\n  }\n  return out;\n}\n","'use strict'\n\nconst SemVer = require('../classes/semver')\n\nconst inc = (version, release, options, identifier, identifierBase) => {\n  if (typeof (options) === 'string') {\n    identifierBase = identifier\n    identifier = options\n    options = undefined\n  }\n\n  try {\n    return new SemVer(\n      version instanceof SemVer ? version.version : version,\n      options\n    ).inc(release, identifier, identifierBase).version\n  } catch (er) {\n    return null\n  }\n}\nmodule.exports = inc\n","'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return a === b ? 0 : a < b ? -1 : 1\n  }\n\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n","'use strict';\nmodule.exports = function generate_properties(it, $keyword, $ruleType) {\n  var out = ' ';\n  var $lvl = it.level;\n  var $dataLvl = it.dataLevel;\n  var $schema = it.schema[$keyword];\n  var $schemaPath = it.schemaPath + it.util.getProperty($keyword);\n  var $errSchemaPath = it.errSchemaPath + '/' + $keyword;\n  var $breakOnError = !it.opts.allErrors;\n  var $data = 'data' + ($dataLvl || '');\n  var $errs = 'errs__' + $lvl;\n  var $it = it.util.copy(it);\n  var $closingBraces = '';\n  $it.level++;\n  var $nextValid = 'valid' + $it.level;\n  var $key = 'key' + $lvl,\n    $idx = 'idx' + $lvl,\n    $dataNxt = $it.dataLevel = it.dataLevel + 1,\n    $nextData = 'data' + $dataNxt,\n    $dataProperties = 'dataProperties' + $lvl;\n  var $schemaKeys = Object.keys($schema || {}).filter(notProto),\n    $pProperties = it.schema.patternProperties || {},\n    $pPropertyKeys = Object.keys($pProperties).filter(notProto),\n    $aProperties = it.schema.additionalProperties,\n    $someProperties = $schemaKeys.length || $pPropertyKeys.length,\n    $noAdditional = $aProperties === false,\n    $additionalIsSchema = typeof $aProperties == 'object' && Object.keys($aProperties).length,\n    $removeAdditional = it.opts.removeAdditional,\n    $checkAdditional = $noAdditional || $additionalIsSchema || $removeAdditional,\n    $ownProperties = it.opts.ownProperties,\n    $currentBaseId = it.baseId;\n  var $required = it.schema.required;\n  if ($required && !(it.opts.$data && $required.$data) && $required.length < it.opts.loopRequired) {\n    var $requiredHash = it.util.toHash($required);\n  }\n\n  function notProto(p) {\n    return p !== '__proto__';\n  }\n  out += 'var ' + ($errs) + ' = errors;var ' + ($nextValid) + ' = true;';\n  if ($ownProperties) {\n    out += ' var ' + ($dataProperties) + ' = undefined;';\n  }\n  if ($checkAdditional) {\n    if ($ownProperties) {\n      out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n    } else {\n      out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n    }\n    if ($someProperties) {\n      out += ' var isAdditional' + ($lvl) + ' = !(false ';\n      if ($schemaKeys.length) {\n        if ($schemaKeys.length > 8) {\n          out += ' || validate.schema' + ($schemaPath) + '.hasOwnProperty(' + ($key) + ') ';\n        } else {\n          var arr1 = $schemaKeys;\n          if (arr1) {\n            var $propertyKey, i1 = -1,\n              l1 = arr1.length - 1;\n            while (i1 < l1) {\n              $propertyKey = arr1[i1 += 1];\n              out += ' || ' + ($key) + ' == ' + (it.util.toQuotedString($propertyKey)) + ' ';\n            }\n          }\n        }\n      }\n      if ($pPropertyKeys.length) {\n        var arr2 = $pPropertyKeys;\n        if (arr2) {\n          var $pProperty, $i = -1,\n            l2 = arr2.length - 1;\n          while ($i < l2) {\n            $pProperty = arr2[$i += 1];\n            out += ' || ' + (it.usePattern($pProperty)) + '.test(' + ($key) + ') ';\n          }\n        }\n      }\n      out += ' ); if (isAdditional' + ($lvl) + ') { ';\n    }\n    if ($removeAdditional == 'all') {\n      out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n    } else {\n      var $currentErrorPath = it.errorPath;\n      var $additionalProperty = '\\' + ' + $key + ' + \\'';\n      if (it.opts._errorDataPathProperty) {\n        it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n      }\n      if ($noAdditional) {\n        if ($removeAdditional) {\n          out += ' delete ' + ($data) + '[' + ($key) + ']; ';\n        } else {\n          out += ' ' + ($nextValid) + ' = false; ';\n          var $currErrSchemaPath = $errSchemaPath;\n          $errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          var $$outStack = $$outStack || [];\n          $$outStack.push(out);\n          out = ''; /* istanbul ignore else */\n          if (it.createErrors !== false) {\n            out += ' { keyword: \\'' + ('additionalProperties') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { additionalProperty: \\'' + ($additionalProperty) + '\\' } ';\n            if (it.opts.messages !== false) {\n              out += ' , message: \\'';\n              if (it.opts._errorDataPathProperty) {\n                out += 'is an invalid additional property';\n              } else {\n                out += 'should NOT have additional properties';\n              }\n              out += '\\' ';\n            }\n            if (it.opts.verbose) {\n              out += ' , schema: false , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n            }\n            out += ' } ';\n          } else {\n            out += ' {} ';\n          }\n          var __err = out;\n          out = $$outStack.pop();\n          if (!it.compositeRule && $breakOnError) {\n            /* istanbul ignore if */\n            if (it.async) {\n              out += ' throw new ValidationError([' + (__err) + ']); ';\n            } else {\n              out += ' validate.errors = [' + (__err) + ']; return false; ';\n            }\n          } else {\n            out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n          }\n          $errSchemaPath = $currErrSchemaPath;\n          if ($breakOnError) {\n            out += ' break; ';\n          }\n        }\n      } else if ($additionalIsSchema) {\n        if ($removeAdditional == 'failing') {\n          out += ' var ' + ($errs) + ' = errors;  ';\n          var $wasComposite = it.compositeRule;\n          it.compositeRule = $it.compositeRule = true;\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          out += ' if (!' + ($nextValid) + ') { errors = ' + ($errs) + '; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete ' + ($data) + '[' + ($key) + ']; }  ';\n          it.compositeRule = $it.compositeRule = $wasComposite;\n        } else {\n          $it.schema = $aProperties;\n          $it.schemaPath = it.schemaPath + '.additionalProperties';\n          $it.errSchemaPath = it.errSchemaPath + '/additionalProperties';\n          $it.errorPath = it.opts._errorDataPathProperty ? it.errorPath : it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n        }\n      }\n      it.errorPath = $currentErrorPath;\n    }\n    if ($someProperties) {\n      out += ' } ';\n    }\n    out += ' }  ';\n    if ($breakOnError) {\n      out += ' if (' + ($nextValid) + ') { ';\n      $closingBraces += '}';\n    }\n  }\n  var $useDefaults = it.opts.useDefaults && !it.compositeRule;\n  if ($schemaKeys.length) {\n    var arr3 = $schemaKeys;\n    if (arr3) {\n      var $propertyKey, i3 = -1,\n        l3 = arr3.length - 1;\n      while (i3 < l3) {\n        $propertyKey = arr3[i3 += 1];\n        var $sch = $schema[$propertyKey];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          var $prop = it.util.getProperty($propertyKey),\n            $passData = $data + $prop,\n            $hasDefault = $useDefaults && $sch.default !== undefined;\n          $it.schema = $sch;\n          $it.schemaPath = $schemaPath + $prop;\n          $it.errSchemaPath = $errSchemaPath + '/' + it.util.escapeFragment($propertyKey);\n          $it.errorPath = it.util.getPath(it.errorPath, $propertyKey, it.opts.jsonPointers);\n          $it.dataPathArr[$dataNxt] = it.util.toQuotedString($propertyKey);\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            $code = it.util.varReplace($code, $nextData, $passData);\n            var $useData = $passData;\n          } else {\n            var $useData = $nextData;\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ';\n          }\n          if ($hasDefault) {\n            out += ' ' + ($code) + ' ';\n          } else {\n            if ($requiredHash && $requiredHash[$propertyKey]) {\n              out += ' if ( ' + ($useData) + ' === undefined ';\n              if ($ownProperties) {\n                out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n              }\n              out += ') { ' + ($nextValid) + ' = false; ';\n              var $currentErrorPath = it.errorPath,\n                $currErrSchemaPath = $errSchemaPath,\n                $missingProperty = it.util.escapeQuotes($propertyKey);\n              if (it.opts._errorDataPathProperty) {\n                it.errorPath = it.util.getPath($currentErrorPath, $propertyKey, it.opts.jsonPointers);\n              }\n              $errSchemaPath = it.errSchemaPath + '/required';\n              var $$outStack = $$outStack || [];\n              $$outStack.push(out);\n              out = ''; /* istanbul ignore else */\n              if (it.createErrors !== false) {\n                out += ' { keyword: \\'' + ('required') + '\\' , dataPath: (dataPath || \\'\\') + ' + (it.errorPath) + ' , schemaPath: ' + (it.util.toQuotedString($errSchemaPath)) + ' , params: { missingProperty: \\'' + ($missingProperty) + '\\' } ';\n                if (it.opts.messages !== false) {\n                  out += ' , message: \\'';\n                  if (it.opts._errorDataPathProperty) {\n                    out += 'is a required property';\n                  } else {\n                    out += 'should have required property \\\\\\'' + ($missingProperty) + '\\\\\\'';\n                  }\n                  out += '\\' ';\n                }\n                if (it.opts.verbose) {\n                  out += ' , schema: validate.schema' + ($schemaPath) + ' , parentSchema: validate.schema' + (it.schemaPath) + ' , data: ' + ($data) + ' ';\n                }\n                out += ' } ';\n              } else {\n                out += ' {} ';\n              }\n              var __err = out;\n              out = $$outStack.pop();\n              if (!it.compositeRule && $breakOnError) {\n                /* istanbul ignore if */\n                if (it.async) {\n                  out += ' throw new ValidationError([' + (__err) + ']); ';\n                } else {\n                  out += ' validate.errors = [' + (__err) + ']; return false; ';\n                }\n              } else {\n                out += ' var err = ' + (__err) + ';  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ';\n              }\n              $errSchemaPath = $currErrSchemaPath;\n              it.errorPath = $currentErrorPath;\n              out += ' } else { ';\n            } else {\n              if ($breakOnError) {\n                out += ' if ( ' + ($useData) + ' === undefined ';\n                if ($ownProperties) {\n                  out += ' || ! Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ') { ' + ($nextValid) + ' = true; } else { ';\n              } else {\n                out += ' if (' + ($useData) + ' !== undefined ';\n                if ($ownProperties) {\n                  out += ' &&   Object.prototype.hasOwnProperty.call(' + ($data) + ', \\'' + (it.util.escapeQuotes($propertyKey)) + '\\') ';\n                }\n                out += ' ) { ';\n              }\n            }\n            out += ' ' + ($code) + ' } ';\n          }\n        }\n        if ($breakOnError) {\n          out += ' if (' + ($nextValid) + ') { ';\n          $closingBraces += '}';\n        }\n      }\n    }\n  }\n  if ($pPropertyKeys.length) {\n    var arr4 = $pPropertyKeys;\n    if (arr4) {\n      var $pProperty, i4 = -1,\n        l4 = arr4.length - 1;\n      while (i4 < l4) {\n        $pProperty = arr4[i4 += 1];\n        var $sch = $pProperties[$pProperty];\n        if ((it.opts.strictKeywords ? (typeof $sch == 'object' && Object.keys($sch).length > 0) || $sch === false : it.util.schemaHasRules($sch, it.RULES.all))) {\n          $it.schema = $sch;\n          $it.schemaPath = it.schemaPath + '.patternProperties' + it.util.getProperty($pProperty);\n          $it.errSchemaPath = it.errSchemaPath + '/patternProperties/' + it.util.escapeFragment($pProperty);\n          if ($ownProperties) {\n            out += ' ' + ($dataProperties) + ' = ' + ($dataProperties) + ' || Object.keys(' + ($data) + '); for (var ' + ($idx) + '=0; ' + ($idx) + '<' + ($dataProperties) + '.length; ' + ($idx) + '++) { var ' + ($key) + ' = ' + ($dataProperties) + '[' + ($idx) + ']; ';\n          } else {\n            out += ' for (var ' + ($key) + ' in ' + ($data) + ') { ';\n          }\n          out += ' if (' + (it.usePattern($pProperty)) + '.test(' + ($key) + ')) { ';\n          $it.errorPath = it.util.getPathExpr(it.errorPath, $key, it.opts.jsonPointers);\n          var $passData = $data + '[' + $key + ']';\n          $it.dataPathArr[$dataNxt] = $key;\n          var $code = it.validate($it);\n          $it.baseId = $currentBaseId;\n          if (it.util.varOccurences($code, $nextData) < 2) {\n            out += ' ' + (it.util.varReplace($code, $nextData, $passData)) + ' ';\n          } else {\n            out += ' var ' + ($nextData) + ' = ' + ($passData) + '; ' + ($code) + ' ';\n          }\n          if ($breakOnError) {\n            out += ' if (!' + ($nextValid) + ') break; ';\n          }\n          out += ' } ';\n          if ($breakOnError) {\n            out += ' else ' + ($nextValid) + ' = true; ';\n          }\n          out += ' }  ';\n          if ($breakOnError) {\n            out += ' if (' + ($nextValid) + ') { ';\n            $closingBraces += '}';\n          }\n        }\n      }\n    }\n  }\n  if ($breakOnError) {\n    out += ' ' + ($closingBraces) + ' if (' + ($errs) + ' == errors) {';\n  }\n  return out;\n}\n","'use strict';\n\nvar metaSchema = require('./refs/json-schema-draft-07.json');\n\nmodule.exports = {\n  $id: 'https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js',\n  definitions: {\n    simpleTypes: metaSchema.definitions.simpleTypes\n  },\n  type: 'object',\n  dependencies: {\n    schema: ['validate'],\n    $data: ['validate'],\n    statements: ['inline'],\n    valid: {not: {required: ['macro']}}\n  },\n  properties: {\n    type: metaSchema.properties.type,\n    schema: {type: 'boolean'},\n    statements: {type: 'boolean'},\n    dependencies: {\n      type: 'array',\n      items: {type: 'string'}\n    },\n    metaSchema: {type: 'object'},\n    modifying: {type: 'boolean'},\n    valid: {type: 'boolean'},\n    $data: {type: 'boolean'},\n    async: {type: 'boolean'},\n    errors: {\n      anyOf: [\n        {type: 'boolean'},\n        {const: 'full'}\n      ]\n    }\n  }\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export const testIds = {\n  appConfig: {\n    container: 'ac-container',\n    provider: 'ac-provider',\n    openAIKey: 'ac-openai-api-key',\n    customizeOpenAIApiPath: 'ac-customize-openai-api-path',\n    openAIApiPath: 'ac-openai-api-path',\n    openAIOrganizationID: 'ac-openai-api-organization-id',\n    openAIUrl: 'ac-openai-api-url',\n    anthropicKey: 'ac-anthropic-api-key',\n    anthropicUrl: 'ac-anthropic-api-url',\n    vectorEnabled: 'ac-vector-enabled',\n    qdrantAddress: 'ac-qdrant-address',\n    qdrantSecure: 'ac-qdrant-secure',\n    qdrantApiKey: 'ac-qdrant-api-key',\n    grafanaVectorApiUrl: 'ac-grafana-vector-api-url',\n    model: 'ac-vector-model',\n    submit: 'ac-submit-form',\n    basicAuthUsername: 'ac-basic-auth-username',\n    basicAuthPassword: 'ac-basic-auth-password',\n  },\n  mainPage: {\n    container: 'main-page-container',\n  },\n  models: {\n    container: 'models-container',\n  },\n  mcpTools: {\n    container: 'mcp-tools-container',\n    disabled: 'mcp-tools-disabled',\n    loading: 'mcp-tools-loading',\n    error: 'mcp-tools-error',\n    empty: 'mcp-tools-empty',\n    list: 'mcp-tools-list',\n    toolItem: 'mcp-tools-tool-item',\n    toolName: 'mcp-tools-tool-name',\n    toolDescription: 'mcp-tools-tool-description',\n  },\n};\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","import { useEffect } from 'react';\nimport useAsyncFn from './useAsyncFn';\nexport default function useAsync(fn, deps) {\n    if (deps === void 0) { deps = []; }\n    var _a = useAsyncFn(fn, deps, {\n        loading: true,\n    }), state = _a[0], callback = _a[1];\n    useEffect(function () {\n        callback();\n    }, [callback]);\n    return state;\n}\n","import { __assign } from \"tslib\";\nimport { useCallback, useRef, useState } from 'react';\nimport useMountedState from './useMountedState';\nexport default function useAsyncFn(fn, deps, initialState) {\n    if (deps === void 0) { deps = []; }\n    if (initialState === void 0) { initialState = { loading: false }; }\n    var lastCallId = useRef(0);\n    var isMounted = useMountedState();\n    var _a = useState(initialState), state = _a[0], set = _a[1];\n    var callback = useCallback(function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var callId = ++lastCallId.current;\n        if (!state.loading) {\n            set(function (prevState) { return (__assign(__assign({}, prevState), { loading: true })); });\n        }\n        return fn.apply(void 0, args).then(function (value) {\n            isMounted() && callId === lastCallId.current && set({ value: value, loading: false });\n            return value;\n        }, function (error) {\n            isMounted() && callId === lastCallId.current && set({ error: error, loading: false });\n            return error;\n        });\n    }, deps);\n    return [state, callback];\n}\n","import { useCallback, useEffect, useRef } from 'react';\nexport default function useMountedState() {\n    var mountedRef = useRef(false);\n    var get = useCallback(function () { return mountedRef.current; }, []);\n    useEffect(function () {\n        mountedRef.current = true;\n        return function () {\n            mountedRef.current = false;\n        };\n    }, []);\n    return get;\n}\n","export var util;\n(function (util) {\n    util.assertEqual = (_) => { };\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && Number.isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array.map((val) => (typeof val === \"string\" ? `'${val}'` : val)).join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nexport var objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nexport const ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return Number.isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n","import React from 'react';\nimport { testIds } from '../components/testIds';\nimport { useAsync } from 'react-use';\nimport { getBackendSrv } from '@grafana/runtime';\n\nexport function Models() {\n  const { error, loading, value } = useAsync(() => {\n    const backendSrv = getBackendSrv();\n\n    return backendSrv.get(`api/plugins/grafana-llm-app/resources/openai/v1/models`);\n  });\n\n  if (loading) {\n    return (\n      <div data-testid={testIds.models.container}>\n        <span>Loading...</span>\n      </div>\n    );\n  }\n\n  if (error || !value) {\n    return (\n      <div data-testid={testIds.models.container}>\n        <span>Error loading models: {error?.message}</span>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid={testIds.models.container}>\n      <h1>Available Models</h1>\n      <pre>{JSON.stringify(value, null, 2)}</pre>\n    </div>\n  );\n}\n","import { util } from \"./helpers/util.js\";\nexport const ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nexport const quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nexport class ZodError extends Error {\n    get errors() {\n        return this.issues;\n    }\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    static assert(value) {\n        if (!(value instanceof ZodError)) {\n            throw new Error(`Not a ZodError: ${value}`);\n        }\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                const firstEl = sub.path[0];\n                fieldErrors[firstEl] = fieldErrors[firstEl] || [];\n                fieldErrors[firstEl].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n","import { ZodIssueCode } from \"../ZodError.js\";\nimport { util, ZodParsedType } from \"../helpers/util.js\";\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"bigint\")\n                message = `Number must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly equal to ` : issue.inclusive ? `greater than or equal to ` : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact ? `exactly` : issue.inclusive ? `less than or equal to` : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact ? `exactly` : issue.inclusive ? `smaller than or equal to` : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\nexport default errorMap;\n","import defaultErrorMap from \"./locales/en.js\";\nlet overrideErrorMap = defaultErrorMap;\nexport { defaultErrorMap };\nexport function setErrorMap(map) {\n    overrideErrorMap = map;\n}\nexport function getErrorMap() {\n    return overrideErrorMap;\n}\n","export var errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    // biome-ignore lint:\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message?.message;\n})(errorUtil || (errorUtil = {}));\n","import { getErrorMap } from \"../errors.js\";\nimport defaultErrorMap from \"../locales/en.js\";\nexport const makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    if (issueData.message !== undefined) {\n        return {\n            ...issueData,\n            path: fullPath,\n            message: issueData.message,\n        };\n    }\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: errorMessage,\n    };\n};\nexport const EMPTY_PATH = [];\nexport function addIssueToContext(ctx, issueData) {\n    const overrideMap = getErrorMap();\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap, // contextual error map is first priority\n            ctx.schemaErrorMap, // then schema-bound map if available\n            overrideMap, // then global override map\n            overrideMap === defaultErrorMap ? undefined : defaultErrorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nexport class ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            const key = await pair.key;\n            const value = await pair.value;\n            syncPairs.push({\n                key,\n                value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (key.value !== \"__proto__\" && (typeof value.value !== \"undefined\" || pair.alwaysSet)) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nexport const INVALID = Object.freeze({\n    status: \"aborted\",\n});\nexport const DIRTY = (value) => ({ status: \"dirty\", value });\nexport const OK = (value) => ({ status: \"valid\", value });\nexport const isAborted = (x) => x.status === \"aborted\";\nexport const isDirty = (x) => x.status === \"dirty\";\nexport const isValid = (x) => x.status === \"valid\";\nexport const isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n","import { ZodError, ZodIssueCode, } from \"./ZodError.js\";\nimport { defaultErrorMap, getErrorMap } from \"./errors.js\";\nimport { errorUtil } from \"./helpers/errorUtil.js\";\nimport { DIRTY, INVALID, OK, ParseStatus, addIssueToContext, isAborted, isAsync, isDirty, isValid, makeIssue, } from \"./helpers/parseUtil.js\";\nimport { util, ZodParsedType, getParsedType } from \"./helpers/util.js\";\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (Array.isArray(this._key)) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        const { message } = params;\n        if (iss.code === \"invalid_enum_value\") {\n            return { message: message ?? ctx.defaultError };\n        }\n        if (typeof ctx.data === \"undefined\") {\n            return { message: message ?? required_error ?? ctx.defaultError };\n        }\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        return { message: message ?? invalid_type_error ?? ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nexport class ZodType {\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: params?.async ?? false,\n                contextualErrorMap: params?.errorMap,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    \"~validate\"(data) {\n        const ctx = {\n            common: {\n                issues: [],\n                async: !!this[\"~standard\"].async,\n            },\n            path: [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        if (!this[\"~standard\"].async) {\n            try {\n                const result = this._parseSync({ data, path: [], parent: ctx });\n                return isValid(result)\n                    ? {\n                        value: result.value,\n                    }\n                    : {\n                        issues: ctx.common.issues,\n                    };\n            }\n            catch (err) {\n                if (err?.message?.toLowerCase()?.includes(\"encountered\")) {\n                    this[\"~standard\"].async = true;\n                }\n                ctx.common = {\n                    issues: [],\n                    async: true,\n                };\n            }\n        }\n        return this._parseAsync({ data, path: [], parent: ctx }).then((result) => isValid(result)\n            ? {\n                value: result.value,\n            }\n            : {\n                issues: ctx.common.issues,\n            });\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params?.errorMap,\n                async: true,\n            },\n            path: params?.path || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult) ? maybeAsyncResult : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\" ? refinementData(val, ctx) : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.readonly = this.readonly.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n        this[\"~standard\"] = {\n            version: 1,\n            vendor: \"zod\",\n            validate: (data) => this[\"~validate\"](data),\n        };\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    readonly() {\n        return ZodReadonly.create(this);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[0-9a-z]+$/;\nconst ulidRegex = /^[0-9A-HJKMNP-TV-Z]{26}$/i;\n// const uuidRegex =\n//   /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\nconst uuidRegex = /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/i;\nconst nanoidRegex = /^[a-z0-9_-]{21}$/i;\nconst jwtRegex = /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/;\nconst durationRegex = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\n// const emailRegex =\n//   /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// const emailRegex =\n//   /^[a-zA-Z0-9\\.\\!\\#\\$\\%\\&\\'\\*\\+\\/\\=\\?\\^\\_\\`\\{\\|\\}\\~\\-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// const emailRegex =\n//   /^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$/i;\nconst emailRegex = /^(?!\\.)(?!.*\\.\\.)([A-Z0-9_'+\\-\\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\\-]*\\.)+[A-Z]{2,}$/i;\n// const emailRegex =\n//   /^[a-z0-9.!#$%&*+/=?^_`{|}~-]+@[a-z0-9-]+(?:\\.[a-z0-9\\-]+)*$/i;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst _emojiRegex = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nlet emojiRegex;\n// faster, simpler, safer\nconst ipv4Regex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nconst ipv4CidrRegex = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/;\n// const ipv6Regex =\n// /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\nconst ipv6Regex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/;\nconst ipv6CidrRegex = /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nconst base64Regex = /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/;\n// https://base64.guru/standards/base64url\nconst base64urlRegex = /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/;\n// simple\n// const dateRegexSource = `\\\\d{4}-\\\\d{2}-\\\\d{2}`;\n// no leap year validation\n// const dateRegexSource = `\\\\d{4}-((0[13578]|10|12)-31|(0[13-9]|1[0-2])-30|(0[1-9]|1[0-2])-(0[1-9]|1\\\\d|2\\\\d))`;\n// with leap year validation\nconst dateRegexSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateRegex = new RegExp(`^${dateRegexSource}$`);\nfunction timeRegexSource(args) {\n    let secondsRegexSource = `[0-5]\\\\d`;\n    if (args.precision) {\n        secondsRegexSource = `${secondsRegexSource}\\\\.\\\\d{${args.precision}}`;\n    }\n    else if (args.precision == null) {\n        secondsRegexSource = `${secondsRegexSource}(\\\\.\\\\d+)?`;\n    }\n    const secondsQuantifier = args.precision ? \"+\" : \"?\"; // require seconds if precision is nonzero\n    return `([01]\\\\d|2[0-3]):[0-5]\\\\d(:${secondsRegexSource})${secondsQuantifier}`;\n}\nfunction timeRegex(args) {\n    return new RegExp(`^${timeRegexSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetimeRegex(args) {\n    let regex = `${dateRegexSource}T${timeRegexSource(args)}`;\n    const opts = [];\n    opts.push(args.local ? `Z?` : `Z`);\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:?\\\\d{2})`);\n    regex = `${regex}(${opts.join(\"|\")})`;\n    return new RegExp(`^${regex}$`);\n}\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nfunction isValidJWT(jwt, alg) {\n    if (!jwtRegex.test(jwt))\n        return false;\n    try {\n        const [header] = jwt.split(\".\");\n        if (!header)\n            return false;\n        // Convert base64url to base64\n        const base64 = header\n            .replace(/-/g, \"+\")\n            .replace(/_/g, \"/\")\n            .padEnd(header.length + ((4 - (header.length % 4)) % 4), \"=\");\n        const decoded = JSON.parse(atob(base64));\n        if (typeof decoded !== \"object\" || decoded === null)\n            return false;\n        if (\"typ\" in decoded && decoded?.typ !== \"JWT\")\n            return false;\n        if (!decoded.alg)\n            return false;\n        if (alg && decoded.alg !== alg)\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nfunction isValidCidr(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4CidrRegex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6CidrRegex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nexport class ZodString extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex) {\n                    emojiRegex = new RegExp(_emojiRegex, \"u\");\n                }\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"nanoid\") {\n                if (!nanoidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"nanoid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"date\") {\n                const regex = dateRegex;\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"date\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"time\") {\n                const regex = timeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"time\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"duration\") {\n                if (!durationRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"duration\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"jwt\") {\n                if (!isValidJWT(input.data, check.alg)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"jwt\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cidr\") {\n                if (!isValidCidr(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cidr\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64\") {\n                if (!base64Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"base64url\") {\n                if (!base64urlRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"base64url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _regex(regex, validation, message) {\n        return this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    nanoid(message) {\n        return this._addCheck({ kind: \"nanoid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    base64(message) {\n        return this._addCheck({ kind: \"base64\", ...errorUtil.errToObj(message) });\n    }\n    base64url(message) {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return this._addCheck({\n            kind: \"base64url\",\n            ...errorUtil.errToObj(message),\n        });\n    }\n    jwt(options) {\n        return this._addCheck({ kind: \"jwt\", ...errorUtil.errToObj(options) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    cidr(options) {\n        return this._addCheck({ kind: \"cidr\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                local: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            offset: options?.offset ?? false,\n            local: options?.local ?? false,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    date(message) {\n        return this._addCheck({ kind: \"date\", message });\n    }\n    time(options) {\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"time\",\n                precision: null,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"time\",\n            precision: typeof options?.precision === \"undefined\" ? null : options?.precision,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    duration(message) {\n        return this._addCheck({ kind: \"duration\", ...errorUtil.errToObj(message) });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options?.position,\n            ...errorUtil.errToObj(options?.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    /**\n     * Equivalent to `.min(1)`\n     */\n    nonempty(message) {\n        return this.min(1, errorUtil.errToObj(message));\n    }\n    trim() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n    }\n    toLowerCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n    }\n    toUpperCase() {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isDate() {\n        return !!this._def.checks.find((ch) => ch.kind === \"date\");\n    }\n    get isTime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"time\");\n    }\n    get isDuration() {\n        return !!this._def.checks.find((ch) => ch.kind === \"duration\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isNANOID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"nanoid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get isCIDR() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cidr\");\n    }\n    get isBase64() {\n        return !!this._def.checks.find((ch) => ch.kind === \"base64\");\n    }\n    get isBase64url() {\n        // base64url encoding is a modification of base64 that can safely be used in URLs and filenames\n        return !!this._def.checks.find((ch) => ch.kind === \"base64url\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport class ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" || (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null;\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" || ch.kind === \"int\" || ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            try {\n                input.data = BigInt(input.data);\n            }\n            catch {\n                return this._getInvalidInput(input);\n            }\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            return this._getInvalidInput(input);\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive ? input.data < check.value : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive ? input.data > check.value : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _getInvalidInput(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.bigint,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: params?.coerce ?? false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: params?.coerce || false,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (Number.isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: params?.coerce || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nexport class ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        this._cached = { shape, keys };\n        return this._cached;\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever && this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") {\n            }\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    syncPairs.push({\n                        key,\n                        value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        const defaultError = this._def.errorMap?.(issue, ctx).message ?? ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: errorUtil.errToObj(message).message ?? defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(mask)) {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        for (const key of util.objectKeys(this.shape)) {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        }\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return util.objectValues(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else if (type instanceof ZodOptional) {\n        return [undefined, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodNullable) {\n        return [null, ...getDiscriminator(type.unwrap())];\n    }\n    else if (type instanceof ZodBranded) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodReadonly) {\n        return getDiscriminator(type.unwrap());\n    }\n    else if (type instanceof ZodCatch) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else {\n        return [];\n    }\n};\nexport class ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues.length) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util.objectKeys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date && bType === ZodParsedType.date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nexport class ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\n// type ZodTupleItems = [ZodTypeAny, ...ZodTypeAny[]];\nexport class ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nexport class ZodMap extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [ctx.common.contextualErrorMap, ctx.schemaErrorMap, getErrorMap(), defaultErrorMap].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(async function (...args) {\n                const error = new ZodError([]);\n                const parsedArgs = await me._def.args.parseAsync(args, params).catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await Reflect.apply(fn, this, parsedArgs);\n                const parsedReturns = await me._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            // Would love a way to avoid disabling this rule, but we need\n            // an alias (using an arrow function was what caused 2651).\n            // eslint-disable-next-line @typescript-eslint/no-this-alias\n            const me = this;\n            return OK(function (...args) {\n                const parsedArgs = me._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = Reflect.apply(fn, this, parsedArgs.data);\n                const parsedReturns = me._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args ? args : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nexport class ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nexport class ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(this._def.values);\n        }\n        if (!this._cache.has(input.data)) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values, newDef = this._def) {\n        return ZodEnum.create(values, {\n            ...this._def,\n            ...newDef,\n        });\n    }\n    exclude(values, newDef = this._def) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)), {\n            ...this._def,\n            ...newDef,\n        });\n    }\n}\nZodEnum.create = createZodEnum;\nexport class ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string && ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (!this._cache) {\n            this._cache = new Set(util.getValidEnumValues(this._def.values));\n        }\n        if (!this._cache.has(input.data)) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise && ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise ? ctx.data : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data, checkCtx);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then(async (processed) => {\n                    if (status.value === \"aborted\")\n                        return INVALID;\n                    const result = await this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                    if (result.status === \"aborted\")\n                        return INVALID;\n                    if (result.status === \"dirty\")\n                        return DIRTY(result.value);\n                    if (status.value === \"dirty\")\n                        return DIRTY(result.value);\n                    return result;\n                });\n            }\n            else {\n                if (status.value === \"aborted\")\n                    return INVALID;\n                const result = this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (result.status === \"aborted\")\n                    return INVALID;\n                if (result.status === \"dirty\")\n                    return DIRTY(result.value);\n                if (status.value === \"dirty\")\n                    return DIRTY(result.value);\n                return result;\n            }\n        }\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return INVALID;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx }).then((base) => {\n                    if (!isValid(base))\n                        return INVALID;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({\n                        status: status.value,\n                        value: result,\n                    }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nexport { ZodEffects as ZodTransformer };\nexport class ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\" ? params.default : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nexport class ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nexport const BRAND = Symbol(\"zod_brand\");\nexport class ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nexport class ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nexport class ZodReadonly extends ZodType {\n    _parse(input) {\n        const result = this._def.innerType._parse(input);\n        const freeze = (data) => {\n            if (isValid(data)) {\n                data.value = Object.freeze(data.value);\n            }\n            return data;\n        };\n        return isAsync(result) ? result.then((data) => freeze(data)) : freeze(result);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodReadonly.create = (type, params) => {\n    return new ZodReadonly({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodReadonly,\n        ...processCreateParams(params),\n    });\n};\n////////////////////////////////////////\n////////////////////////////////////////\n//////////                    //////////\n//////////      z.custom      //////////\n//////////                    //////////\n////////////////////////////////////////\n////////////////////////////////////////\nfunction cleanParams(params, data) {\n    const p = typeof params === \"function\" ? params(data) : typeof params === \"string\" ? { message: params } : params;\n    const p2 = typeof p === \"string\" ? { message: p } : p;\n    return p2;\n}\nexport function custom(check, _params = {}, \n/**\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            const r = check(data);\n            if (r instanceof Promise) {\n                return r.then((r) => {\n                    if (!r) {\n                        const params = cleanParams(_params, data);\n                        const _fatal = params.fatal ?? fatal ?? true;\n                        ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n                    }\n                });\n            }\n            if (!r) {\n                const params = cleanParams(_params, data);\n                const _fatal = params.fatal ?? fatal ?? true;\n                ctx.addIssue({ code: \"custom\", ...params, fatal: _fatal });\n            }\n            return;\n        });\n    return ZodAny.create();\n}\nexport { ZodType as Schema, ZodType as ZodSchema };\nexport const late = {\n    object: ZodObject.lazycreate,\n};\nexport var ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n    ZodFirstPartyTypeKind[\"ZodReadonly\"] = \"ZodReadonly\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\n// requires TS 4.4+\nclass Class {\n    constructor(..._) { }\n}\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nexport const coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nexport { anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, dateType as date, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, instanceOfType as instanceof, intersectionType as intersection, lazyType as lazy, literalType as literal, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, recordType as record, setType as set, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, voidType as void, };\nexport const NEVER = INVALID;\n","import { z } from 'zod';\nexport const LATEST_PROTOCOL_VERSION = '2025-06-18';\nexport const DEFAULT_NEGOTIATED_PROTOCOL_VERSION = '2025-03-26';\nexport const SUPPORTED_PROTOCOL_VERSIONS = [LATEST_PROTOCOL_VERSION, '2025-03-26', '2024-11-05', '2024-10-07'];\n/* JSON-RPC types */\nexport const JSONRPC_VERSION = '2.0';\n/**\n * A progress token, used to associate progress notifications with the original request.\n */\nexport const ProgressTokenSchema = z.union([z.string(), z.number().int()]);\n/**\n * An opaque token used to represent a cursor for pagination.\n */\nexport const CursorSchema = z.string();\nconst RequestMetaSchema = z\n    .object({\n    /**\n     * If specified, the caller is requesting out-of-band progress notifications for this request (as represented by notifications/progress). The value of this parameter is an opaque token that will be attached to any subsequent notifications. The receiver is not obligated to provide these notifications.\n     */\n    progressToken: z.optional(ProgressTokenSchema)\n})\n    .passthrough();\nconst BaseRequestParamsSchema = z\n    .object({\n    _meta: z.optional(RequestMetaSchema)\n})\n    .passthrough();\nexport const RequestSchema = z.object({\n    method: z.string(),\n    params: z.optional(BaseRequestParamsSchema)\n});\nconst BaseNotificationParamsSchema = z\n    .object({\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\nexport const NotificationSchema = z.object({\n    method: z.string(),\n    params: z.optional(BaseNotificationParamsSchema)\n});\nexport const ResultSchema = z\n    .object({\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\n/**\n * A uniquely identifying ID for a request in JSON-RPC.\n */\nexport const RequestIdSchema = z.union([z.string(), z.number().int()]);\n/**\n * A request that expects a response.\n */\nexport const JSONRPCRequestSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema\n})\n    .merge(RequestSchema)\n    .strict();\nexport const isJSONRPCRequest = (value) => JSONRPCRequestSchema.safeParse(value).success;\n/**\n * A notification which does not expect a response.\n */\nexport const JSONRPCNotificationSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION)\n})\n    .merge(NotificationSchema)\n    .strict();\nexport const isJSONRPCNotification = (value) => JSONRPCNotificationSchema.safeParse(value).success;\n/**\n * A successful (non-error) response to a request.\n */\nexport const JSONRPCResponseSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n    result: ResultSchema\n})\n    .strict();\nexport const isJSONRPCResponse = (value) => JSONRPCResponseSchema.safeParse(value).success;\n/**\n * Error codes defined by the JSON-RPC specification.\n */\nexport var ErrorCode;\n(function (ErrorCode) {\n    // SDK error codes\n    ErrorCode[ErrorCode[\"ConnectionClosed\"] = -32000] = \"ConnectionClosed\";\n    ErrorCode[ErrorCode[\"RequestTimeout\"] = -32001] = \"RequestTimeout\";\n    // Standard JSON-RPC error codes\n    ErrorCode[ErrorCode[\"ParseError\"] = -32700] = \"ParseError\";\n    ErrorCode[ErrorCode[\"InvalidRequest\"] = -32600] = \"InvalidRequest\";\n    ErrorCode[ErrorCode[\"MethodNotFound\"] = -32601] = \"MethodNotFound\";\n    ErrorCode[ErrorCode[\"InvalidParams\"] = -32602] = \"InvalidParams\";\n    ErrorCode[ErrorCode[\"InternalError\"] = -32603] = \"InternalError\";\n})(ErrorCode || (ErrorCode = {}));\n/**\n * A response to a request that indicates an error occurred.\n */\nexport const JSONRPCErrorSchema = z\n    .object({\n    jsonrpc: z.literal(JSONRPC_VERSION),\n    id: RequestIdSchema,\n    error: z.object({\n        /**\n         * The error type that occurred.\n         */\n        code: z.number().int(),\n        /**\n         * A short description of the error. The message SHOULD be limited to a concise single sentence.\n         */\n        message: z.string(),\n        /**\n         * Additional information about the error. The value of this member is defined by the sender (e.g. detailed error information, nested errors etc.).\n         */\n        data: z.optional(z.unknown())\n    })\n})\n    .strict();\nexport const isJSONRPCError = (value) => JSONRPCErrorSchema.safeParse(value).success;\nexport const JSONRPCMessageSchema = z.union([JSONRPCRequestSchema, JSONRPCNotificationSchema, JSONRPCResponseSchema, JSONRPCErrorSchema]);\n/* Empty result */\n/**\n * A response that indicates success but carries no data.\n */\nexport const EmptyResultSchema = ResultSchema.strict();\n/* Cancellation */\n/**\n * This notification can be sent by either side to indicate that it is cancelling a previously-issued request.\n *\n * The request SHOULD still be in-flight, but due to communication latency, it is always possible that this notification MAY arrive after the request has already finished.\n *\n * This notification indicates that the result will be unused, so any associated processing SHOULD cease.\n *\n * A client MUST NOT attempt to cancel its `initialize` request.\n */\nexport const CancelledNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/cancelled'),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The ID of the request to cancel.\n         *\n         * This MUST correspond to the ID of a request previously issued in the same direction.\n         */\n        requestId: RequestIdSchema,\n        /**\n         * An optional string describing the reason for the cancellation. This MAY be logged or presented to the user.\n         */\n        reason: z.string().optional()\n    })\n});\n/* Base Metadata */\n/**\n * Icon schema for use in tools, prompts, resources, and implementations.\n */\nexport const IconSchema = z\n    .object({\n    /**\n     * URL or data URI for the icon.\n     */\n    src: z.string(),\n    /**\n     * Optional MIME type for the icon.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * Optional array of strings that specify sizes at which the icon can be used.\n     * Each string should be in WxH format (e.g., `\"48x48\"`, `\"96x96\"`) or `\"any\"` for scalable formats like SVG.\n     *\n     * If not provided, the client should assume that the icon can be used at any size.\n     */\n    sizes: z.optional(z.array(z.string()))\n})\n    .passthrough();\n/**\n * Base schema to add `icons` property.\n *\n */\nexport const IconsSchema = z\n    .object({\n    /**\n     * Optional set of sized icons that the client can display in a user interface.\n     *\n     * Clients that support rendering icons MUST support at least the following MIME types:\n     * - `image/png` - PNG images (safe, universal compatibility)\n     * - `image/jpeg` (and `image/jpg`) - JPEG images (safe, universal compatibility)\n     *\n     * Clients that support rendering icons SHOULD also support:\n     * - `image/svg+xml` - SVG images (scalable but requires security precautions)\n     * - `image/webp` - WebP images (modern, efficient format)\n     */\n    icons: z.array(IconSchema).optional()\n})\n    .passthrough();\n/**\n * Base metadata interface for common properties across resources, tools, prompts, and implementations.\n */\nexport const BaseMetadataSchema = z\n    .object({\n    /** Intended for programmatic or logical use, but used as a display name in past specs or fallback */\n    name: z.string(),\n    /**\n     * Intended for UI and end-user contexts  optimized to be human-readable and easily understood,\n     * even by those unfamiliar with domain-specific terminology.\n     *\n     * If not provided, the name should be used for display (except for Tool,\n     * where `annotations.title` should be given precedence over using `name`,\n     * if present).\n     */\n    title: z.optional(z.string())\n})\n    .passthrough();\n/* Initialization */\n/**\n * Describes the name and version of an MCP implementation.\n */\nexport const ImplementationSchema = BaseMetadataSchema.extend({\n    version: z.string(),\n    /**\n     * An optional URL of the website for this implementation.\n     */\n    websiteUrl: z.optional(z.string())\n}).merge(IconsSchema);\n/**\n * Capabilities a client may support. Known capabilities are defined here, in this schema, but this is not a closed set: any client can define its own, additional capabilities.\n */\nexport const ClientCapabilitiesSchema = z\n    .object({\n    /**\n     * Experimental, non-standard capabilities that the client supports.\n     */\n    experimental: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports sampling from an LLM.\n     */\n    sampling: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports eliciting user input.\n     */\n    elicitation: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the client supports listing roots.\n     */\n    roots: z.optional(z\n        .object({\n        /**\n         * Whether the client supports issuing notifications for changes to the roots list.\n         */\n        listChanged: z.optional(z.boolean())\n    })\n        .passthrough())\n})\n    .passthrough();\n/**\n * This request is sent from the client to the server when it first connects, asking it to begin initialization.\n */\nexport const InitializeRequestSchema = RequestSchema.extend({\n    method: z.literal('initialize'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The latest version of the Model Context Protocol that the client supports. The client MAY decide to support older versions as well.\n         */\n        protocolVersion: z.string(),\n        capabilities: ClientCapabilitiesSchema,\n        clientInfo: ImplementationSchema\n    })\n});\nexport const isInitializeRequest = (value) => InitializeRequestSchema.safeParse(value).success;\n/**\n * Capabilities that a server may support. Known capabilities are defined here, in this schema, but this is not a closed set: any server can define its own, additional capabilities.\n */\nexport const ServerCapabilitiesSchema = z\n    .object({\n    /**\n     * Experimental, non-standard capabilities that the server supports.\n     */\n    experimental: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server supports sending log messages to the client.\n     */\n    logging: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server supports sending completions to the client.\n     */\n    completions: z.optional(z.object({}).passthrough()),\n    /**\n     * Present if the server offers any prompt templates.\n     */\n    prompts: z.optional(z\n        .object({\n        /**\n         * Whether this server supports issuing notifications for changes to the prompt list.\n         */\n        listChanged: z.optional(z.boolean())\n    })\n        .passthrough()),\n    /**\n     * Present if the server offers any resources to read.\n     */\n    resources: z.optional(z\n        .object({\n        /**\n         * Whether this server supports clients subscribing to resource updates.\n         */\n        subscribe: z.optional(z.boolean()),\n        /**\n         * Whether this server supports issuing notifications for changes to the resource list.\n         */\n        listChanged: z.optional(z.boolean())\n    })\n        .passthrough()),\n    /**\n     * Present if the server offers any tools to call.\n     */\n    tools: z.optional(z\n        .object({\n        /**\n         * Whether this server supports issuing notifications for changes to the tool list.\n         */\n        listChanged: z.optional(z.boolean())\n    })\n        .passthrough())\n})\n    .passthrough();\n/**\n * After receiving an initialize request from the client, the server sends this response.\n */\nexport const InitializeResultSchema = ResultSchema.extend({\n    /**\n     * The version of the Model Context Protocol that the server wants to use. This may not match the version that the client requested. If the client cannot support this version, it MUST disconnect.\n     */\n    protocolVersion: z.string(),\n    capabilities: ServerCapabilitiesSchema,\n    serverInfo: ImplementationSchema,\n    /**\n     * Instructions describing how to use the server and its features.\n     *\n     * This can be used by clients to improve the LLM's understanding of available tools, resources, etc. It can be thought of like a \"hint\" to the model. For example, this information MAY be added to the system prompt.\n     */\n    instructions: z.optional(z.string())\n});\n/**\n * This notification is sent from the client to the server after initialization has finished.\n */\nexport const InitializedNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/initialized')\n});\nexport const isInitializedNotification = (value) => InitializedNotificationSchema.safeParse(value).success;\n/* Ping */\n/**\n * A ping, issued by either the server or the client, to check that the other party is still alive. The receiver must promptly respond, or else may be disconnected.\n */\nexport const PingRequestSchema = RequestSchema.extend({\n    method: z.literal('ping')\n});\n/* Progress notifications */\nexport const ProgressSchema = z\n    .object({\n    /**\n     * The progress thus far. This should increase every time progress is made, even if the total is unknown.\n     */\n    progress: z.number(),\n    /**\n     * Total number of items to process (or total progress required), if known.\n     */\n    total: z.optional(z.number()),\n    /**\n     * An optional message describing the current progress.\n     */\n    message: z.optional(z.string())\n})\n    .passthrough();\n/**\n * An out-of-band notification used to inform the receiver of a progress update for a long-running request.\n */\nexport const ProgressNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/progress'),\n    params: BaseNotificationParamsSchema.merge(ProgressSchema).extend({\n        /**\n         * The progress token which was given in the initial request, used to associate this notification with the request that is proceeding.\n         */\n        progressToken: ProgressTokenSchema\n    })\n});\n/* Pagination */\nexport const PaginatedRequestSchema = RequestSchema.extend({\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * An opaque token representing the current pagination position.\n         * If provided, the server should return results starting after this cursor.\n         */\n        cursor: z.optional(CursorSchema)\n    }).optional()\n});\nexport const PaginatedResultSchema = ResultSchema.extend({\n    /**\n     * An opaque token representing the pagination position after the last returned result.\n     * If present, there may be more results available.\n     */\n    nextCursor: z.optional(CursorSchema)\n});\n/* Resources */\n/**\n * The contents of a specific resource or sub-resource.\n */\nexport const ResourceContentsSchema = z\n    .object({\n    /**\n     * The URI of this resource.\n     */\n    uri: z.string(),\n    /**\n     * The MIME type of this resource, if known.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\nexport const TextResourceContentsSchema = ResourceContentsSchema.extend({\n    /**\n     * The text of the item. This must only be set if the item can actually be represented as text (not binary data).\n     */\n    text: z.string()\n});\n/**\n * A Zod schema for validating Base64 strings that is more performant and\n * robust for very large inputs than the default regex-based check. It avoids\n * stack overflows by using the native `atob` function for validation.\n */\nconst Base64Schema = z.string().refine(val => {\n    try {\n        // atob throws a DOMException if the string contains characters\n        // that are not part of the Base64 character set.\n        atob(val);\n        return true;\n    }\n    catch (_a) {\n        return false;\n    }\n}, { message: 'Invalid Base64 string' });\nexport const BlobResourceContentsSchema = ResourceContentsSchema.extend({\n    /**\n     * A base64-encoded string representing the binary data of the item.\n     */\n    blob: Base64Schema\n});\n/**\n * A known resource that the server is capable of reading.\n */\nexport const ResourceSchema = BaseMetadataSchema.extend({\n    /**\n     * The URI of this resource.\n     */\n    uri: z.string(),\n    /**\n     * A description of what this resource represents.\n     *\n     * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n     */\n    description: z.optional(z.string()),\n    /**\n     * The MIME type of this resource, if known.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n}).merge(IconsSchema);\n/**\n * A template description for resources available on the server.\n */\nexport const ResourceTemplateSchema = BaseMetadataSchema.extend({\n    /**\n     * A URI template (according to RFC 6570) that can be used to construct resource URIs.\n     */\n    uriTemplate: z.string(),\n    /**\n     * A description of what this template is for.\n     *\n     * This can be used by clients to improve the LLM's understanding of available resources. It can be thought of like a \"hint\" to the model.\n     */\n    description: z.optional(z.string()),\n    /**\n     * The MIME type for all resources that match this template. This should only be included if all resources matching this template have the same type.\n     */\n    mimeType: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n}).merge(IconsSchema);\n/**\n * Sent from the client to request a list of resources the server has.\n */\nexport const ListResourcesRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal('resources/list')\n});\n/**\n * The server's response to a resources/list request from the client.\n */\nexport const ListResourcesResultSchema = PaginatedResultSchema.extend({\n    resources: z.array(ResourceSchema)\n});\n/**\n * Sent from the client to request a list of resource templates the server has.\n */\nexport const ListResourceTemplatesRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal('resources/templates/list')\n});\n/**\n * The server's response to a resources/templates/list request from the client.\n */\nexport const ListResourceTemplatesResultSchema = PaginatedResultSchema.extend({\n    resourceTemplates: z.array(ResourceTemplateSchema)\n});\n/**\n * Sent from the client to the server, to read a specific resource URI.\n */\nexport const ReadResourceRequestSchema = RequestSchema.extend({\n    method: z.literal('resources/read'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to read. The URI can use any protocol; it is up to the server how to interpret it.\n         */\n        uri: z.string()\n    })\n});\n/**\n * The server's response to a resources/read request from the client.\n */\nexport const ReadResourceResultSchema = ResultSchema.extend({\n    contents: z.array(z.union([TextResourceContentsSchema, BlobResourceContentsSchema]))\n});\n/**\n * An optional notification from the server to the client, informing it that the list of resources it can read from has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const ResourceListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/resources/list_changed')\n});\n/**\n * Sent from the client to request resources/updated notifications from the server whenever a particular resource changes.\n */\nexport const SubscribeRequestSchema = RequestSchema.extend({\n    method: z.literal('resources/subscribe'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to subscribe to. The URI can use any protocol; it is up to the server how to interpret it.\n         */\n        uri: z.string()\n    })\n});\n/**\n * Sent from the client to request cancellation of resources/updated notifications from the server. This should follow a previous resources/subscribe request.\n */\nexport const UnsubscribeRequestSchema = RequestSchema.extend({\n    method: z.literal('resources/unsubscribe'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The URI of the resource to unsubscribe from.\n         */\n        uri: z.string()\n    })\n});\n/**\n * A notification from the server to the client, informing it that a resource has changed and may need to be read again. This should only be sent if the client previously sent a resources/subscribe request.\n */\nexport const ResourceUpdatedNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/resources/updated'),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The URI of the resource that has been updated. This might be a sub-resource of the one that the client actually subscribed to.\n         */\n        uri: z.string()\n    })\n});\n/* Prompts */\n/**\n * Describes an argument that a prompt can accept.\n */\nexport const PromptArgumentSchema = z\n    .object({\n    /**\n     * The name of the argument.\n     */\n    name: z.string(),\n    /**\n     * A human-readable description of the argument.\n     */\n    description: z.optional(z.string()),\n    /**\n     * Whether this argument must be provided.\n     */\n    required: z.optional(z.boolean())\n})\n    .passthrough();\n/**\n * A prompt or prompt template that the server offers.\n */\nexport const PromptSchema = BaseMetadataSchema.extend({\n    /**\n     * An optional description of what this prompt provides\n     */\n    description: z.optional(z.string()),\n    /**\n     * A list of arguments to use for templating the prompt.\n     */\n    arguments: z.optional(z.array(PromptArgumentSchema)),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n}).merge(IconsSchema);\n/**\n * Sent from the client to request a list of prompts and prompt templates the server has.\n */\nexport const ListPromptsRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal('prompts/list')\n});\n/**\n * The server's response to a prompts/list request from the client.\n */\nexport const ListPromptsResultSchema = PaginatedResultSchema.extend({\n    prompts: z.array(PromptSchema)\n});\n/**\n * Used by the client to get a prompt provided by the server.\n */\nexport const GetPromptRequestSchema = RequestSchema.extend({\n    method: z.literal('prompts/get'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The name of the prompt or prompt template.\n         */\n        name: z.string(),\n        /**\n         * Arguments to use for templating the prompt.\n         */\n        arguments: z.optional(z.record(z.string()))\n    })\n});\n/**\n * Text provided to or from an LLM.\n */\nexport const TextContentSchema = z\n    .object({\n    type: z.literal('text'),\n    /**\n     * The text content of the message.\n     */\n    text: z.string(),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\n/**\n * An image provided to or from an LLM.\n */\nexport const ImageContentSchema = z\n    .object({\n    type: z.literal('image'),\n    /**\n     * The base64-encoded image data.\n     */\n    data: Base64Schema,\n    /**\n     * The MIME type of the image. Different providers may support different image types.\n     */\n    mimeType: z.string(),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\n/**\n * An Audio provided to or from an LLM.\n */\nexport const AudioContentSchema = z\n    .object({\n    type: z.literal('audio'),\n    /**\n     * The base64-encoded audio data.\n     */\n    data: Base64Schema,\n    /**\n     * The MIME type of the audio. Different providers may support different audio types.\n     */\n    mimeType: z.string(),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\n/**\n * The contents of a resource, embedded into a prompt or tool call result.\n */\nexport const EmbeddedResourceSchema = z\n    .object({\n    type: z.literal('resource'),\n    resource: z.union([TextResourceContentsSchema, BlobResourceContentsSchema]),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\n/**\n * A resource that the server is capable of reading, included in a prompt or tool call result.\n *\n * Note: resource links returned by tools are not guaranteed to appear in the results of `resources/list` requests.\n */\nexport const ResourceLinkSchema = ResourceSchema.extend({\n    type: z.literal('resource_link')\n});\n/**\n * A content block that can be used in prompts and tool results.\n */\nexport const ContentBlockSchema = z.union([\n    TextContentSchema,\n    ImageContentSchema,\n    AudioContentSchema,\n    ResourceLinkSchema,\n    EmbeddedResourceSchema\n]);\n/**\n * Describes a message returned as part of a prompt.\n */\nexport const PromptMessageSchema = z\n    .object({\n    role: z.enum(['user', 'assistant']),\n    content: ContentBlockSchema\n})\n    .passthrough();\n/**\n * The server's response to a prompts/get request from the client.\n */\nexport const GetPromptResultSchema = ResultSchema.extend({\n    /**\n     * An optional description for the prompt.\n     */\n    description: z.optional(z.string()),\n    messages: z.array(PromptMessageSchema)\n});\n/**\n * An optional notification from the server to the client, informing it that the list of prompts it offers has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const PromptListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/prompts/list_changed')\n});\n/* Tools */\n/**\n * Additional properties describing a Tool to clients.\n *\n * NOTE: all properties in ToolAnnotations are **hints**.\n * They are not guaranteed to provide a faithful description of\n * tool behavior (including descriptive properties like `title`).\n *\n * Clients should never make tool use decisions based on ToolAnnotations\n * received from untrusted servers.\n */\nexport const ToolAnnotationsSchema = z\n    .object({\n    /**\n     * A human-readable title for the tool.\n     */\n    title: z.optional(z.string()),\n    /**\n     * If true, the tool does not modify its environment.\n     *\n     * Default: false\n     */\n    readOnlyHint: z.optional(z.boolean()),\n    /**\n     * If true, the tool may perform destructive updates to its environment.\n     * If false, the tool performs only additive updates.\n     *\n     * (This property is meaningful only when `readOnlyHint == false`)\n     *\n     * Default: true\n     */\n    destructiveHint: z.optional(z.boolean()),\n    /**\n     * If true, calling the tool repeatedly with the same arguments\n     * will have no additional effect on the its environment.\n     *\n     * (This property is meaningful only when `readOnlyHint == false`)\n     *\n     * Default: false\n     */\n    idempotentHint: z.optional(z.boolean()),\n    /**\n     * If true, this tool may interact with an \"open world\" of external\n     * entities. If false, the tool's domain of interaction is closed.\n     * For example, the world of a web search tool is open, whereas that\n     * of a memory tool is not.\n     *\n     * Default: true\n     */\n    openWorldHint: z.optional(z.boolean())\n})\n    .passthrough();\n/**\n * Definition for a tool the client can call.\n */\nexport const ToolSchema = BaseMetadataSchema.extend({\n    /**\n     * A human-readable description of the tool.\n     */\n    description: z.optional(z.string()),\n    /**\n     * A JSON Schema object defining the expected parameters for the tool.\n     */\n    inputSchema: z\n        .object({\n        type: z.literal('object'),\n        properties: z.optional(z.object({}).passthrough()),\n        required: z.optional(z.array(z.string()))\n    })\n        .passthrough(),\n    /**\n     * An optional JSON Schema object defining the structure of the tool's output returned in\n     * the structuredContent field of a CallToolResult.\n     */\n    outputSchema: z.optional(z\n        .object({\n        type: z.literal('object'),\n        properties: z.optional(z.object({}).passthrough()),\n        required: z.optional(z.array(z.string()))\n    })\n        .passthrough()),\n    /**\n     * Optional additional tool information.\n     */\n    annotations: z.optional(ToolAnnotationsSchema),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n}).merge(IconsSchema);\n/**\n * Sent from the client to request a list of tools the server has.\n */\nexport const ListToolsRequestSchema = PaginatedRequestSchema.extend({\n    method: z.literal('tools/list')\n});\n/**\n * The server's response to a tools/list request from the client.\n */\nexport const ListToolsResultSchema = PaginatedResultSchema.extend({\n    tools: z.array(ToolSchema)\n});\n/**\n * The server's response to a tool call.\n */\nexport const CallToolResultSchema = ResultSchema.extend({\n    /**\n     * A list of content objects that represent the result of the tool call.\n     *\n     * If the Tool does not define an outputSchema, this field MUST be present in the result.\n     * For backwards compatibility, this field is always present, but it may be empty.\n     */\n    content: z.array(ContentBlockSchema).default([]),\n    /**\n     * An object containing structured tool output.\n     *\n     * If the Tool defines an outputSchema, this field MUST be present in the result, and contain a JSON object that matches the schema.\n     */\n    structuredContent: z.object({}).passthrough().optional(),\n    /**\n     * Whether the tool call ended in an error.\n     *\n     * If not set, this is assumed to be false (the call was successful).\n     *\n     * Any errors that originate from the tool SHOULD be reported inside the result\n     * object, with `isError` set to true, _not_ as an MCP protocol-level error\n     * response. Otherwise, the LLM would not be able to see that an error occurred\n     * and self-correct.\n     *\n     * However, any errors in _finding_ the tool, an error indicating that the\n     * server does not support tool calls, or any other exceptional conditions,\n     * should be reported as an MCP error response.\n     */\n    isError: z.optional(z.boolean())\n});\n/**\n * CallToolResultSchema extended with backwards compatibility to protocol version 2024-10-07.\n */\nexport const CompatibilityCallToolResultSchema = CallToolResultSchema.or(ResultSchema.extend({\n    toolResult: z.unknown()\n}));\n/**\n * Used by the client to invoke a tool provided by the server.\n */\nexport const CallToolRequestSchema = RequestSchema.extend({\n    method: z.literal('tools/call'),\n    params: BaseRequestParamsSchema.extend({\n        name: z.string(),\n        arguments: z.optional(z.record(z.unknown()))\n    })\n});\n/**\n * An optional notification from the server to the client, informing it that the list of tools it offers has changed. This may be issued by servers without any previous subscription from the client.\n */\nexport const ToolListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/tools/list_changed')\n});\n/* Logging */\n/**\n * The severity of a log message.\n */\nexport const LoggingLevelSchema = z.enum(['debug', 'info', 'notice', 'warning', 'error', 'critical', 'alert', 'emergency']);\n/**\n * A request from the client to the server, to enable or adjust logging.\n */\nexport const SetLevelRequestSchema = RequestSchema.extend({\n    method: z.literal('logging/setLevel'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The level of logging that the client wants to receive from the server. The server should send all logs at this level and higher (i.e., more severe) to the client as notifications/logging/message.\n         */\n        level: LoggingLevelSchema\n    })\n});\n/**\n * Notification of a log message passed from server to client. If no logging/setLevel request has been sent from the client, the server MAY decide which messages to send automatically.\n */\nexport const LoggingMessageNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/message'),\n    params: BaseNotificationParamsSchema.extend({\n        /**\n         * The severity of this log message.\n         */\n        level: LoggingLevelSchema,\n        /**\n         * An optional name of the logger issuing this message.\n         */\n        logger: z.optional(z.string()),\n        /**\n         * The data to be logged, such as a string message or an object. Any JSON serializable type is allowed here.\n         */\n        data: z.unknown()\n    })\n});\n/* Sampling */\n/**\n * Hints to use for model selection.\n */\nexport const ModelHintSchema = z\n    .object({\n    /**\n     * A hint for a model name.\n     */\n    name: z.string().optional()\n})\n    .passthrough();\n/**\n * The server's preferences for model selection, requested of the client during sampling.\n */\nexport const ModelPreferencesSchema = z\n    .object({\n    /**\n     * Optional hints to use for model selection.\n     */\n    hints: z.optional(z.array(ModelHintSchema)),\n    /**\n     * How much to prioritize cost when selecting a model.\n     */\n    costPriority: z.optional(z.number().min(0).max(1)),\n    /**\n     * How much to prioritize sampling speed (latency) when selecting a model.\n     */\n    speedPriority: z.optional(z.number().min(0).max(1)),\n    /**\n     * How much to prioritize intelligence and capabilities when selecting a model.\n     */\n    intelligencePriority: z.optional(z.number().min(0).max(1))\n})\n    .passthrough();\n/**\n * Describes a message issued to or received from an LLM API.\n */\nexport const SamplingMessageSchema = z\n    .object({\n    role: z.enum(['user', 'assistant']),\n    content: z.union([TextContentSchema, ImageContentSchema, AudioContentSchema])\n})\n    .passthrough();\n/**\n * A request from the server to sample an LLM via the client. The client has full discretion over which model to select. The client should also inform the user before beginning sampling, to allow them to inspect the request (human in the loop) and decide whether to approve it.\n */\nexport const CreateMessageRequestSchema = RequestSchema.extend({\n    method: z.literal('sampling/createMessage'),\n    params: BaseRequestParamsSchema.extend({\n        messages: z.array(SamplingMessageSchema),\n        /**\n         * An optional system prompt the server wants to use for sampling. The client MAY modify or omit this prompt.\n         */\n        systemPrompt: z.optional(z.string()),\n        /**\n         * A request to include context from one or more MCP servers (including the caller), to be attached to the prompt. The client MAY ignore this request.\n         */\n        includeContext: z.optional(z.enum(['none', 'thisServer', 'allServers'])),\n        temperature: z.optional(z.number()),\n        /**\n         * The maximum number of tokens to sample, as requested by the server. The client MAY choose to sample fewer tokens than requested.\n         */\n        maxTokens: z.number().int(),\n        stopSequences: z.optional(z.array(z.string())),\n        /**\n         * Optional metadata to pass through to the LLM provider. The format of this metadata is provider-specific.\n         */\n        metadata: z.optional(z.object({}).passthrough()),\n        /**\n         * The server's preferences for which model to select.\n         */\n        modelPreferences: z.optional(ModelPreferencesSchema)\n    })\n});\n/**\n * The client's response to a sampling/create_message request from the server. The client should inform the user before returning the sampled message, to allow them to inspect the response (human in the loop) and decide whether to allow the server to see it.\n */\nexport const CreateMessageResultSchema = ResultSchema.extend({\n    /**\n     * The name of the model that generated the message.\n     */\n    model: z.string(),\n    /**\n     * The reason why sampling stopped.\n     */\n    stopReason: z.optional(z.enum(['endTurn', 'stopSequence', 'maxTokens']).or(z.string())),\n    role: z.enum(['user', 'assistant']),\n    content: z.discriminatedUnion('type', [TextContentSchema, ImageContentSchema, AudioContentSchema])\n});\n/* Elicitation */\n/**\n * Primitive schema definition for boolean fields.\n */\nexport const BooleanSchemaSchema = z\n    .object({\n    type: z.literal('boolean'),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    default: z.optional(z.boolean())\n})\n    .passthrough();\n/**\n * Primitive schema definition for string fields.\n */\nexport const StringSchemaSchema = z\n    .object({\n    type: z.literal('string'),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    minLength: z.optional(z.number()),\n    maxLength: z.optional(z.number()),\n    format: z.optional(z.enum(['email', 'uri', 'date', 'date-time']))\n})\n    .passthrough();\n/**\n * Primitive schema definition for number fields.\n */\nexport const NumberSchemaSchema = z\n    .object({\n    type: z.enum(['number', 'integer']),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    minimum: z.optional(z.number()),\n    maximum: z.optional(z.number())\n})\n    .passthrough();\n/**\n * Primitive schema definition for enum fields.\n */\nexport const EnumSchemaSchema = z\n    .object({\n    type: z.literal('string'),\n    title: z.optional(z.string()),\n    description: z.optional(z.string()),\n    enum: z.array(z.string()),\n    enumNames: z.optional(z.array(z.string()))\n})\n    .passthrough();\n/**\n * Union of all primitive schema definitions.\n */\nexport const PrimitiveSchemaDefinitionSchema = z.union([BooleanSchemaSchema, StringSchemaSchema, NumberSchemaSchema, EnumSchemaSchema]);\n/**\n * A request from the server to elicit user input via the client.\n * The client should present the message and form fields to the user.\n */\nexport const ElicitRequestSchema = RequestSchema.extend({\n    method: z.literal('elicitation/create'),\n    params: BaseRequestParamsSchema.extend({\n        /**\n         * The message to present to the user.\n         */\n        message: z.string(),\n        /**\n         * The schema for the requested user input.\n         */\n        requestedSchema: z\n            .object({\n            type: z.literal('object'),\n            properties: z.record(z.string(), PrimitiveSchemaDefinitionSchema),\n            required: z.optional(z.array(z.string()))\n        })\n            .passthrough()\n    })\n});\n/**\n * The client's response to an elicitation/create request from the server.\n */\nexport const ElicitResultSchema = ResultSchema.extend({\n    /**\n     * The user's response action.\n     */\n    action: z.enum(['accept', 'decline', 'cancel']),\n    /**\n     * The collected user input content (only present if action is \"accept\").\n     */\n    content: z.optional(z.record(z.string(), z.unknown()))\n});\n/* Autocomplete */\n/**\n * A reference to a resource or resource template definition.\n */\nexport const ResourceTemplateReferenceSchema = z\n    .object({\n    type: z.literal('ref/resource'),\n    /**\n     * The URI or URI template of the resource.\n     */\n    uri: z.string()\n})\n    .passthrough();\n/**\n * @deprecated Use ResourceTemplateReferenceSchema instead\n */\nexport const ResourceReferenceSchema = ResourceTemplateReferenceSchema;\n/**\n * Identifies a prompt.\n */\nexport const PromptReferenceSchema = z\n    .object({\n    type: z.literal('ref/prompt'),\n    /**\n     * The name of the prompt or prompt template\n     */\n    name: z.string()\n})\n    .passthrough();\n/**\n * A request from the client to the server, to ask for completion options.\n */\nexport const CompleteRequestSchema = RequestSchema.extend({\n    method: z.literal('completion/complete'),\n    params: BaseRequestParamsSchema.extend({\n        ref: z.union([PromptReferenceSchema, ResourceTemplateReferenceSchema]),\n        /**\n         * The argument's information\n         */\n        argument: z\n            .object({\n            /**\n             * The name of the argument\n             */\n            name: z.string(),\n            /**\n             * The value of the argument to use for completion matching.\n             */\n            value: z.string()\n        })\n            .passthrough(),\n        context: z.optional(z.object({\n            /**\n             * Previously-resolved variables in a URI template or prompt.\n             */\n            arguments: z.optional(z.record(z.string(), z.string()))\n        }))\n    })\n});\n/**\n * The server's response to a completion/complete request\n */\nexport const CompleteResultSchema = ResultSchema.extend({\n    completion: z\n        .object({\n        /**\n         * An array of completion values. Must not exceed 100 items.\n         */\n        values: z.array(z.string()).max(100),\n        /**\n         * The total number of completion options available. This can exceed the number of values actually sent in the response.\n         */\n        total: z.optional(z.number().int()),\n        /**\n         * Indicates whether there are additional completion options beyond those provided in the current response, even if the exact total is unknown.\n         */\n        hasMore: z.optional(z.boolean())\n    })\n        .passthrough()\n});\n/* Roots */\n/**\n * Represents a root directory or file that the server can operate on.\n */\nexport const RootSchema = z\n    .object({\n    /**\n     * The URI identifying the root. This *must* start with file:// for now.\n     */\n    uri: z.string().startsWith('file://'),\n    /**\n     * An optional name for the root.\n     */\n    name: z.optional(z.string()),\n    /**\n     * See [MCP specification](https://github.com/modelcontextprotocol/modelcontextprotocol/blob/47339c03c143bb4ec01a26e721a1b8fe66634ebe/docs/specification/draft/basic/index.mdx#general-fields)\n     * for notes on _meta usage.\n     */\n    _meta: z.optional(z.object({}).passthrough())\n})\n    .passthrough();\n/**\n * Sent from the server to request a list of root URIs from the client.\n */\nexport const ListRootsRequestSchema = RequestSchema.extend({\n    method: z.literal('roots/list')\n});\n/**\n * The client's response to a roots/list request from the server.\n */\nexport const ListRootsResultSchema = ResultSchema.extend({\n    roots: z.array(RootSchema)\n});\n/**\n * A notification from the client to the server, informing it that the list of roots has changed.\n */\nexport const RootsListChangedNotificationSchema = NotificationSchema.extend({\n    method: z.literal('notifications/roots/list_changed')\n});\n/* Client messages */\nexport const ClientRequestSchema = z.union([\n    PingRequestSchema,\n    InitializeRequestSchema,\n    CompleteRequestSchema,\n    SetLevelRequestSchema,\n    GetPromptRequestSchema,\n    ListPromptsRequestSchema,\n    ListResourcesRequestSchema,\n    ListResourceTemplatesRequestSchema,\n    ReadResourceRequestSchema,\n    SubscribeRequestSchema,\n    UnsubscribeRequestSchema,\n    CallToolRequestSchema,\n    ListToolsRequestSchema\n]);\nexport const ClientNotificationSchema = z.union([\n    CancelledNotificationSchema,\n    ProgressNotificationSchema,\n    InitializedNotificationSchema,\n    RootsListChangedNotificationSchema\n]);\nexport const ClientResultSchema = z.union([EmptyResultSchema, CreateMessageResultSchema, ElicitResultSchema, ListRootsResultSchema]);\n/* Server messages */\nexport const ServerRequestSchema = z.union([PingRequestSchema, CreateMessageRequestSchema, ElicitRequestSchema, ListRootsRequestSchema]);\nexport const ServerNotificationSchema = z.union([\n    CancelledNotificationSchema,\n    ProgressNotificationSchema,\n    LoggingMessageNotificationSchema,\n    ResourceUpdatedNotificationSchema,\n    ResourceListChangedNotificationSchema,\n    ToolListChangedNotificationSchema,\n    PromptListChangedNotificationSchema\n]);\nexport const ServerResultSchema = z.union([\n    EmptyResultSchema,\n    InitializeResultSchema,\n    CompleteResultSchema,\n    GetPromptResultSchema,\n    ListPromptsResultSchema,\n    ListResourcesResultSchema,\n    ListResourceTemplatesResultSchema,\n    ReadResourceResultSchema,\n    CallToolResultSchema,\n    ListToolsResultSchema\n]);\nexport class McpError extends Error {\n    constructor(code, message, data) {\n        super(`MCP error ${code}: ${message}`);\n        this.code = code;\n        this.data = data;\n        this.name = 'McpError';\n    }\n}\n//# sourceMappingURL=types.js.map","import { CancelledNotificationSchema, ErrorCode, isJSONRPCError, isJSONRPCRequest, isJSONRPCResponse, isJSONRPCNotification, McpError, PingRequestSchema, ProgressNotificationSchema } from '../types.js';\n/**\n * The default request timeout, in miliseconds.\n */\nexport const DEFAULT_REQUEST_TIMEOUT_MSEC = 60000;\n/**\n * Implements MCP protocol framing on top of a pluggable transport, including\n * features like request/response linking, notifications, and progress.\n */\nexport class Protocol {\n    constructor(_options) {\n        this._options = _options;\n        this._requestMessageId = 0;\n        this._requestHandlers = new Map();\n        this._requestHandlerAbortControllers = new Map();\n        this._notificationHandlers = new Map();\n        this._responseHandlers = new Map();\n        this._progressHandlers = new Map();\n        this._timeoutInfo = new Map();\n        this._pendingDebouncedNotifications = new Set();\n        this.setNotificationHandler(CancelledNotificationSchema, notification => {\n            const controller = this._requestHandlerAbortControllers.get(notification.params.requestId);\n            controller === null || controller === void 0 ? void 0 : controller.abort(notification.params.reason);\n        });\n        this.setNotificationHandler(ProgressNotificationSchema, notification => {\n            this._onprogress(notification);\n        });\n        this.setRequestHandler(PingRequestSchema, \n        // Automatic pong by default.\n        _request => ({}));\n    }\n    _setupTimeout(messageId, timeout, maxTotalTimeout, onTimeout, resetTimeoutOnProgress = false) {\n        this._timeoutInfo.set(messageId, {\n            timeoutId: setTimeout(onTimeout, timeout),\n            startTime: Date.now(),\n            timeout,\n            maxTotalTimeout,\n            resetTimeoutOnProgress,\n            onTimeout\n        });\n    }\n    _resetTimeout(messageId) {\n        const info = this._timeoutInfo.get(messageId);\n        if (!info)\n            return false;\n        const totalElapsed = Date.now() - info.startTime;\n        if (info.maxTotalTimeout && totalElapsed >= info.maxTotalTimeout) {\n            this._timeoutInfo.delete(messageId);\n            throw new McpError(ErrorCode.RequestTimeout, 'Maximum total timeout exceeded', {\n                maxTotalTimeout: info.maxTotalTimeout,\n                totalElapsed\n            });\n        }\n        clearTimeout(info.timeoutId);\n        info.timeoutId = setTimeout(info.onTimeout, info.timeout);\n        return true;\n    }\n    _cleanupTimeout(messageId) {\n        const info = this._timeoutInfo.get(messageId);\n        if (info) {\n            clearTimeout(info.timeoutId);\n            this._timeoutInfo.delete(messageId);\n        }\n    }\n    /**\n     * Attaches to the given transport, starts it, and starts listening for messages.\n     *\n     * The Protocol object assumes ownership of the Transport, replacing any callbacks that have already been set, and expects that it is the only user of the Transport instance going forward.\n     */\n    async connect(transport) {\n        var _a, _b, _c;\n        this._transport = transport;\n        const _onclose = (_a = this.transport) === null || _a === void 0 ? void 0 : _a.onclose;\n        this._transport.onclose = () => {\n            _onclose === null || _onclose === void 0 ? void 0 : _onclose();\n            this._onclose();\n        };\n        const _onerror = (_b = this.transport) === null || _b === void 0 ? void 0 : _b.onerror;\n        this._transport.onerror = (error) => {\n            _onerror === null || _onerror === void 0 ? void 0 : _onerror(error);\n            this._onerror(error);\n        };\n        const _onmessage = (_c = this._transport) === null || _c === void 0 ? void 0 : _c.onmessage;\n        this._transport.onmessage = (message, extra) => {\n            _onmessage === null || _onmessage === void 0 ? void 0 : _onmessage(message, extra);\n            if (isJSONRPCResponse(message) || isJSONRPCError(message)) {\n                this._onresponse(message);\n            }\n            else if (isJSONRPCRequest(message)) {\n                this._onrequest(message, extra);\n            }\n            else if (isJSONRPCNotification(message)) {\n                this._onnotification(message);\n            }\n            else {\n                this._onerror(new Error(`Unknown message type: ${JSON.stringify(message)}`));\n            }\n        };\n        await this._transport.start();\n    }\n    _onclose() {\n        var _a;\n        const responseHandlers = this._responseHandlers;\n        this._responseHandlers = new Map();\n        this._progressHandlers.clear();\n        this._pendingDebouncedNotifications.clear();\n        this._transport = undefined;\n        (_a = this.onclose) === null || _a === void 0 ? void 0 : _a.call(this);\n        const error = new McpError(ErrorCode.ConnectionClosed, 'Connection closed');\n        for (const handler of responseHandlers.values()) {\n            handler(error);\n        }\n    }\n    _onerror(error) {\n        var _a;\n        (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n    }\n    _onnotification(notification) {\n        var _a;\n        const handler = (_a = this._notificationHandlers.get(notification.method)) !== null && _a !== void 0 ? _a : this.fallbackNotificationHandler;\n        // Ignore notifications not being subscribed to.\n        if (handler === undefined) {\n            return;\n        }\n        // Starting with Promise.resolve() puts any synchronous errors into the monad as well.\n        Promise.resolve()\n            .then(() => handler(notification))\n            .catch(error => this._onerror(new Error(`Uncaught error in notification handler: ${error}`)));\n    }\n    _onrequest(request, extra) {\n        var _a, _b;\n        const handler = (_a = this._requestHandlers.get(request.method)) !== null && _a !== void 0 ? _a : this.fallbackRequestHandler;\n        // Capture the current transport at request time to ensure responses go to the correct client\n        const capturedTransport = this._transport;\n        if (handler === undefined) {\n            capturedTransport === null || capturedTransport === void 0 ? void 0 : capturedTransport.send({\n                jsonrpc: '2.0',\n                id: request.id,\n                error: {\n                    code: ErrorCode.MethodNotFound,\n                    message: 'Method not found'\n                }\n            }).catch(error => this._onerror(new Error(`Failed to send an error response: ${error}`)));\n            return;\n        }\n        const abortController = new AbortController();\n        this._requestHandlerAbortControllers.set(request.id, abortController);\n        const fullExtra = {\n            signal: abortController.signal,\n            sessionId: capturedTransport === null || capturedTransport === void 0 ? void 0 : capturedTransport.sessionId,\n            _meta: (_b = request.params) === null || _b === void 0 ? void 0 : _b._meta,\n            sendNotification: notification => this.notification(notification, { relatedRequestId: request.id }),\n            sendRequest: (r, resultSchema, options) => this.request(r, resultSchema, { ...options, relatedRequestId: request.id }),\n            authInfo: extra === null || extra === void 0 ? void 0 : extra.authInfo,\n            requestId: request.id,\n            requestInfo: extra === null || extra === void 0 ? void 0 : extra.requestInfo\n        };\n        // Starting with Promise.resolve() puts any synchronous errors into the monad as well.\n        Promise.resolve()\n            .then(() => handler(request, fullExtra))\n            .then(result => {\n            if (abortController.signal.aborted) {\n                return;\n            }\n            return capturedTransport === null || capturedTransport === void 0 ? void 0 : capturedTransport.send({\n                result,\n                jsonrpc: '2.0',\n                id: request.id\n            });\n        }, error => {\n            var _a;\n            if (abortController.signal.aborted) {\n                return;\n            }\n            return capturedTransport === null || capturedTransport === void 0 ? void 0 : capturedTransport.send({\n                jsonrpc: '2.0',\n                id: request.id,\n                error: {\n                    code: Number.isSafeInteger(error['code']) ? error['code'] : ErrorCode.InternalError,\n                    message: (_a = error.message) !== null && _a !== void 0 ? _a : 'Internal error'\n                }\n            });\n        })\n            .catch(error => this._onerror(new Error(`Failed to send response: ${error}`)))\n            .finally(() => {\n            this._requestHandlerAbortControllers.delete(request.id);\n        });\n    }\n    _onprogress(notification) {\n        const { progressToken, ...params } = notification.params;\n        const messageId = Number(progressToken);\n        const handler = this._progressHandlers.get(messageId);\n        if (!handler) {\n            this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(notification)}`));\n            return;\n        }\n        const responseHandler = this._responseHandlers.get(messageId);\n        const timeoutInfo = this._timeoutInfo.get(messageId);\n        if (timeoutInfo && responseHandler && timeoutInfo.resetTimeoutOnProgress) {\n            try {\n                this._resetTimeout(messageId);\n            }\n            catch (error) {\n                responseHandler(error);\n                return;\n            }\n        }\n        handler(params);\n    }\n    _onresponse(response) {\n        const messageId = Number(response.id);\n        const handler = this._responseHandlers.get(messageId);\n        if (handler === undefined) {\n            this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(response)}`));\n            return;\n        }\n        this._responseHandlers.delete(messageId);\n        this._progressHandlers.delete(messageId);\n        this._cleanupTimeout(messageId);\n        if (isJSONRPCResponse(response)) {\n            handler(response);\n        }\n        else {\n            const error = new McpError(response.error.code, response.error.message, response.error.data);\n            handler(error);\n        }\n    }\n    get transport() {\n        return this._transport;\n    }\n    /**\n     * Closes the connection.\n     */\n    async close() {\n        var _a;\n        await ((_a = this._transport) === null || _a === void 0 ? void 0 : _a.close());\n    }\n    /**\n     * Sends a request and wait for a response.\n     *\n     * Do not use this method to emit notifications! Use notification() instead.\n     */\n    request(request, resultSchema, options) {\n        const { relatedRequestId, resumptionToken, onresumptiontoken } = options !== null && options !== void 0 ? options : {};\n        return new Promise((resolve, reject) => {\n            var _a, _b, _c, _d, _e, _f;\n            if (!this._transport) {\n                reject(new Error('Not connected'));\n                return;\n            }\n            if (((_a = this._options) === null || _a === void 0 ? void 0 : _a.enforceStrictCapabilities) === true) {\n                this.assertCapabilityForMethod(request.method);\n            }\n            (_b = options === null || options === void 0 ? void 0 : options.signal) === null || _b === void 0 ? void 0 : _b.throwIfAborted();\n            const messageId = this._requestMessageId++;\n            const jsonrpcRequest = {\n                ...request,\n                jsonrpc: '2.0',\n                id: messageId\n            };\n            if (options === null || options === void 0 ? void 0 : options.onprogress) {\n                this._progressHandlers.set(messageId, options.onprogress);\n                jsonrpcRequest.params = {\n                    ...request.params,\n                    _meta: {\n                        ...(((_c = request.params) === null || _c === void 0 ? void 0 : _c._meta) || {}),\n                        progressToken: messageId\n                    }\n                };\n            }\n            const cancel = (reason) => {\n                var _a;\n                this._responseHandlers.delete(messageId);\n                this._progressHandlers.delete(messageId);\n                this._cleanupTimeout(messageId);\n                (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send({\n                    jsonrpc: '2.0',\n                    method: 'notifications/cancelled',\n                    params: {\n                        requestId: messageId,\n                        reason: String(reason)\n                    }\n                }, { relatedRequestId, resumptionToken, onresumptiontoken }).catch(error => this._onerror(new Error(`Failed to send cancellation: ${error}`)));\n                reject(reason);\n            };\n            this._responseHandlers.set(messageId, response => {\n                var _a;\n                if ((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.aborted) {\n                    return;\n                }\n                if (response instanceof Error) {\n                    return reject(response);\n                }\n                try {\n                    const result = resultSchema.parse(response.result);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n            (_d = options === null || options === void 0 ? void 0 : options.signal) === null || _d === void 0 ? void 0 : _d.addEventListener('abort', () => {\n                var _a;\n                cancel((_a = options === null || options === void 0 ? void 0 : options.signal) === null || _a === void 0 ? void 0 : _a.reason);\n            });\n            const timeout = (_e = options === null || options === void 0 ? void 0 : options.timeout) !== null && _e !== void 0 ? _e : DEFAULT_REQUEST_TIMEOUT_MSEC;\n            const timeoutHandler = () => cancel(new McpError(ErrorCode.RequestTimeout, 'Request timed out', { timeout }));\n            this._setupTimeout(messageId, timeout, options === null || options === void 0 ? void 0 : options.maxTotalTimeout, timeoutHandler, (_f = options === null || options === void 0 ? void 0 : options.resetTimeoutOnProgress) !== null && _f !== void 0 ? _f : false);\n            this._transport.send(jsonrpcRequest, { relatedRequestId, resumptionToken, onresumptiontoken }).catch(error => {\n                this._cleanupTimeout(messageId);\n                reject(error);\n            });\n        });\n    }\n    /**\n     * Emits a notification, which is a one-way message that does not expect a response.\n     */\n    async notification(notification, options) {\n        var _a, _b;\n        if (!this._transport) {\n            throw new Error('Not connected');\n        }\n        this.assertNotificationCapability(notification.method);\n        const debouncedMethods = (_b = (_a = this._options) === null || _a === void 0 ? void 0 : _a.debouncedNotificationMethods) !== null && _b !== void 0 ? _b : [];\n        // A notification can only be debounced if it's in the list AND it's \"simple\"\n        // (i.e., has no parameters and no related request ID that could be lost).\n        const canDebounce = debouncedMethods.includes(notification.method) && !notification.params && !(options === null || options === void 0 ? void 0 : options.relatedRequestId);\n        if (canDebounce) {\n            // If a notification of this type is already scheduled, do nothing.\n            if (this._pendingDebouncedNotifications.has(notification.method)) {\n                return;\n            }\n            // Mark this notification type as pending.\n            this._pendingDebouncedNotifications.add(notification.method);\n            // Schedule the actual send to happen in the next microtask.\n            // This allows all synchronous calls in the current event loop tick to be coalesced.\n            Promise.resolve().then(() => {\n                var _a;\n                // Un-mark the notification so the next one can be scheduled.\n                this._pendingDebouncedNotifications.delete(notification.method);\n                // SAFETY CHECK: If the connection was closed while this was pending, abort.\n                if (!this._transport) {\n                    return;\n                }\n                const jsonrpcNotification = {\n                    ...notification,\n                    jsonrpc: '2.0'\n                };\n                // Send the notification, but don't await it here to avoid blocking.\n                // Handle potential errors with a .catch().\n                (_a = this._transport) === null || _a === void 0 ? void 0 : _a.send(jsonrpcNotification, options).catch(error => this._onerror(error));\n            });\n            // Return immediately.\n            return;\n        }\n        const jsonrpcNotification = {\n            ...notification,\n            jsonrpc: '2.0'\n        };\n        await this._transport.send(jsonrpcNotification, options);\n    }\n    /**\n     * Registers a handler to invoke when this protocol object receives a request with the given method.\n     *\n     * Note that this will replace any previous request handler for the same method.\n     */\n    setRequestHandler(requestSchema, handler) {\n        const method = requestSchema.shape.method.value;\n        this.assertRequestHandlerCapability(method);\n        this._requestHandlers.set(method, (request, extra) => {\n            return Promise.resolve(handler(requestSchema.parse(request), extra));\n        });\n    }\n    /**\n     * Removes the request handler for the given method.\n     */\n    removeRequestHandler(method) {\n        this._requestHandlers.delete(method);\n    }\n    /**\n     * Asserts that a request handler has not already been set for the given method, in preparation for a new one being automatically installed.\n     */\n    assertCanSetRequestHandler(method) {\n        if (this._requestHandlers.has(method)) {\n            throw new Error(`A request handler for ${method} already exists, which would be overridden`);\n        }\n    }\n    /**\n     * Registers a handler to invoke when this protocol object receives a notification with the given method.\n     *\n     * Note that this will replace any previous notification handler for the same method.\n     */\n    setNotificationHandler(notificationSchema, handler) {\n        this._notificationHandlers.set(notificationSchema.shape.method.value, notification => Promise.resolve(handler(notificationSchema.parse(notification))));\n    }\n    /**\n     * Removes the notification handler for the given method.\n     */\n    removeNotificationHandler(method) {\n        this._notificationHandlers.delete(method);\n    }\n}\nexport function mergeCapabilities(base, additional) {\n    return Object.entries(additional).reduce((acc, [key, value]) => {\n        if (value && typeof value === 'object') {\n            acc[key] = acc[key] ? { ...acc[key], ...value } : value;\n        }\n        else {\n            acc[key] = value;\n        }\n        return acc;\n    }, { ...base });\n}\n//# sourceMappingURL=protocol.js.map","import { mergeCapabilities, Protocol } from '../shared/protocol.js';\nimport { CallToolResultSchema, CompleteResultSchema, EmptyResultSchema, GetPromptResultSchema, InitializeResultSchema, LATEST_PROTOCOL_VERSION, ListPromptsResultSchema, ListResourcesResultSchema, ListResourceTemplatesResultSchema, ListToolsResultSchema, ReadResourceResultSchema, SUPPORTED_PROTOCOL_VERSIONS, ErrorCode, McpError } from '../types.js';\nimport Ajv from 'ajv';\n/**\n * An MCP client on top of a pluggable transport.\n *\n * The client will automatically begin the initialization flow with the server when connect() is called.\n *\n * To use with custom types, extend the base Request/Notification/Result types and pass them as type parameters:\n *\n * ```typescript\n * // Custom schemas\n * const CustomRequestSchema = RequestSchema.extend({...})\n * const CustomNotificationSchema = NotificationSchema.extend({...})\n * const CustomResultSchema = ResultSchema.extend({...})\n *\n * // Type aliases\n * type CustomRequest = z.infer<typeof CustomRequestSchema>\n * type CustomNotification = z.infer<typeof CustomNotificationSchema>\n * type CustomResult = z.infer<typeof CustomResultSchema>\n *\n * // Create typed client\n * const client = new Client<CustomRequest, CustomNotification, CustomResult>({\n *   name: \"CustomClient\",\n *   version: \"1.0.0\"\n * })\n * ```\n */\nexport class Client extends Protocol {\n    /**\n     * Initializes this client with the given name and version information.\n     */\n    constructor(_clientInfo, options) {\n        var _a;\n        super(options);\n        this._clientInfo = _clientInfo;\n        this._cachedToolOutputValidators = new Map();\n        this._capabilities = (_a = options === null || options === void 0 ? void 0 : options.capabilities) !== null && _a !== void 0 ? _a : {};\n        this._ajv = new Ajv();\n    }\n    /**\n     * Registers new capabilities. This can only be called before connecting to a transport.\n     *\n     * The new capabilities will be merged with any existing capabilities previously given (e.g., at initialization).\n     */\n    registerCapabilities(capabilities) {\n        if (this.transport) {\n            throw new Error('Cannot register capabilities after connecting to transport');\n        }\n        this._capabilities = mergeCapabilities(this._capabilities, capabilities);\n    }\n    assertCapability(capability, method) {\n        var _a;\n        if (!((_a = this._serverCapabilities) === null || _a === void 0 ? void 0 : _a[capability])) {\n            throw new Error(`Server does not support ${capability} (required for ${method})`);\n        }\n    }\n    async connect(transport, options) {\n        await super.connect(transport);\n        // When transport sessionId is already set this means we are trying to reconnect.\n        // In this case we don't need to initialize again.\n        if (transport.sessionId !== undefined) {\n            return;\n        }\n        try {\n            const result = await this.request({\n                method: 'initialize',\n                params: {\n                    protocolVersion: LATEST_PROTOCOL_VERSION,\n                    capabilities: this._capabilities,\n                    clientInfo: this._clientInfo\n                }\n            }, InitializeResultSchema, options);\n            if (result === undefined) {\n                throw new Error(`Server sent invalid initialize result: ${result}`);\n            }\n            if (!SUPPORTED_PROTOCOL_VERSIONS.includes(result.protocolVersion)) {\n                throw new Error(`Server's protocol version is not supported: ${result.protocolVersion}`);\n            }\n            this._serverCapabilities = result.capabilities;\n            this._serverVersion = result.serverInfo;\n            // HTTP transports must set the protocol version in each header after initialization.\n            if (transport.setProtocolVersion) {\n                transport.setProtocolVersion(result.protocolVersion);\n            }\n            this._instructions = result.instructions;\n            await this.notification({\n                method: 'notifications/initialized'\n            });\n        }\n        catch (error) {\n            // Disconnect if initialization fails.\n            void this.close();\n            throw error;\n        }\n    }\n    /**\n     * After initialization has completed, this will be populated with the server's reported capabilities.\n     */\n    getServerCapabilities() {\n        return this._serverCapabilities;\n    }\n    /**\n     * After initialization has completed, this will be populated with information about the server's name and version.\n     */\n    getServerVersion() {\n        return this._serverVersion;\n    }\n    /**\n     * After initialization has completed, this may be populated with information about the server's instructions.\n     */\n    getInstructions() {\n        return this._instructions;\n    }\n    assertCapabilityForMethod(method) {\n        var _a, _b, _c, _d, _e;\n        switch (method) {\n            case 'logging/setLevel':\n                if (!((_a = this._serverCapabilities) === null || _a === void 0 ? void 0 : _a.logging)) {\n                    throw new Error(`Server does not support logging (required for ${method})`);\n                }\n                break;\n            case 'prompts/get':\n            case 'prompts/list':\n                if (!((_b = this._serverCapabilities) === null || _b === void 0 ? void 0 : _b.prompts)) {\n                    throw new Error(`Server does not support prompts (required for ${method})`);\n                }\n                break;\n            case 'resources/list':\n            case 'resources/templates/list':\n            case 'resources/read':\n            case 'resources/subscribe':\n            case 'resources/unsubscribe':\n                if (!((_c = this._serverCapabilities) === null || _c === void 0 ? void 0 : _c.resources)) {\n                    throw new Error(`Server does not support resources (required for ${method})`);\n                }\n                if (method === 'resources/subscribe' && !this._serverCapabilities.resources.subscribe) {\n                    throw new Error(`Server does not support resource subscriptions (required for ${method})`);\n                }\n                break;\n            case 'tools/call':\n            case 'tools/list':\n                if (!((_d = this._serverCapabilities) === null || _d === void 0 ? void 0 : _d.tools)) {\n                    throw new Error(`Server does not support tools (required for ${method})`);\n                }\n                break;\n            case 'completion/complete':\n                if (!((_e = this._serverCapabilities) === null || _e === void 0 ? void 0 : _e.completions)) {\n                    throw new Error(`Server does not support completions (required for ${method})`);\n                }\n                break;\n            case 'initialize':\n                // No specific capability required for initialize\n                break;\n            case 'ping':\n                // No specific capability required for ping\n                break;\n        }\n    }\n    assertNotificationCapability(method) {\n        var _a;\n        switch (method) {\n            case 'notifications/roots/list_changed':\n                if (!((_a = this._capabilities.roots) === null || _a === void 0 ? void 0 : _a.listChanged)) {\n                    throw new Error(`Client does not support roots list changed notifications (required for ${method})`);\n                }\n                break;\n            case 'notifications/initialized':\n                // No specific capability required for initialized\n                break;\n            case 'notifications/cancelled':\n                // Cancellation notifications are always allowed\n                break;\n            case 'notifications/progress':\n                // Progress notifications are always allowed\n                break;\n        }\n    }\n    assertRequestHandlerCapability(method) {\n        switch (method) {\n            case 'sampling/createMessage':\n                if (!this._capabilities.sampling) {\n                    throw new Error(`Client does not support sampling capability (required for ${method})`);\n                }\n                break;\n            case 'elicitation/create':\n                if (!this._capabilities.elicitation) {\n                    throw new Error(`Client does not support elicitation capability (required for ${method})`);\n                }\n                break;\n            case 'roots/list':\n                if (!this._capabilities.roots) {\n                    throw new Error(`Client does not support roots capability (required for ${method})`);\n                }\n                break;\n            case 'ping':\n                // No specific capability required for ping\n                break;\n        }\n    }\n    async ping(options) {\n        return this.request({ method: 'ping' }, EmptyResultSchema, options);\n    }\n    async complete(params, options) {\n        return this.request({ method: 'completion/complete', params }, CompleteResultSchema, options);\n    }\n    async setLoggingLevel(level, options) {\n        return this.request({ method: 'logging/setLevel', params: { level } }, EmptyResultSchema, options);\n    }\n    async getPrompt(params, options) {\n        return this.request({ method: 'prompts/get', params }, GetPromptResultSchema, options);\n    }\n    async listPrompts(params, options) {\n        return this.request({ method: 'prompts/list', params }, ListPromptsResultSchema, options);\n    }\n    async listResources(params, options) {\n        return this.request({ method: 'resources/list', params }, ListResourcesResultSchema, options);\n    }\n    async listResourceTemplates(params, options) {\n        return this.request({ method: 'resources/templates/list', params }, ListResourceTemplatesResultSchema, options);\n    }\n    async readResource(params, options) {\n        return this.request({ method: 'resources/read', params }, ReadResourceResultSchema, options);\n    }\n    async subscribeResource(params, options) {\n        return this.request({ method: 'resources/subscribe', params }, EmptyResultSchema, options);\n    }\n    async unsubscribeResource(params, options) {\n        return this.request({ method: 'resources/unsubscribe', params }, EmptyResultSchema, options);\n    }\n    async callTool(params, resultSchema = CallToolResultSchema, options) {\n        const result = await this.request({ method: 'tools/call', params }, resultSchema, options);\n        // Check if the tool has an outputSchema\n        const validator = this.getToolOutputValidator(params.name);\n        if (validator) {\n            // If tool has outputSchema, it MUST return structuredContent (unless it's an error)\n            if (!result.structuredContent && !result.isError) {\n                throw new McpError(ErrorCode.InvalidRequest, `Tool ${params.name} has an output schema but did not return structured content`);\n            }\n            // Only validate structured content if present (not when there's an error)\n            if (result.structuredContent) {\n                try {\n                    // Validate the structured content (which is already an object) against the schema\n                    const isValid = validator(result.structuredContent);\n                    if (!isValid) {\n                        throw new McpError(ErrorCode.InvalidParams, `Structured content does not match the tool's output schema: ${this._ajv.errorsText(validator.errors)}`);\n                    }\n                }\n                catch (error) {\n                    if (error instanceof McpError) {\n                        throw error;\n                    }\n                    throw new McpError(ErrorCode.InvalidParams, `Failed to validate structured content: ${error instanceof Error ? error.message : String(error)}`);\n                }\n            }\n        }\n        return result;\n    }\n    cacheToolOutputSchemas(tools) {\n        this._cachedToolOutputValidators.clear();\n        for (const tool of tools) {\n            // If the tool has an outputSchema, create and cache the Ajv validator\n            if (tool.outputSchema) {\n                try {\n                    const validator = this._ajv.compile(tool.outputSchema);\n                    this._cachedToolOutputValidators.set(tool.name, validator);\n                }\n                catch (_a) {\n                    // Ignore schema compilation errors\n                }\n            }\n        }\n    }\n    getToolOutputValidator(toolName) {\n        return this._cachedToolOutputValidators.get(toolName);\n    }\n    async listTools(params, options) {\n        const result = await this.request({ method: 'tools/list', params }, ListToolsResultSchema, options);\n        // Cache the tools and their output schemas for future validation\n        this.cacheToolOutputSchemas(result.tools);\n        return result;\n    }\n    async sendRootsListChanged() {\n        return this.notification({ method: 'notifications/roots/list_changed' });\n    }\n}\n//# sourceMappingURL=index.js.map","let crypto;\ncrypto = globalThis.crypto; // web browsers\n/**\n * Creates an array of length `size` of random bytes\n * @param size\n * @returns Array of random ints (0 to 255)\n */\nasync function getRandomValues(size) {\n    return (await crypto).getRandomValues(new Uint8Array(size));\n}\n/** Generate cryptographically strong random string\n * @param size The desired length of the string\n * @returns The random string\n */\nasync function random(size) {\n    const mask = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~\";\n    let result = \"\";\n    const randomUints = await getRandomValues(size);\n    for (let i = 0; i < size; i++) {\n        // cap the value of the randomIndex to mask.length - 1\n        const randomIndex = randomUints[i] % mask.length;\n        result += mask[randomIndex];\n    }\n    return result;\n}\n/** Generate a PKCE challenge verifier\n * @param length Length of the verifier\n * @returns A random verifier `length` characters long\n */\nasync function generateVerifier(length) {\n    return await random(length);\n}\n/** Generate a PKCE code challenge from a code verifier\n * @param code_verifier\n * @returns The base64 url encoded code challenge\n */\nexport async function generateChallenge(code_verifier) {\n    const buffer = await (await crypto).subtle.digest(\"SHA-256\", new TextEncoder().encode(code_verifier));\n    // Generate base64url string\n    // btoa is deprecated in Node.js but is used here for web browser compatibility\n    // (which has no good replacement yet, see also https://github.com/whatwg/html/issues/6811)\n    return btoa(String.fromCharCode(...new Uint8Array(buffer)))\n        .replace(/\\//g, '_')\n        .replace(/\\+/g, '-')\n        .replace(/=/g, '');\n}\n/** Generate a PKCE challenge pair\n * @param length Length of the verifer (between 43-128). Defaults to 43.\n * @returns PKCE challenge pair\n */\nexport default async function pkceChallenge(length) {\n    if (!length)\n        length = 43;\n    if (length < 43 || length > 128) {\n        throw `Expected a length between 43 and 128. Received ${length}.`;\n    }\n    const verifier = await generateVerifier(length);\n    const challenge = await generateChallenge(verifier);\n    return {\n        code_verifier: verifier,\n        code_challenge: challenge,\n    };\n}\n/** Verify that a code_verifier produces the expected code challenge\n * @param code_verifier\n * @param expectedChallenge The code challenge to verify\n * @returns True if challenges are equal. False otherwise.\n */\nexport async function verifyChallenge(code_verifier, expectedChallenge) {\n    const actualChallenge = await generateChallenge(code_verifier);\n    return actualChallenge === expectedChallenge;\n}\n","import { z } from 'zod';\n/**\n * Reusable URL validation that disallows javascript: scheme\n */\nexport const SafeUrlSchema = z\n    .string()\n    .url()\n    .superRefine((val, ctx) => {\n    if (!URL.canParse(val)) {\n        ctx.addIssue({\n            code: z.ZodIssueCode.custom,\n            message: 'URL must be parseable',\n            fatal: true\n        });\n        return z.NEVER;\n    }\n})\n    .refine(url => {\n    const u = new URL(url);\n    return u.protocol !== 'javascript:' && u.protocol !== 'data:' && u.protocol !== 'vbscript:';\n}, { message: 'URL cannot use javascript:, data:, or vbscript: scheme' });\n/**\n * RFC 9728 OAuth Protected Resource Metadata\n */\nexport const OAuthProtectedResourceMetadataSchema = z\n    .object({\n    resource: z.string().url(),\n    authorization_servers: z.array(SafeUrlSchema).optional(),\n    jwks_uri: z.string().url().optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    bearer_methods_supported: z.array(z.string()).optional(),\n    resource_signing_alg_values_supported: z.array(z.string()).optional(),\n    resource_name: z.string().optional(),\n    resource_documentation: z.string().optional(),\n    resource_policy_uri: z.string().url().optional(),\n    resource_tos_uri: z.string().url().optional(),\n    tls_client_certificate_bound_access_tokens: z.boolean().optional(),\n    authorization_details_types_supported: z.array(z.string()).optional(),\n    dpop_signing_alg_values_supported: z.array(z.string()).optional(),\n    dpop_bound_access_tokens_required: z.boolean().optional()\n})\n    .passthrough();\n/**\n * RFC 8414 OAuth 2.0 Authorization Server Metadata\n */\nexport const OAuthMetadataSchema = z\n    .object({\n    issuer: z.string(),\n    authorization_endpoint: SafeUrlSchema,\n    token_endpoint: SafeUrlSchema,\n    registration_endpoint: SafeUrlSchema.optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    response_types_supported: z.array(z.string()),\n    response_modes_supported: z.array(z.string()).optional(),\n    grant_types_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_signing_alg_values_supported: z.array(z.string()).optional(),\n    service_documentation: SafeUrlSchema.optional(),\n    revocation_endpoint: SafeUrlSchema.optional(),\n    revocation_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    revocation_endpoint_auth_signing_alg_values_supported: z.array(z.string()).optional(),\n    introspection_endpoint: z.string().optional(),\n    introspection_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    introspection_endpoint_auth_signing_alg_values_supported: z.array(z.string()).optional(),\n    code_challenge_methods_supported: z.array(z.string()).optional()\n})\n    .passthrough();\n/**\n * OpenID Connect Discovery 1.0 Provider Metadata\n * see: https://openid.net/specs/openid-connect-discovery-1_0.html#ProviderMetadata\n */\nexport const OpenIdProviderMetadataSchema = z\n    .object({\n    issuer: z.string(),\n    authorization_endpoint: SafeUrlSchema,\n    token_endpoint: SafeUrlSchema,\n    userinfo_endpoint: SafeUrlSchema.optional(),\n    jwks_uri: SafeUrlSchema,\n    registration_endpoint: SafeUrlSchema.optional(),\n    scopes_supported: z.array(z.string()).optional(),\n    response_types_supported: z.array(z.string()),\n    response_modes_supported: z.array(z.string()).optional(),\n    grant_types_supported: z.array(z.string()).optional(),\n    acr_values_supported: z.array(z.string()).optional(),\n    subject_types_supported: z.array(z.string()),\n    id_token_signing_alg_values_supported: z.array(z.string()),\n    id_token_encryption_alg_values_supported: z.array(z.string()).optional(),\n    id_token_encryption_enc_values_supported: z.array(z.string()).optional(),\n    userinfo_signing_alg_values_supported: z.array(z.string()).optional(),\n    userinfo_encryption_alg_values_supported: z.array(z.string()).optional(),\n    userinfo_encryption_enc_values_supported: z.array(z.string()).optional(),\n    request_object_signing_alg_values_supported: z.array(z.string()).optional(),\n    request_object_encryption_alg_values_supported: z.array(z.string()).optional(),\n    request_object_encryption_enc_values_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_methods_supported: z.array(z.string()).optional(),\n    token_endpoint_auth_signing_alg_values_supported: z.array(z.string()).optional(),\n    display_values_supported: z.array(z.string()).optional(),\n    claim_types_supported: z.array(z.string()).optional(),\n    claims_supported: z.array(z.string()).optional(),\n    service_documentation: z.string().optional(),\n    claims_locales_supported: z.array(z.string()).optional(),\n    ui_locales_supported: z.array(z.string()).optional(),\n    claims_parameter_supported: z.boolean().optional(),\n    request_parameter_supported: z.boolean().optional(),\n    request_uri_parameter_supported: z.boolean().optional(),\n    require_request_uri_registration: z.boolean().optional(),\n    op_policy_uri: SafeUrlSchema.optional(),\n    op_tos_uri: SafeUrlSchema.optional()\n})\n    .passthrough();\n/**\n * OpenID Connect Discovery metadata that may include OAuth 2.0 fields\n * This schema represents the real-world scenario where OIDC providers\n * return a mix of OpenID Connect and OAuth 2.0 metadata fields\n */\nexport const OpenIdProviderDiscoveryMetadataSchema = OpenIdProviderMetadataSchema.merge(OAuthMetadataSchema.pick({\n    code_challenge_methods_supported: true\n}));\n/**\n * OAuth 2.1 token response\n */\nexport const OAuthTokensSchema = z\n    .object({\n    access_token: z.string(),\n    id_token: z.string().optional(), // Optional for OAuth 2.1, but necessary in OpenID Connect\n    token_type: z.string(),\n    expires_in: z.number().optional(),\n    scope: z.string().optional(),\n    refresh_token: z.string().optional()\n})\n    .strip();\n/**\n * OAuth 2.1 error response\n */\nexport const OAuthErrorResponseSchema = z.object({\n    error: z.string(),\n    error_description: z.string().optional(),\n    error_uri: z.string().optional()\n});\n/**\n * Optional version of SafeUrlSchema that allows empty string for retrocompatibility on tos_uri and logo_uri\n */\nexport const OptionalSafeUrlSchema = SafeUrlSchema.optional().or(z.literal('').transform(() => undefined));\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration metadata\n */\nexport const OAuthClientMetadataSchema = z\n    .object({\n    redirect_uris: z.array(SafeUrlSchema),\n    token_endpoint_auth_method: z.string().optional(),\n    grant_types: z.array(z.string()).optional(),\n    response_types: z.array(z.string()).optional(),\n    client_name: z.string().optional(),\n    client_uri: SafeUrlSchema.optional(),\n    logo_uri: OptionalSafeUrlSchema,\n    scope: z.string().optional(),\n    contacts: z.array(z.string()).optional(),\n    tos_uri: OptionalSafeUrlSchema,\n    policy_uri: z.string().optional(),\n    jwks_uri: SafeUrlSchema.optional(),\n    jwks: z.any().optional(),\n    software_id: z.string().optional(),\n    software_version: z.string().optional(),\n    software_statement: z.string().optional()\n})\n    .strip();\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration client information\n */\nexport const OAuthClientInformationSchema = z\n    .object({\n    client_id: z.string(),\n    client_secret: z.string().optional(),\n    client_id_issued_at: z.number().optional(),\n    client_secret_expires_at: z.number().optional()\n})\n    .strip();\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration full response (client information plus metadata)\n */\nexport const OAuthClientInformationFullSchema = OAuthClientMetadataSchema.merge(OAuthClientInformationSchema);\n/**\n * RFC 7591 OAuth 2.0 Dynamic Client Registration error response\n */\nexport const OAuthClientRegistrationErrorSchema = z\n    .object({\n    error: z.string(),\n    error_description: z.string().optional()\n})\n    .strip();\n/**\n * RFC 7009 OAuth 2.0 Token Revocation request\n */\nexport const OAuthTokenRevocationRequestSchema = z\n    .object({\n    token: z.string(),\n    token_type_hint: z.string().optional()\n})\n    .strip();\n//# sourceMappingURL=auth.js.map","/**\n * Base class for all OAuth errors\n */\nexport class OAuthError extends Error {\n    constructor(message, errorUri) {\n        super(message);\n        this.errorUri = errorUri;\n        this.name = this.constructor.name;\n    }\n    /**\n     * Converts the error to a standard OAuth error response object\n     */\n    toResponseObject() {\n        const response = {\n            error: this.errorCode,\n            error_description: this.message\n        };\n        if (this.errorUri) {\n            response.error_uri = this.errorUri;\n        }\n        return response;\n    }\n    get errorCode() {\n        return this.constructor.errorCode;\n    }\n}\n/**\n * Invalid request error - The request is missing a required parameter,\n * includes an invalid parameter value, includes a parameter more than once,\n * or is otherwise malformed.\n */\nexport class InvalidRequestError extends OAuthError {\n}\nInvalidRequestError.errorCode = 'invalid_request';\n/**\n * Invalid client error - Client authentication failed (e.g., unknown client, no client\n * authentication included, or unsupported authentication method).\n */\nexport class InvalidClientError extends OAuthError {\n}\nInvalidClientError.errorCode = 'invalid_client';\n/**\n * Invalid grant error - The provided authorization grant or refresh token is\n * invalid, expired, revoked, does not match the redirection URI used in the\n * authorization request, or was issued to another client.\n */\nexport class InvalidGrantError extends OAuthError {\n}\nInvalidGrantError.errorCode = 'invalid_grant';\n/**\n * Unauthorized client error - The authenticated client is not authorized to use\n * this authorization grant type.\n */\nexport class UnauthorizedClientError extends OAuthError {\n}\nUnauthorizedClientError.errorCode = 'unauthorized_client';\n/**\n * Unsupported grant type error - The authorization grant type is not supported\n * by the authorization server.\n */\nexport class UnsupportedGrantTypeError extends OAuthError {\n}\nUnsupportedGrantTypeError.errorCode = 'unsupported_grant_type';\n/**\n * Invalid scope error - The requested scope is invalid, unknown, malformed, or\n * exceeds the scope granted by the resource owner.\n */\nexport class InvalidScopeError extends OAuthError {\n}\nInvalidScopeError.errorCode = 'invalid_scope';\n/**\n * Access denied error - The resource owner or authorization server denied the request.\n */\nexport class AccessDeniedError extends OAuthError {\n}\nAccessDeniedError.errorCode = 'access_denied';\n/**\n * Server error - The authorization server encountered an unexpected condition\n * that prevented it from fulfilling the request.\n */\nexport class ServerError extends OAuthError {\n}\nServerError.errorCode = 'server_error';\n/**\n * Temporarily unavailable error - The authorization server is currently unable to\n * handle the request due to a temporary overloading or maintenance of the server.\n */\nexport class TemporarilyUnavailableError extends OAuthError {\n}\nTemporarilyUnavailableError.errorCode = 'temporarily_unavailable';\n/**\n * Unsupported response type error - The authorization server does not support\n * obtaining an authorization code using this method.\n */\nexport class UnsupportedResponseTypeError extends OAuthError {\n}\nUnsupportedResponseTypeError.errorCode = 'unsupported_response_type';\n/**\n * Unsupported token type error - The authorization server does not support\n * the requested token type.\n */\nexport class UnsupportedTokenTypeError extends OAuthError {\n}\nUnsupportedTokenTypeError.errorCode = 'unsupported_token_type';\n/**\n * Invalid token error - The access token provided is expired, revoked, malformed,\n * or invalid for other reasons.\n */\nexport class InvalidTokenError extends OAuthError {\n}\nInvalidTokenError.errorCode = 'invalid_token';\n/**\n * Method not allowed error - The HTTP method used is not allowed for this endpoint.\n * (Custom, non-standard error)\n */\nexport class MethodNotAllowedError extends OAuthError {\n}\nMethodNotAllowedError.errorCode = 'method_not_allowed';\n/**\n * Too many requests error - Rate limit exceeded.\n * (Custom, non-standard error based on RFC 6585)\n */\nexport class TooManyRequestsError extends OAuthError {\n}\nTooManyRequestsError.errorCode = 'too_many_requests';\n/**\n * Invalid client metadata error - The client metadata is invalid.\n * (Custom error for dynamic client registration - RFC 7591)\n */\nexport class InvalidClientMetadataError extends OAuthError {\n}\nInvalidClientMetadataError.errorCode = 'invalid_client_metadata';\n/**\n * Insufficient scope error - The request requires higher privileges than provided by the access token.\n */\nexport class InsufficientScopeError extends OAuthError {\n}\nInsufficientScopeError.errorCode = 'insufficient_scope';\n/**\n * A utility class for defining one-off error codes\n */\nexport class CustomOAuthError extends OAuthError {\n    constructor(customErrorCode, message, errorUri) {\n        super(message, errorUri);\n        this.customErrorCode = customErrorCode;\n    }\n    get errorCode() {\n        return this.customErrorCode;\n    }\n}\n/**\n * A full list of all OAuthErrors, enabling parsing from error responses\n */\nexport const OAUTH_ERRORS = {\n    [InvalidRequestError.errorCode]: InvalidRequestError,\n    [InvalidClientError.errorCode]: InvalidClientError,\n    [InvalidGrantError.errorCode]: InvalidGrantError,\n    [UnauthorizedClientError.errorCode]: UnauthorizedClientError,\n    [UnsupportedGrantTypeError.errorCode]: UnsupportedGrantTypeError,\n    [InvalidScopeError.errorCode]: InvalidScopeError,\n    [AccessDeniedError.errorCode]: AccessDeniedError,\n    [ServerError.errorCode]: ServerError,\n    [TemporarilyUnavailableError.errorCode]: TemporarilyUnavailableError,\n    [UnsupportedResponseTypeError.errorCode]: UnsupportedResponseTypeError,\n    [UnsupportedTokenTypeError.errorCode]: UnsupportedTokenTypeError,\n    [InvalidTokenError.errorCode]: InvalidTokenError,\n    [MethodNotAllowedError.errorCode]: MethodNotAllowedError,\n    [TooManyRequestsError.errorCode]: TooManyRequestsError,\n    [InvalidClientMetadataError.errorCode]: InvalidClientMetadataError,\n    [InsufficientScopeError.errorCode]: InsufficientScopeError\n};\n//# sourceMappingURL=errors.js.map","import pkceChallenge from 'pkce-challenge';\nimport { LATEST_PROTOCOL_VERSION } from '../types.js';\nimport { OAuthErrorResponseSchema, OpenIdProviderDiscoveryMetadataSchema } from '../shared/auth.js';\nimport { OAuthClientInformationFullSchema, OAuthMetadataSchema, OAuthProtectedResourceMetadataSchema, OAuthTokensSchema } from '../shared/auth.js';\nimport { checkResourceAllowed, resourceUrlFromServerUrl } from '../shared/auth-utils.js';\nimport { InvalidClientError, InvalidGrantError, OAUTH_ERRORS, OAuthError, ServerError, UnauthorizedClientError } from '../server/auth/errors.js';\nexport class UnauthorizedError extends Error {\n    constructor(message) {\n        super(message !== null && message !== void 0 ? message : 'Unauthorized');\n    }\n}\nconst AUTHORIZATION_CODE_RESPONSE_TYPE = 'code';\nconst AUTHORIZATION_CODE_CHALLENGE_METHOD = 'S256';\n/**\n * Determines the best client authentication method to use based on server support and client configuration.\n *\n * Priority order (highest to lowest):\n * 1. client_secret_basic (if client secret is available)\n * 2. client_secret_post (if client secret is available)\n * 3. none (for public clients)\n *\n * @param clientInformation - OAuth client information containing credentials\n * @param supportedMethods - Authentication methods supported by the authorization server\n * @returns The selected authentication method\n */\nfunction selectClientAuthMethod(clientInformation, supportedMethods) {\n    const hasClientSecret = clientInformation.client_secret !== undefined;\n    // If server doesn't specify supported methods, use RFC 6749 defaults\n    if (supportedMethods.length === 0) {\n        return hasClientSecret ? 'client_secret_post' : 'none';\n    }\n    // Try methods in priority order (most secure first)\n    if (hasClientSecret && supportedMethods.includes('client_secret_basic')) {\n        return 'client_secret_basic';\n    }\n    if (hasClientSecret && supportedMethods.includes('client_secret_post')) {\n        return 'client_secret_post';\n    }\n    if (supportedMethods.includes('none')) {\n        return 'none';\n    }\n    // Fallback: use what we have\n    return hasClientSecret ? 'client_secret_post' : 'none';\n}\n/**\n * Applies client authentication to the request based on the specified method.\n *\n * Implements OAuth 2.1 client authentication methods:\n * - client_secret_basic: HTTP Basic authentication (RFC 6749 Section 2.3.1)\n * - client_secret_post: Credentials in request body (RFC 6749 Section 2.3.1)\n * - none: Public client authentication (RFC 6749 Section 2.1)\n *\n * @param method - The authentication method to use\n * @param clientInformation - OAuth client information containing credentials\n * @param headers - HTTP headers object to modify\n * @param params - URL search parameters to modify\n * @throws {Error} When required credentials are missing\n */\nfunction applyClientAuthentication(method, clientInformation, headers, params) {\n    const { client_id, client_secret } = clientInformation;\n    switch (method) {\n        case 'client_secret_basic':\n            applyBasicAuth(client_id, client_secret, headers);\n            return;\n        case 'client_secret_post':\n            applyPostAuth(client_id, client_secret, params);\n            return;\n        case 'none':\n            applyPublicAuth(client_id, params);\n            return;\n        default:\n            throw new Error(`Unsupported client authentication method: ${method}`);\n    }\n}\n/**\n * Applies HTTP Basic authentication (RFC 6749 Section 2.3.1)\n */\nfunction applyBasicAuth(clientId, clientSecret, headers) {\n    if (!clientSecret) {\n        throw new Error('client_secret_basic authentication requires a client_secret');\n    }\n    const credentials = btoa(`${clientId}:${clientSecret}`);\n    headers.set('Authorization', `Basic ${credentials}`);\n}\n/**\n * Applies POST body authentication (RFC 6749 Section 2.3.1)\n */\nfunction applyPostAuth(clientId, clientSecret, params) {\n    params.set('client_id', clientId);\n    if (clientSecret) {\n        params.set('client_secret', clientSecret);\n    }\n}\n/**\n * Applies public client authentication (RFC 6749 Section 2.1)\n */\nfunction applyPublicAuth(clientId, params) {\n    params.set('client_id', clientId);\n}\n/**\n * Parses an OAuth error response from a string or Response object.\n *\n * If the input is a standard OAuth2.0 error response, it will be parsed according to the spec\n * and an instance of the appropriate OAuthError subclass will be returned.\n * If parsing fails, it falls back to a generic ServerError that includes\n * the response status (if available) and original content.\n *\n * @param input - A Response object or string containing the error response\n * @returns A Promise that resolves to an OAuthError instance\n */\nexport async function parseErrorResponse(input) {\n    const statusCode = input instanceof Response ? input.status : undefined;\n    const body = input instanceof Response ? await input.text() : input;\n    try {\n        const result = OAuthErrorResponseSchema.parse(JSON.parse(body));\n        const { error, error_description, error_uri } = result;\n        const errorClass = OAUTH_ERRORS[error] || ServerError;\n        return new errorClass(error_description || '', error_uri);\n    }\n    catch (error) {\n        // Not a valid OAuth error response, but try to inform the user of the raw data anyway\n        const errorMessage = `${statusCode ? `HTTP ${statusCode}: ` : ''}Invalid OAuth error response: ${error}. Raw body: ${body}`;\n        return new ServerError(errorMessage);\n    }\n}\n/**\n * Orchestrates the full auth flow with a server.\n *\n * This can be used as a single entry point for all authorization functionality,\n * instead of linking together the other lower-level functions in this module.\n */\nexport async function auth(provider, options) {\n    var _a, _b;\n    try {\n        return await authInternal(provider, options);\n    }\n    catch (error) {\n        // Handle recoverable error types by invalidating credentials and retrying\n        if (error instanceof InvalidClientError || error instanceof UnauthorizedClientError) {\n            await ((_a = provider.invalidateCredentials) === null || _a === void 0 ? void 0 : _a.call(provider, 'all'));\n            return await authInternal(provider, options);\n        }\n        else if (error instanceof InvalidGrantError) {\n            await ((_b = provider.invalidateCredentials) === null || _b === void 0 ? void 0 : _b.call(provider, 'tokens'));\n            return await authInternal(provider, options);\n        }\n        // Throw otherwise\n        throw error;\n    }\n}\nasync function authInternal(provider, { serverUrl, authorizationCode, scope, resourceMetadataUrl, fetchFn }) {\n    let resourceMetadata;\n    let authorizationServerUrl;\n    try {\n        resourceMetadata = await discoverOAuthProtectedResourceMetadata(serverUrl, { resourceMetadataUrl }, fetchFn);\n        if (resourceMetadata.authorization_servers && resourceMetadata.authorization_servers.length > 0) {\n            authorizationServerUrl = resourceMetadata.authorization_servers[0];\n        }\n    }\n    catch (_a) {\n        // Ignore errors and fall back to /.well-known/oauth-authorization-server\n    }\n    /**\n     * If we don't get a valid authorization server metadata from protected resource metadata,\n     * fallback to the legacy MCP spec's implementation (version 2025-03-26): MCP server acts as the Authorization server.\n     */\n    if (!authorizationServerUrl) {\n        authorizationServerUrl = serverUrl;\n    }\n    const resource = await selectResourceURL(serverUrl, provider, resourceMetadata);\n    const metadata = await discoverAuthorizationServerMetadata(authorizationServerUrl, {\n        fetchFn\n    });\n    // Handle client registration if needed\n    let clientInformation = await Promise.resolve(provider.clientInformation());\n    if (!clientInformation) {\n        if (authorizationCode !== undefined) {\n            throw new Error('Existing OAuth client information is required when exchanging an authorization code');\n        }\n        if (!provider.saveClientInformation) {\n            throw new Error('OAuth client information must be saveable for dynamic registration');\n        }\n        const fullInformation = await registerClient(authorizationServerUrl, {\n            metadata,\n            clientMetadata: provider.clientMetadata,\n            fetchFn\n        });\n        await provider.saveClientInformation(fullInformation);\n        clientInformation = fullInformation;\n    }\n    // Exchange authorization code for tokens\n    if (authorizationCode !== undefined) {\n        const codeVerifier = await provider.codeVerifier();\n        const tokens = await exchangeAuthorization(authorizationServerUrl, {\n            metadata,\n            clientInformation,\n            authorizationCode,\n            codeVerifier,\n            redirectUri: provider.redirectUrl,\n            resource,\n            addClientAuthentication: provider.addClientAuthentication,\n            fetchFn: fetchFn\n        });\n        await provider.saveTokens(tokens);\n        return 'AUTHORIZED';\n    }\n    const tokens = await provider.tokens();\n    // Handle token refresh or new authorization\n    if (tokens === null || tokens === void 0 ? void 0 : tokens.refresh_token) {\n        try {\n            // Attempt to refresh the token\n            const newTokens = await refreshAuthorization(authorizationServerUrl, {\n                metadata,\n                clientInformation,\n                refreshToken: tokens.refresh_token,\n                resource,\n                addClientAuthentication: provider.addClientAuthentication,\n                fetchFn\n            });\n            await provider.saveTokens(newTokens);\n            return 'AUTHORIZED';\n        }\n        catch (error) {\n            // If this is a ServerError, or an unknown type, log it out and try to continue. Otherwise, escalate so we can fix things and retry.\n            if (!(error instanceof OAuthError) || error instanceof ServerError) {\n                // Could not refresh OAuth tokens\n            }\n            else {\n                // Refresh failed for another reason, re-throw\n                throw error;\n            }\n        }\n    }\n    const state = provider.state ? await provider.state() : undefined;\n    // Start new authorization flow\n    const { authorizationUrl, codeVerifier } = await startAuthorization(authorizationServerUrl, {\n        metadata,\n        clientInformation,\n        state,\n        redirectUrl: provider.redirectUrl,\n        scope: scope || provider.clientMetadata.scope,\n        resource\n    });\n    await provider.saveCodeVerifier(codeVerifier);\n    await provider.redirectToAuthorization(authorizationUrl);\n    return 'REDIRECT';\n}\nexport async function selectResourceURL(serverUrl, provider, resourceMetadata) {\n    const defaultResource = resourceUrlFromServerUrl(serverUrl);\n    // If provider has custom validation, delegate to it\n    if (provider.validateResourceURL) {\n        return await provider.validateResourceURL(defaultResource, resourceMetadata === null || resourceMetadata === void 0 ? void 0 : resourceMetadata.resource);\n    }\n    // Only include resource parameter when Protected Resource Metadata is present\n    if (!resourceMetadata) {\n        return undefined;\n    }\n    // Validate that the metadata's resource is compatible with our request\n    if (!checkResourceAllowed({ requestedResource: defaultResource, configuredResource: resourceMetadata.resource })) {\n        throw new Error(`Protected resource ${resourceMetadata.resource} does not match expected ${defaultResource} (or origin)`);\n    }\n    // Prefer the resource from metadata since it's what the server is telling us to request\n    return new URL(resourceMetadata.resource);\n}\n/**\n * Extract resource_metadata from response header.\n */\nexport function extractResourceMetadataUrl(res) {\n    const authenticateHeader = res.headers.get('WWW-Authenticate');\n    if (!authenticateHeader) {\n        return undefined;\n    }\n    const [type, scheme] = authenticateHeader.split(' ');\n    if (type.toLowerCase() !== 'bearer' || !scheme) {\n        return undefined;\n    }\n    const regex = /resource_metadata=\"([^\"]*)\"/;\n    const match = regex.exec(authenticateHeader);\n    if (!match) {\n        return undefined;\n    }\n    try {\n        return new URL(match[1]);\n    }\n    catch (_a) {\n        return undefined;\n    }\n}\n/**\n * Looks up RFC 9728 OAuth 2.0 Protected Resource Metadata.\n *\n * If the server returns a 404 for the well-known endpoint, this function will\n * return `undefined`. Any other errors will be thrown as exceptions.\n */\nexport async function discoverOAuthProtectedResourceMetadata(serverUrl, opts, fetchFn = fetch) {\n    const response = await discoverMetadataWithFallback(serverUrl, 'oauth-protected-resource', fetchFn, {\n        protocolVersion: opts === null || opts === void 0 ? void 0 : opts.protocolVersion,\n        metadataUrl: opts === null || opts === void 0 ? void 0 : opts.resourceMetadataUrl\n    });\n    if (!response || response.status === 404) {\n        throw new Error(`Resource server does not implement OAuth 2.0 Protected Resource Metadata.`);\n    }\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status} trying to load well-known OAuth protected resource metadata.`);\n    }\n    return OAuthProtectedResourceMetadataSchema.parse(await response.json());\n}\n/**\n * Helper function to handle fetch with CORS retry logic\n */\nasync function fetchWithCorsRetry(url, headers, fetchFn = fetch) {\n    try {\n        return await fetchFn(url, { headers });\n    }\n    catch (error) {\n        if (error instanceof TypeError) {\n            if (headers) {\n                // CORS errors come back as TypeError, retry without headers\n                return fetchWithCorsRetry(url, undefined, fetchFn);\n            }\n            else {\n                // We're getting CORS errors on retry too, return undefined\n                return undefined;\n            }\n        }\n        throw error;\n    }\n}\n/**\n * Constructs the well-known path for auth-related metadata discovery\n */\nfunction buildWellKnownPath(wellKnownPrefix, pathname = '', options = {}) {\n    // Strip trailing slash from pathname to avoid double slashes\n    if (pathname.endsWith('/')) {\n        pathname = pathname.slice(0, -1);\n    }\n    return options.prependPathname ? `${pathname}/.well-known/${wellKnownPrefix}` : `/.well-known/${wellKnownPrefix}${pathname}`;\n}\n/**\n * Tries to discover OAuth metadata at a specific URL\n */\nasync function tryMetadataDiscovery(url, protocolVersion, fetchFn = fetch) {\n    const headers = {\n        'MCP-Protocol-Version': protocolVersion\n    };\n    return await fetchWithCorsRetry(url, headers, fetchFn);\n}\n/**\n * Determines if fallback to root discovery should be attempted\n */\nfunction shouldAttemptFallback(response, pathname) {\n    return !response || (response.status >= 400 && response.status < 500 && pathname !== '/');\n}\n/**\n * Generic function for discovering OAuth metadata with fallback support\n */\nasync function discoverMetadataWithFallback(serverUrl, wellKnownType, fetchFn, opts) {\n    var _a, _b;\n    const issuer = new URL(serverUrl);\n    const protocolVersion = (_a = opts === null || opts === void 0 ? void 0 : opts.protocolVersion) !== null && _a !== void 0 ? _a : LATEST_PROTOCOL_VERSION;\n    let url;\n    if (opts === null || opts === void 0 ? void 0 : opts.metadataUrl) {\n        url = new URL(opts.metadataUrl);\n    }\n    else {\n        // Try path-aware discovery first\n        const wellKnownPath = buildWellKnownPath(wellKnownType, issuer.pathname);\n        url = new URL(wellKnownPath, (_b = opts === null || opts === void 0 ? void 0 : opts.metadataServerUrl) !== null && _b !== void 0 ? _b : issuer);\n        url.search = issuer.search;\n    }\n    let response = await tryMetadataDiscovery(url, protocolVersion, fetchFn);\n    // If path-aware discovery fails with 404 and we're not already at root, try fallback to root discovery\n    if (!(opts === null || opts === void 0 ? void 0 : opts.metadataUrl) && shouldAttemptFallback(response, issuer.pathname)) {\n        const rootUrl = new URL(`/.well-known/${wellKnownType}`, issuer);\n        response = await tryMetadataDiscovery(rootUrl, protocolVersion, fetchFn);\n    }\n    return response;\n}\n/**\n * Looks up RFC 8414 OAuth 2.0 Authorization Server Metadata.\n *\n * If the server returns a 404 for the well-known endpoint, this function will\n * return `undefined`. Any other errors will be thrown as exceptions.\n *\n * @deprecated This function is deprecated in favor of `discoverAuthorizationServerMetadata`.\n */\nexport async function discoverOAuthMetadata(issuer, { authorizationServerUrl, protocolVersion } = {}, fetchFn = fetch) {\n    if (typeof issuer === 'string') {\n        issuer = new URL(issuer);\n    }\n    if (!authorizationServerUrl) {\n        authorizationServerUrl = issuer;\n    }\n    if (typeof authorizationServerUrl === 'string') {\n        authorizationServerUrl = new URL(authorizationServerUrl);\n    }\n    protocolVersion !== null && protocolVersion !== void 0 ? protocolVersion : (protocolVersion = LATEST_PROTOCOL_VERSION);\n    const response = await discoverMetadataWithFallback(authorizationServerUrl, 'oauth-authorization-server', fetchFn, {\n        protocolVersion,\n        metadataServerUrl: authorizationServerUrl\n    });\n    if (!response || response.status === 404) {\n        return undefined;\n    }\n    if (!response.ok) {\n        throw new Error(`HTTP ${response.status} trying to load well-known OAuth metadata`);\n    }\n    return OAuthMetadataSchema.parse(await response.json());\n}\n/**\n * Builds a list of discovery URLs to try for authorization server metadata.\n * URLs are returned in priority order:\n * 1. OAuth metadata at the given URL\n * 2. OAuth metadata at root (if URL has path)\n * 3. OIDC metadata endpoints\n */\nexport function buildDiscoveryUrls(authorizationServerUrl) {\n    const url = typeof authorizationServerUrl === 'string' ? new URL(authorizationServerUrl) : authorizationServerUrl;\n    const hasPath = url.pathname !== '/';\n    const urlsToTry = [];\n    if (!hasPath) {\n        // Root path: https://example.com/.well-known/oauth-authorization-server\n        urlsToTry.push({\n            url: new URL('/.well-known/oauth-authorization-server', url.origin),\n            type: 'oauth'\n        });\n        // OIDC: https://example.com/.well-known/openid-configuration\n        urlsToTry.push({\n            url: new URL(`/.well-known/openid-configuration`, url.origin),\n            type: 'oidc'\n        });\n        return urlsToTry;\n    }\n    // Strip trailing slash from pathname to avoid double slashes\n    let pathname = url.pathname;\n    if (pathname.endsWith('/')) {\n        pathname = pathname.slice(0, -1);\n    }\n    // 1. OAuth metadata at the given URL\n    // Insert well-known before the path: https://example.com/.well-known/oauth-authorization-server/tenant1\n    urlsToTry.push({\n        url: new URL(`/.well-known/oauth-authorization-server${pathname}`, url.origin),\n        type: 'oauth'\n    });\n    // Root path: https://example.com/.well-known/oauth-authorization-server\n    urlsToTry.push({\n        url: new URL('/.well-known/oauth-authorization-server', url.origin),\n        type: 'oauth'\n    });\n    // 3. OIDC metadata endpoints\n    // RFC 8414 style: Insert /.well-known/openid-configuration before the path\n    urlsToTry.push({\n        url: new URL(`/.well-known/openid-configuration${pathname}`, url.origin),\n        type: 'oidc'\n    });\n    // OIDC Discovery 1.0 style: Append /.well-known/openid-configuration after the path\n    urlsToTry.push({\n        url: new URL(`${pathname}/.well-known/openid-configuration`, url.origin),\n        type: 'oidc'\n    });\n    return urlsToTry;\n}\n/**\n * Discovers authorization server metadata with support for RFC 8414 OAuth 2.0 Authorization Server Metadata\n * and OpenID Connect Discovery 1.0 specifications.\n *\n * This function implements a fallback strategy for authorization server discovery:\n * 1. Attempts RFC 8414 OAuth metadata discovery first\n * 2. If OAuth discovery fails, falls back to OpenID Connect Discovery\n *\n * @param authorizationServerUrl - The authorization server URL obtained from the MCP Server's\n *                                 protected resource metadata, or the MCP server's URL if the\n *                                 metadata was not found.\n * @param options - Configuration options\n * @param options.fetchFn - Optional fetch function for making HTTP requests, defaults to global fetch\n * @param options.protocolVersion - MCP protocol version to use, defaults to LATEST_PROTOCOL_VERSION\n * @returns Promise resolving to authorization server metadata, or undefined if discovery fails\n */\nexport async function discoverAuthorizationServerMetadata(authorizationServerUrl, { fetchFn = fetch, protocolVersion = LATEST_PROTOCOL_VERSION } = {}) {\n    const headers = {\n        'MCP-Protocol-Version': protocolVersion,\n        Accept: 'application/json'\n    };\n    // Get the list of URLs to try\n    const urlsToTry = buildDiscoveryUrls(authorizationServerUrl);\n    // Try each URL in order\n    for (const { url: endpointUrl, type } of urlsToTry) {\n        const response = await fetchWithCorsRetry(endpointUrl, headers, fetchFn);\n        if (!response) {\n            /**\n             * CORS error occurred - don't throw as the endpoint may not allow CORS,\n             * continue trying other possible endpoints\n             */\n            continue;\n        }\n        if (!response.ok) {\n            // Continue looking for any 4xx response code.\n            if (response.status >= 400 && response.status < 500) {\n                continue; // Try next URL\n            }\n            throw new Error(`HTTP ${response.status} trying to load ${type === 'oauth' ? 'OAuth' : 'OpenID provider'} metadata from ${endpointUrl}`);\n        }\n        // Parse and validate based on type\n        if (type === 'oauth') {\n            return OAuthMetadataSchema.parse(await response.json());\n        }\n        else {\n            return OpenIdProviderDiscoveryMetadataSchema.parse(await response.json());\n        }\n    }\n    return undefined;\n}\n/**\n * Begins the authorization flow with the given server, by generating a PKCE challenge and constructing the authorization URL.\n */\nexport async function startAuthorization(authorizationServerUrl, { metadata, clientInformation, redirectUrl, scope, state, resource }) {\n    let authorizationUrl;\n    if (metadata) {\n        authorizationUrl = new URL(metadata.authorization_endpoint);\n        if (!metadata.response_types_supported.includes(AUTHORIZATION_CODE_RESPONSE_TYPE)) {\n            throw new Error(`Incompatible auth server: does not support response type ${AUTHORIZATION_CODE_RESPONSE_TYPE}`);\n        }\n        if (metadata.code_challenge_methods_supported &&\n            !metadata.code_challenge_methods_supported.includes(AUTHORIZATION_CODE_CHALLENGE_METHOD)) {\n            throw new Error(`Incompatible auth server: does not support code challenge method ${AUTHORIZATION_CODE_CHALLENGE_METHOD}`);\n        }\n    }\n    else {\n        authorizationUrl = new URL('/authorize', authorizationServerUrl);\n    }\n    // Generate PKCE challenge\n    const challenge = await pkceChallenge();\n    const codeVerifier = challenge.code_verifier;\n    const codeChallenge = challenge.code_challenge;\n    authorizationUrl.searchParams.set('response_type', AUTHORIZATION_CODE_RESPONSE_TYPE);\n    authorizationUrl.searchParams.set('client_id', clientInformation.client_id);\n    authorizationUrl.searchParams.set('code_challenge', codeChallenge);\n    authorizationUrl.searchParams.set('code_challenge_method', AUTHORIZATION_CODE_CHALLENGE_METHOD);\n    authorizationUrl.searchParams.set('redirect_uri', String(redirectUrl));\n    if (state) {\n        authorizationUrl.searchParams.set('state', state);\n    }\n    if (scope) {\n        authorizationUrl.searchParams.set('scope', scope);\n    }\n    if (scope === null || scope === void 0 ? void 0 : scope.includes('offline_access')) {\n        // if the request includes the OIDC-only \"offline_access\" scope,\n        // we need to set the prompt to \"consent\" to ensure the user is prompted to grant offline access\n        // https://openid.net/specs/openid-connect-core-1_0.html#OfflineAccess\n        authorizationUrl.searchParams.append('prompt', 'consent');\n    }\n    if (resource) {\n        authorizationUrl.searchParams.set('resource', resource.href);\n    }\n    return { authorizationUrl, codeVerifier };\n}\n/**\n * Exchanges an authorization code for an access token with the given server.\n *\n * Supports multiple client authentication methods as specified in OAuth 2.1:\n * - Automatically selects the best authentication method based on server support\n * - Falls back to appropriate defaults when server metadata is unavailable\n *\n * @param authorizationServerUrl - The authorization server's base URL\n * @param options - Configuration object containing client info, auth code, etc.\n * @returns Promise resolving to OAuth tokens\n * @throws {Error} When token exchange fails or authentication is invalid\n */\nexport async function exchangeAuthorization(authorizationServerUrl, { metadata, clientInformation, authorizationCode, codeVerifier, redirectUri, resource, addClientAuthentication, fetchFn }) {\n    var _a;\n    const grantType = 'authorization_code';\n    const tokenUrl = (metadata === null || metadata === void 0 ? void 0 : metadata.token_endpoint) ? new URL(metadata.token_endpoint) : new URL('/token', authorizationServerUrl);\n    if ((metadata === null || metadata === void 0 ? void 0 : metadata.grant_types_supported) && !metadata.grant_types_supported.includes(grantType)) {\n        throw new Error(`Incompatible auth server: does not support grant type ${grantType}`);\n    }\n    // Exchange code for tokens\n    const headers = new Headers({\n        'Content-Type': 'application/x-www-form-urlencoded',\n        Accept: 'application/json'\n    });\n    const params = new URLSearchParams({\n        grant_type: grantType,\n        code: authorizationCode,\n        code_verifier: codeVerifier,\n        redirect_uri: String(redirectUri)\n    });\n    if (addClientAuthentication) {\n        addClientAuthentication(headers, params, authorizationServerUrl, metadata);\n    }\n    else {\n        // Determine and apply client authentication method\n        const supportedMethods = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.token_endpoint_auth_methods_supported) !== null && _a !== void 0 ? _a : [];\n        const authMethod = selectClientAuthMethod(clientInformation, supportedMethods);\n        applyClientAuthentication(authMethod, clientInformation, headers, params);\n    }\n    if (resource) {\n        params.set('resource', resource.href);\n    }\n    const response = await (fetchFn !== null && fetchFn !== void 0 ? fetchFn : fetch)(tokenUrl, {\n        method: 'POST',\n        headers,\n        body: params\n    });\n    if (!response.ok) {\n        throw await parseErrorResponse(response);\n    }\n    return OAuthTokensSchema.parse(await response.json());\n}\n/**\n * Exchange a refresh token for an updated access token.\n *\n * Supports multiple client authentication methods as specified in OAuth 2.1:\n * - Automatically selects the best authentication method based on server support\n * - Preserves the original refresh token if a new one is not returned\n *\n * @param authorizationServerUrl - The authorization server's base URL\n * @param options - Configuration object containing client info, refresh token, etc.\n * @returns Promise resolving to OAuth tokens (preserves original refresh_token if not replaced)\n * @throws {Error} When token refresh fails or authentication is invalid\n */\nexport async function refreshAuthorization(authorizationServerUrl, { metadata, clientInformation, refreshToken, resource, addClientAuthentication, fetchFn }) {\n    var _a;\n    const grantType = 'refresh_token';\n    let tokenUrl;\n    if (metadata) {\n        tokenUrl = new URL(metadata.token_endpoint);\n        if (metadata.grant_types_supported && !metadata.grant_types_supported.includes(grantType)) {\n            throw new Error(`Incompatible auth server: does not support grant type ${grantType}`);\n        }\n    }\n    else {\n        tokenUrl = new URL('/token', authorizationServerUrl);\n    }\n    // Exchange refresh token\n    const headers = new Headers({\n        'Content-Type': 'application/x-www-form-urlencoded'\n    });\n    const params = new URLSearchParams({\n        grant_type: grantType,\n        refresh_token: refreshToken\n    });\n    if (addClientAuthentication) {\n        addClientAuthentication(headers, params, authorizationServerUrl, metadata);\n    }\n    else {\n        // Determine and apply client authentication method\n        const supportedMethods = (_a = metadata === null || metadata === void 0 ? void 0 : metadata.token_endpoint_auth_methods_supported) !== null && _a !== void 0 ? _a : [];\n        const authMethod = selectClientAuthMethod(clientInformation, supportedMethods);\n        applyClientAuthentication(authMethod, clientInformation, headers, params);\n    }\n    if (resource) {\n        params.set('resource', resource.href);\n    }\n    const response = await (fetchFn !== null && fetchFn !== void 0 ? fetchFn : fetch)(tokenUrl, {\n        method: 'POST',\n        headers,\n        body: params\n    });\n    if (!response.ok) {\n        throw await parseErrorResponse(response);\n    }\n    return OAuthTokensSchema.parse({ refresh_token: refreshToken, ...(await response.json()) });\n}\n/**\n * Performs OAuth 2.0 Dynamic Client Registration according to RFC 7591.\n */\nexport async function registerClient(authorizationServerUrl, { metadata, clientMetadata, fetchFn }) {\n    let registrationUrl;\n    if (metadata) {\n        if (!metadata.registration_endpoint) {\n            throw new Error('Incompatible auth server: does not support dynamic client registration');\n        }\n        registrationUrl = new URL(metadata.registration_endpoint);\n    }\n    else {\n        registrationUrl = new URL('/register', authorizationServerUrl);\n    }\n    const response = await (fetchFn !== null && fetchFn !== void 0 ? fetchFn : fetch)(registrationUrl, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(clientMetadata)\n    });\n    if (!response.ok) {\n        throw await parseErrorResponse(response);\n    }\n    return OAuthClientInformationFullSchema.parse(await response.json());\n}\n//# sourceMappingURL=auth.js.map","/**\n * Utilities for handling OAuth resource URIs.\n */\n/**\n * Converts a server URL to a resource URL by removing the fragment.\n * RFC 8707 section 2 states that resource URIs \"MUST NOT include a fragment component\".\n * Keeps everything else unchanged (scheme, domain, port, path, query).\n */\nexport function resourceUrlFromServerUrl(url) {\n    const resourceURL = typeof url === 'string' ? new URL(url) : new URL(url.href);\n    resourceURL.hash = ''; // Remove fragment\n    return resourceURL;\n}\n/**\n * Checks if a requested resource URL matches a configured resource URL.\n * A requested resource matches if it has the same scheme, domain, port,\n * and its path starts with the configured resource's path.\n *\n * @param requestedResource The resource URL being requested\n * @param configuredResource The resource URL that has been configured\n * @returns true if the requested resource matches the configured resource, false otherwise\n */\nexport function checkResourceAllowed({ requestedResource, configuredResource }) {\n    const requested = typeof requestedResource === 'string' ? new URL(requestedResource) : new URL(requestedResource.href);\n    const configured = typeof configuredResource === 'string' ? new URL(configuredResource) : new URL(configuredResource.href);\n    // Compare the origin (scheme, domain, and port)\n    if (requested.origin !== configured.origin) {\n        return false;\n    }\n    // Handle cases like requested=/foo and configured=/foo/\n    if (requested.pathname.length < configured.pathname.length) {\n        return false;\n    }\n    // Check if the requested path starts with the configured path\n    // Ensure both paths end with / for proper comparison\n    // This ensures that if we have paths like \"/api\" and \"/api/users\",\n    // we properly detect that \"/api/users\" is a subpath of \"/api\"\n    // By adding a trailing slash if missing, we avoid false positives\n    // where paths like \"/api123\" would incorrectly match \"/api\"\n    const requestedPath = requested.pathname.endsWith('/') ? requested.pathname : requested.pathname + '/';\n    const configuredPath = configured.pathname.endsWith('/') ? configured.pathname : configured.pathname + '/';\n    return requestedPath.startsWith(configuredPath);\n}\n//# sourceMappingURL=auth-utils.js.map","class ParseError extends Error {\n  constructor(message, options) {\n    super(message), this.name = \"ParseError\", this.type = options.type, this.field = options.field, this.value = options.value, this.line = options.line;\n  }\n}\nfunction noop(_arg) {\n}\nfunction createParser(callbacks) {\n  if (typeof callbacks == \"function\")\n    throw new TypeError(\n      \"`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?\"\n    );\n  const { onEvent = noop, onError = noop, onRetry = noop, onComment } = callbacks;\n  let incompleteLine = \"\", isFirstChunk = !0, id, data = \"\", eventType = \"\";\n  function feed(newChunk) {\n    const chunk = isFirstChunk ? newChunk.replace(/^\\xEF\\xBB\\xBF/, \"\") : newChunk, [complete, incomplete] = splitLines(`${incompleteLine}${chunk}`);\n    for (const line of complete)\n      parseLine(line);\n    incompleteLine = incomplete, isFirstChunk = !1;\n  }\n  function parseLine(line) {\n    if (line === \"\") {\n      dispatchEvent();\n      return;\n    }\n    if (line.startsWith(\":\")) {\n      onComment && onComment(line.slice(line.startsWith(\": \") ? 2 : 1));\n      return;\n    }\n    const fieldSeparatorIndex = line.indexOf(\":\");\n    if (fieldSeparatorIndex !== -1) {\n      const field = line.slice(0, fieldSeparatorIndex), offset = line[fieldSeparatorIndex + 1] === \" \" ? 2 : 1, value = line.slice(fieldSeparatorIndex + offset);\n      processField(field, value, line);\n      return;\n    }\n    processField(line, \"\", line);\n  }\n  function processField(field, value, line) {\n    switch (field) {\n      case \"event\":\n        eventType = value;\n        break;\n      case \"data\":\n        data = `${data}${value}\n`;\n        break;\n      case \"id\":\n        id = value.includes(\"\\0\") ? void 0 : value;\n        break;\n      case \"retry\":\n        /^\\d+$/.test(value) ? onRetry(parseInt(value, 10)) : onError(\n          new ParseError(`Invalid \\`retry\\` value: \"${value}\"`, {\n            type: \"invalid-retry\",\n            value,\n            line\n          })\n        );\n        break;\n      default:\n        onError(\n          new ParseError(\n            `Unknown field \"${field.length > 20 ? `${field.slice(0, 20)}\\u2026` : field}\"`,\n            { type: \"unknown-field\", field, value, line }\n          )\n        );\n        break;\n    }\n  }\n  function dispatchEvent() {\n    data.length > 0 && onEvent({\n      id,\n      event: eventType || void 0,\n      // If the data buffer's last character is a U+000A LINE FEED (LF) character,\n      // then remove the last character from the data buffer.\n      data: data.endsWith(`\n`) ? data.slice(0, -1) : data\n    }), id = void 0, data = \"\", eventType = \"\";\n  }\n  function reset(options = {}) {\n    incompleteLine && options.consume && parseLine(incompleteLine), isFirstChunk = !0, id = void 0, data = \"\", eventType = \"\", incompleteLine = \"\";\n  }\n  return { feed, reset };\n}\nfunction splitLines(chunk) {\n  const lines = [];\n  let incompleteLine = \"\", searchIndex = 0;\n  for (; searchIndex < chunk.length; ) {\n    const crIndex = chunk.indexOf(\"\\r\", searchIndex), lfIndex = chunk.indexOf(`\n`, searchIndex);\n    let lineEnd = -1;\n    if (crIndex !== -1 && lfIndex !== -1 ? lineEnd = Math.min(crIndex, lfIndex) : crIndex !== -1 ? crIndex === chunk.length - 1 ? lineEnd = -1 : lineEnd = crIndex : lfIndex !== -1 && (lineEnd = lfIndex), lineEnd === -1) {\n      incompleteLine = chunk.slice(searchIndex);\n      break;\n    } else {\n      const line = chunk.slice(searchIndex, lineEnd);\n      lines.push(line), searchIndex = lineEnd + 1, chunk[searchIndex - 1] === \"\\r\" && chunk[searchIndex] === `\n` && searchIndex++;\n    }\n  }\n  return [lines, incompleteLine];\n}\nexport {\n  ParseError,\n  createParser\n};\n//# sourceMappingURL=index.js.map\n","import { createParser } from \"./index.js\";\nimport { ParseError } from \"./index.js\";\nclass EventSourceParserStream extends TransformStream {\n  constructor({ onError, onRetry, onComment } = {}) {\n    let parser;\n    super({\n      start(controller) {\n        parser = createParser({\n          onEvent: (event) => {\n            controller.enqueue(event);\n          },\n          onError(error) {\n            onError === \"terminate\" ? controller.error(error) : typeof onError == \"function\" && onError(error);\n          },\n          onRetry,\n          onComment\n        });\n      },\n      transform(chunk) {\n        parser.feed(chunk);\n      }\n    });\n  }\n}\nexport {\n  EventSourceParserStream,\n  ParseError\n};\n//# sourceMappingURL=stream.js.map\n","import { isInitializedNotification, isJSONRPCRequest, isJSONRPCResponse, JSONRPCMessageSchema } from '../types.js';\nimport { auth, extractResourceMetadataUrl, UnauthorizedError } from './auth.js';\nimport { EventSourceParserStream } from 'eventsource-parser/stream';\n// Default reconnection options for StreamableHTTP connections\nconst DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS = {\n    initialReconnectionDelay: 1000,\n    maxReconnectionDelay: 30000,\n    reconnectionDelayGrowFactor: 1.5,\n    maxRetries: 2\n};\nexport class StreamableHTTPError extends Error {\n    constructor(code, message) {\n        super(`Streamable HTTP error: ${message}`);\n        this.code = code;\n    }\n}\n/**\n * Client transport for Streamable HTTP: this implements the MCP Streamable HTTP transport specification.\n * It will connect to a server using HTTP POST for sending messages and HTTP GET with Server-Sent Events\n * for receiving messages.\n */\nexport class StreamableHTTPClientTransport {\n    constructor(url, opts) {\n        var _a;\n        this._hasCompletedAuthFlow = false; // Circuit breaker: detect auth success followed by immediate 401\n        this._url = url;\n        this._resourceMetadataUrl = undefined;\n        this._requestInit = opts === null || opts === void 0 ? void 0 : opts.requestInit;\n        this._authProvider = opts === null || opts === void 0 ? void 0 : opts.authProvider;\n        this._fetch = opts === null || opts === void 0 ? void 0 : opts.fetch;\n        this._sessionId = opts === null || opts === void 0 ? void 0 : opts.sessionId;\n        this._reconnectionOptions = (_a = opts === null || opts === void 0 ? void 0 : opts.reconnectionOptions) !== null && _a !== void 0 ? _a : DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS;\n    }\n    async _authThenStart() {\n        var _a;\n        if (!this._authProvider) {\n            throw new UnauthorizedError('No auth provider');\n        }\n        let result;\n        try {\n            result = await auth(this._authProvider, {\n                serverUrl: this._url,\n                resourceMetadataUrl: this._resourceMetadataUrl,\n                fetchFn: this._fetch\n            });\n        }\n        catch (error) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, error);\n            throw error;\n        }\n        if (result !== 'AUTHORIZED') {\n            throw new UnauthorizedError();\n        }\n        return await this._startOrAuthSse({ resumptionToken: undefined });\n    }\n    async _commonHeaders() {\n        var _a;\n        const headers = {};\n        if (this._authProvider) {\n            const tokens = await this._authProvider.tokens();\n            if (tokens) {\n                headers['Authorization'] = `Bearer ${tokens.access_token}`;\n            }\n        }\n        if (this._sessionId) {\n            headers['mcp-session-id'] = this._sessionId;\n        }\n        if (this._protocolVersion) {\n            headers['mcp-protocol-version'] = this._protocolVersion;\n        }\n        const extraHeaders = this._normalizeHeaders((_a = this._requestInit) === null || _a === void 0 ? void 0 : _a.headers);\n        return new Headers({\n            ...headers,\n            ...extraHeaders\n        });\n    }\n    async _startOrAuthSse(options) {\n        var _a, _b, _c;\n        const { resumptionToken } = options;\n        try {\n            // Try to open an initial SSE stream with GET to listen for server messages\n            // This is optional according to the spec - server may not support it\n            const headers = await this._commonHeaders();\n            headers.set('Accept', 'text/event-stream');\n            // Include Last-Event-ID header for resumable streams if provided\n            if (resumptionToken) {\n                headers.set('last-event-id', resumptionToken);\n            }\n            const response = await ((_a = this._fetch) !== null && _a !== void 0 ? _a : fetch)(this._url, {\n                method: 'GET',\n                headers,\n                signal: (_b = this._abortController) === null || _b === void 0 ? void 0 : _b.signal\n            });\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    // Need to authenticate\n                    return await this._authThenStart();\n                }\n                // 405 indicates that the server does not offer an SSE stream at GET endpoint\n                // This is an expected case that should not trigger an error\n                if (response.status === 405) {\n                    return;\n                }\n                throw new StreamableHTTPError(response.status, `Failed to open SSE stream: ${response.statusText}`);\n            }\n            this._handleSseStream(response.body, options, true);\n        }\n        catch (error) {\n            (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, error);\n            throw error;\n        }\n    }\n    /**\n     * Calculates the next reconnection delay using  backoff algorithm\n     *\n     * @param attempt Current reconnection attempt count for the specific stream\n     * @returns Time to wait in milliseconds before next reconnection attempt\n     */\n    _getNextReconnectionDelay(attempt) {\n        // Access default values directly, ensuring they're never undefined\n        const initialDelay = this._reconnectionOptions.initialReconnectionDelay;\n        const growFactor = this._reconnectionOptions.reconnectionDelayGrowFactor;\n        const maxDelay = this._reconnectionOptions.maxReconnectionDelay;\n        // Cap at maximum delay\n        return Math.min(initialDelay * Math.pow(growFactor, attempt), maxDelay);\n    }\n    _normalizeHeaders(headers) {\n        if (!headers)\n            return {};\n        if (headers instanceof Headers) {\n            return Object.fromEntries(headers.entries());\n        }\n        if (Array.isArray(headers)) {\n            return Object.fromEntries(headers);\n        }\n        return { ...headers };\n    }\n    /**\n     * Schedule a reconnection attempt with exponential backoff\n     *\n     * @param lastEventId The ID of the last received event for resumability\n     * @param attemptCount Current reconnection attempt count for this specific stream\n     */\n    _scheduleReconnection(options, attemptCount = 0) {\n        var _a;\n        // Use provided options or default options\n        const maxRetries = this._reconnectionOptions.maxRetries;\n        // Check if we've exceeded maximum retry attempts\n        if (maxRetries > 0 && attemptCount >= maxRetries) {\n            (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, new Error(`Maximum reconnection attempts (${maxRetries}) exceeded.`));\n            return;\n        }\n        // Calculate next delay based on current attempt count\n        const delay = this._getNextReconnectionDelay(attemptCount);\n        // Schedule the reconnection\n        setTimeout(() => {\n            // Use the last event ID to resume where we left off\n            this._startOrAuthSse(options).catch(error => {\n                var _a;\n                (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, new Error(`Failed to reconnect SSE stream: ${error instanceof Error ? error.message : String(error)}`));\n                // Schedule another attempt if this one failed, incrementing the attempt counter\n                this._scheduleReconnection(options, attemptCount + 1);\n            });\n        }, delay);\n    }\n    _handleSseStream(stream, options, isReconnectable) {\n        if (!stream) {\n            return;\n        }\n        const { onresumptiontoken, replayMessageId } = options;\n        let lastEventId;\n        const processStream = async () => {\n            var _a, _b, _c, _d;\n            // this is the closest we can get to trying to catch network errors\n            // if something happens reader will throw\n            try {\n                // Create a pipeline: binary stream -> text decoder -> SSE parser\n                const reader = stream.pipeThrough(new TextDecoderStream()).pipeThrough(new EventSourceParserStream()).getReader();\n                while (true) {\n                    const { value: event, done } = await reader.read();\n                    if (done) {\n                        break;\n                    }\n                    // Update last event ID if provided\n                    if (event.id) {\n                        lastEventId = event.id;\n                        onresumptiontoken === null || onresumptiontoken === void 0 ? void 0 : onresumptiontoken(event.id);\n                    }\n                    if (!event.event || event.event === 'message') {\n                        try {\n                            const message = JSONRPCMessageSchema.parse(JSON.parse(event.data));\n                            if (replayMessageId !== undefined && isJSONRPCResponse(message)) {\n                                message.id = replayMessageId;\n                            }\n                            (_a = this.onmessage) === null || _a === void 0 ? void 0 : _a.call(this, message);\n                        }\n                        catch (error) {\n                            (_b = this.onerror) === null || _b === void 0 ? void 0 : _b.call(this, error);\n                        }\n                    }\n                }\n            }\n            catch (error) {\n                // Handle stream errors - likely a network disconnect\n                (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, new Error(`SSE stream disconnected: ${error}`));\n                // Attempt to reconnect if the stream disconnects unexpectedly and we aren't closing\n                if (isReconnectable && this._abortController && !this._abortController.signal.aborted) {\n                    // Use the exponential backoff reconnection strategy\n                    try {\n                        this._scheduleReconnection({\n                            resumptionToken: lastEventId,\n                            onresumptiontoken,\n                            replayMessageId\n                        }, 0);\n                    }\n                    catch (error) {\n                        (_d = this.onerror) === null || _d === void 0 ? void 0 : _d.call(this, new Error(`Failed to reconnect: ${error instanceof Error ? error.message : String(error)}`));\n                    }\n                }\n            }\n        };\n        processStream();\n    }\n    async start() {\n        if (this._abortController) {\n            throw new Error('StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.');\n        }\n        this._abortController = new AbortController();\n    }\n    /**\n     * Call this method after the user has finished authorizing via their user agent and is redirected back to the MCP client application. This will exchange the authorization code for an access token, enabling the next connection attempt to successfully auth.\n     */\n    async finishAuth(authorizationCode) {\n        if (!this._authProvider) {\n            throw new UnauthorizedError('No auth provider');\n        }\n        const result = await auth(this._authProvider, {\n            serverUrl: this._url,\n            authorizationCode,\n            resourceMetadataUrl: this._resourceMetadataUrl,\n            fetchFn: this._fetch\n        });\n        if (result !== 'AUTHORIZED') {\n            throw new UnauthorizedError('Failed to authorize');\n        }\n    }\n    async close() {\n        var _a, _b;\n        // Abort any pending requests\n        (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.abort();\n        (_b = this.onclose) === null || _b === void 0 ? void 0 : _b.call(this);\n    }\n    async send(message, options) {\n        var _a, _b, _c, _d;\n        try {\n            const { resumptionToken, onresumptiontoken } = options || {};\n            if (resumptionToken) {\n                // If we have at last event ID, we need to reconnect the SSE stream\n                this._startOrAuthSse({ resumptionToken, replayMessageId: isJSONRPCRequest(message) ? message.id : undefined }).catch(err => { var _a; return (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, err); });\n                return;\n            }\n            const headers = await this._commonHeaders();\n            headers.set('content-type', 'application/json');\n            headers.set('accept', 'application/json, text/event-stream');\n            const init = {\n                ...this._requestInit,\n                method: 'POST',\n                headers,\n                body: JSON.stringify(message),\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal\n            };\n            const response = await ((_b = this._fetch) !== null && _b !== void 0 ? _b : fetch)(this._url, init);\n            // Handle session ID received during initialization\n            const sessionId = response.headers.get('mcp-session-id');\n            if (sessionId) {\n                this._sessionId = sessionId;\n            }\n            if (!response.ok) {\n                if (response.status === 401 && this._authProvider) {\n                    // Prevent infinite recursion when server returns 401 after successful auth\n                    if (this._hasCompletedAuthFlow) {\n                        throw new StreamableHTTPError(401, 'Server returned 401 after successful authentication');\n                    }\n                    this._resourceMetadataUrl = extractResourceMetadataUrl(response);\n                    const result = await auth(this._authProvider, {\n                        serverUrl: this._url,\n                        resourceMetadataUrl: this._resourceMetadataUrl,\n                        fetchFn: this._fetch\n                    });\n                    if (result !== 'AUTHORIZED') {\n                        throw new UnauthorizedError();\n                    }\n                    // Mark that we completed auth flow\n                    this._hasCompletedAuthFlow = true;\n                    // Purposely _not_ awaited, so we don't call onerror twice\n                    return this.send(message);\n                }\n                const text = await response.text().catch(() => null);\n                throw new Error(`Error POSTing to endpoint (HTTP ${response.status}): ${text}`);\n            }\n            // Reset auth loop flag on successful response\n            this._hasCompletedAuthFlow = false;\n            // If the response is 202 Accepted, there's no body to process\n            if (response.status === 202) {\n                // if the accepted notification is initialized, we start the SSE stream\n                // if it's supported by the server\n                if (isInitializedNotification(message)) {\n                    // Start without a lastEventId since this is a fresh connection\n                    this._startOrAuthSse({ resumptionToken: undefined }).catch(err => { var _a; return (_a = this.onerror) === null || _a === void 0 ? void 0 : _a.call(this, err); });\n                }\n                return;\n            }\n            // Get original message(s) for detecting request IDs\n            const messages = Array.isArray(message) ? message : [message];\n            const hasRequests = messages.filter(msg => 'method' in msg && 'id' in msg && msg.id !== undefined).length > 0;\n            // Check the response type\n            const contentType = response.headers.get('content-type');\n            if (hasRequests) {\n                if (contentType === null || contentType === void 0 ? void 0 : contentType.includes('text/event-stream')) {\n                    // Handle SSE stream responses for requests\n                    // We use the same handler as standalone streams, which now supports\n                    // reconnection with the last event ID\n                    this._handleSseStream(response.body, { onresumptiontoken }, false);\n                }\n                else if (contentType === null || contentType === void 0 ? void 0 : contentType.includes('application/json')) {\n                    // For non-streaming servers, we might get direct JSON responses\n                    const data = await response.json();\n                    const responseMessages = Array.isArray(data)\n                        ? data.map(msg => JSONRPCMessageSchema.parse(msg))\n                        : [JSONRPCMessageSchema.parse(data)];\n                    for (const msg of responseMessages) {\n                        (_c = this.onmessage) === null || _c === void 0 ? void 0 : _c.call(this, msg);\n                    }\n                }\n                else {\n                    throw new StreamableHTTPError(-1, `Unexpected content type: ${contentType}`);\n                }\n            }\n        }\n        catch (error) {\n            (_d = this.onerror) === null || _d === void 0 ? void 0 : _d.call(this, error);\n            throw error;\n        }\n    }\n    get sessionId() {\n        return this._sessionId;\n    }\n    /**\n     * Terminates the current session by sending a DELETE request to the server.\n     *\n     * Clients that no longer need a particular session\n     * (e.g., because the user is leaving the client application) SHOULD send an\n     * HTTP DELETE to the MCP endpoint with the Mcp-Session-Id header to explicitly\n     * terminate the session.\n     *\n     * The server MAY respond with HTTP 405 Method Not Allowed, indicating that\n     * the server does not allow clients to terminate sessions.\n     */\n    async terminateSession() {\n        var _a, _b, _c;\n        if (!this._sessionId) {\n            return; // No session to terminate\n        }\n        try {\n            const headers = await this._commonHeaders();\n            const init = {\n                ...this._requestInit,\n                method: 'DELETE',\n                headers,\n                signal: (_a = this._abortController) === null || _a === void 0 ? void 0 : _a.signal\n            };\n            const response = await ((_b = this._fetch) !== null && _b !== void 0 ? _b : fetch)(this._url, init);\n            // We specifically handle 405 as a valid response according to the spec,\n            // meaning the server does not support explicit session termination\n            if (!response.ok && response.status !== 405) {\n                throw new StreamableHTTPError(response.status, `Failed to terminate session: ${response.statusText}`);\n            }\n            this._sessionId = undefined;\n        }\n        catch (error) {\n            (_c = this.onerror) === null || _c === void 0 ? void 0 : _c.call(this, error);\n            throw error;\n        }\n    }\n    setProtocolVersion(version) {\n        this._protocolVersion = version;\n    }\n    get protocolVersion() {\n        return this._protocolVersion;\n    }\n}\n//# sourceMappingURL=streamableHttp.js.map","import { logWarning } from '@grafana/runtime';\nimport { SemVer } from 'semver';\n\nconst LLM_PLUGIN_ID = \"grafana-llm-app\";\nconst LLM_PLUGIN_ROUTE = `/api/plugins/${LLM_PLUGIN_ID}`;\nlet LLM_PLUGIN_VERSION = new SemVer(\"0.2.0\");\nfunction setLLMPluginVersion(version) {\n  try {\n    LLM_PLUGIN_VERSION = new SemVer(version);\n  } catch (e) {\n    logWarning(\n      \"Failed to parse version of grafana-llm-app; assuming old version is present.\"\n    );\n  }\n}\n\nexport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE, LLM_PLUGIN_VERSION, setLLMPluginVersion };\n//# sourceMappingURL=constants.mjs.map\n","import React, { useMemo } from 'react';\nimport { LiveChannelScope, isLiveChannelMessageEvent } from '@grafana/data';\nimport { getGrafanaLiveSrv, getBackendSrv, logDebug, config } from '@grafana/runtime';\nimport { Client } from '@modelcontextprotocol/sdk/client/index.js';\nexport { Client } from '@modelcontextprotocol/sdk/client/index.js';\nimport { StreamableHTTPClientTransport } from '@modelcontextprotocol/sdk/client/streamableHttp.js';\nexport { StreamableHTTPClientTransport } from '@modelcontextprotocol/sdk/client/streamableHttp.js';\nimport { JSONRPCMessageSchema } from '@modelcontextprotocol/sdk/types.js';\nimport { filter } from 'rxjs';\nimport { v4 } from 'uuid';\nimport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE } from './constants.mjs';\n\nconst MCP_GRAFANA_PATH = \"mcp/grafana\";\nclass GrafanaLiveTransport {\n  constructor(path) {\n    this._grafanaLiveSrv = getGrafanaLiveSrv();\n    if (path === void 0) {\n      const pathId = v4();\n      path = `${MCP_GRAFANA_PATH}/${pathId}`;\n    }\n    this._subscribeChannel = {\n      scope: LiveChannelScope.Plugin,\n      namespace: LLM_PLUGIN_ID,\n      path: `${path}/subscribe`\n    };\n    this._publishChannel = {\n      scope: LiveChannelScope.Plugin,\n      namespace: LLM_PLUGIN_ID,\n      path: `${path}/publish`\n    };\n  }\n  async start() {\n    if (this._stream !== void 0) {\n      throw new Error(\n        \"GrafanaLiveTransport already started! If using Client class, note that connect() calls start() automatically.\"\n      );\n    }\n    const stream = this._grafanaLiveSrv.getStream(this._subscribeChannel).pipe(filter((event) => isLiveChannelMessageEvent(event)));\n    this._stream = stream;\n    stream.subscribe((event) => {\n      let message;\n      try {\n        message = JSONRPCMessageSchema.parse(event.message);\n      } catch (error) {\n        this.onerror?.(error);\n        return;\n      }\n      this.onmessage?.(message);\n    });\n  }\n  async send(message) {\n    if (this._stream === void 0) {\n      throw new Error(\"not connected\");\n    }\n    const hasPublishOptions = this._grafanaLiveSrv.publish?.length >= 3;\n    if (hasPublishOptions) {\n      const options = { useSocket: true };\n      this._grafanaLiveSrv.publish(this._publishChannel, message, options);\n    }\n    const centrifugeSubscription = (\n      // @ts-expect-error\n      this._grafanaLiveSrv.deps?.centrifugeSrv?.getChannel?.(\n        this._publishChannel\n      )?.subscription\n    );\n    if (centrifugeSubscription) {\n      return centrifugeSubscription.publish(message);\n    }\n    console.warn(\n      \"Websocket subscription not available, falling back to HTTP publish. This may fail in HA setups. If you see this, please create an issue at https://github.com/grafana/grafana-llm-app/issues/new.\"\n    );\n    await this._grafanaLiveSrv.publish(this._publishChannel, message);\n  }\n  async close() {\n    this._stream = void 0;\n  }\n}\nconst clientMap = /* @__PURE__ */ new Map();\nconst MCPClientContext = React.createContext(null);\nfunction clientKey(appName, appVersion) {\n  return `${appName}-${appVersion}`;\n}\nasync function enabled() {\n  try {\n    const settings = await getBackendSrv().get(\n      `${LLM_PLUGIN_ROUTE}/settings`,\n      void 0,\n      void 0,\n      {\n        showSuccessAlert: false,\n        showErrorAlert: false\n      }\n    );\n    if (!settings.enabled) {\n      return false;\n    }\n    if (settings.jsonData.mcp?.enabled !== void 0) {\n      return !!settings.jsonData.mcp?.enabled;\n    }\n    return !settings.jsonData.mcp?.disabled;\n  } catch (e) {\n    logDebug(String(e));\n    logDebug(\n      \"Failed to check if LLM provider is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n    );\n    return false;\n  }\n}\nfunction streamableHTTPURL(appId = LLM_PLUGIN_ID, mcpPath = MCP_GRAFANA_PATH) {\n  let grafanaUrl = config.appUrl || \"http://localhost:3000/\";\n  if (!grafanaUrl.endsWith(\"/\")) {\n    grafanaUrl = `${grafanaUrl}/`;\n  }\n  if (!mcpPath.startsWith(\"/\")) {\n    mcpPath = `/${mcpPath}`;\n  }\n  return new URL(`${grafanaUrl}api/plugins/${appId}/resources${mcpPath}`);\n}\nfunction createClientResource({\n  appName,\n  appVersion,\n  mcpAppName,\n  mcpAppPath\n}) {\n  let status = \"pending\";\n  let result = null;\n  let error = null;\n  const key = clientKey(appName, appVersion);\n  const promise = (async () => {\n    if (clientMap.has(key)) {\n      result = clientMap.get(key);\n      if (result.error) {\n        status = \"error\";\n        error = result.error;\n        throw result.error;\n      }\n      status = \"success\";\n      return result;\n    }\n    try {\n      const isEnabled = await enabled();\n      if (!isEnabled) {\n        status = \"success\";\n        result = { client: null, enabled: isEnabled };\n        clientMap.set(key, result);\n        return result;\n      }\n      const client = new Client({\n        name: appName,\n        version: appVersion\n      });\n      const transport = new StreamableHTTPClientTransport(\n        streamableHTTPURL(mcpAppName, mcpAppPath),\n        {\n          reconnectionOptions: {\n            maxRetries: 5,\n            initialReconnectionDelay: 1e3,\n            maxReconnectionDelay: 5e3,\n            reconnectionDelayGrowFactor: 1.5\n          }\n        }\n      );\n      await client.connect(transport);\n      result = { client, enabled: isEnabled };\n      clientMap.set(key, result);\n      status = \"success\";\n      return result;\n    } catch (e) {\n      status = \"error\";\n      error = e;\n      result = { client: null, enabled: false, error };\n      clientMap.set(key, result);\n      throw e;\n    }\n  })();\n  return {\n    read() {\n      if (status === \"pending\") {\n        throw promise;\n      } else if (status === \"error\") {\n        throw error;\n      } else if (status === \"success\" && result) {\n        return result;\n      }\n      throw new Error(\"Unexpected resource state\");\n    }\n  };\n}\nfunction MCPClientProvider({\n  appName,\n  appVersion,\n  mcpAppName = LLM_PLUGIN_ID,\n  mcpAppPath = MCP_GRAFANA_PATH,\n  children\n}) {\n  const resource = useMemo(\n    () => createClientResource({\n      appName,\n      appVersion,\n      mcpAppName,\n      mcpAppPath\n    }),\n    [appName, appVersion, mcpAppName, mcpAppPath]\n  );\n  const result = resource.read();\n  React.useEffect(() => {\n    return () => {\n      if (result?.client) {\n        result.client.close();\n      }\n      clientMap.delete(clientKey(appName, appVersion));\n    };\n  }, [result, appName, appVersion]);\n  return /* @__PURE__ */ React.createElement(MCPClientContext.Provider, { value: result }, children);\n}\nfunction useMCPClient() {\n  const client = React.useContext(MCPClientContext);\n  if (client === null) {\n    throw new Error(\"MCP is not enabled in this Grafana instance.\");\n  }\n  return client;\n}\nfunction convertToolsToOpenAI(tools) {\n  return tools.map(convertToolToOpenAI);\n}\nfunction convertToolToOpenAI(tool) {\n  return {\n    type: \"function\",\n    function: {\n      name: tool.name,\n      description: tool.description,\n      parameters: tool.inputSchema.properties !== void 0 ? tool.inputSchema : void 0\n    }\n  };\n}\n\nexport { GrafanaLiveTransport, MCPClientProvider, convertToolsToOpenAI, enabled, streamableHTTPURL, useMCPClient };\n//# sourceMappingURL=mcp.mjs.map\n","import React from 'react';\nimport { useAsync } from 'react-use';\nimport { mcp } from '@grafana/llm';\nimport { ErrorBoundary } from '@grafana/ui';\nimport { testIds } from '../components/testIds';\n\nexport function MCPToolsList() {\n  const { client, enabled } = mcp.useMCPClient();\n\n  const { error, loading, value } = useAsync(async () => {\n    if (!enabled || !client) {\n      return null;\n    }\n    const result = await client.listTools();\n    return result.tools;\n  }, [client, enabled]);\n\n  if (!enabled) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <p data-testid={testIds.mcpTools.disabled}>MCP is not enabled in this Grafana instance.</p>\n      </div>\n    );\n  }\n\n  if (loading) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <span data-testid={testIds.mcpTools.loading}>Loading MCP tools...</span>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <span data-testid={testIds.mcpTools.error}>Error loading MCP tools: {error.message}</span>\n      </div>\n    );\n  }\n\n  if (!value || value.length === 0) {\n    return (\n      <div data-testid={testIds.mcpTools.container}>\n        <p data-testid={testIds.mcpTools.empty}>No MCP tools available.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid={testIds.mcpTools.container} style={{ maxHeight: '400px', overflowY: 'auto' }}>\n      <h2>Available MCP Tools</h2>\n      <ul data-testid={testIds.mcpTools.list}>\n        {value.map((tool: any) => (\n          <li key={tool.name} data-testid={testIds.mcpTools.toolItem}>\n            <strong data-testid={testIds.mcpTools.toolName}>{tool.name}</strong>\n            {tool.description && <span data-testid={testIds.mcpTools.toolDescription}> - {tool.description}</span>}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nexport function MCPToolsWithProvider() {\n  return (\n    <React.Suspense fallback={<div data-testid={testIds.mcpTools.container}>Connecting to MCP server...</div>}>\n      <ErrorBoundary>\n        {({ error }) => {\n          if (error) {\n            return (\n              <div data-testid={testIds.mcpTools.container}>\n                <span data-testid={testIds.mcpTools.error}>Error loading MCP tools: {error.message}</span>\n              </div>\n            );\n          }\n          return (\n            <mcp.MCPClientProvider appName=\"grafana-llm-app\" appVersion=\"0.21.1\">\n              <MCPToolsList />\n            </mcp.MCPClientProvider>\n          );\n        }}\n      </ErrorBoundary>\n    </React.Suspense>\n  );\n}\n","import React from 'react';\n\nimport { HealthCheckResult, config } from '@grafana/runtime';\nimport { Alert, AlertVariant, Stack } from '@grafana/ui';\n\ninterface HealthCheckDetails {\n  llmProvider: LLMProviderHealthDetails | boolean;\n  vector: VectorHealthDetails | boolean;\n  version: string;\n}\n\ninterface LLMProviderHealthDetails {\n  // Whether the minimum required LLM provider settings have been provided.\n  configured: boolean;\n  // Whether we can call the LLM provider API with the provided settings.\n  ok: boolean;\n  // If set, the error returned when trying to call the LLM provider API.\n  // Will be undefined if ok is true.\n  error?: string;\n  // A map of model names to their health details.\n  // The health check attempts to call the provider API with each\n  // of the configured models and records the result of each call here.\n  models: Record<string, ModelHealthDetails>;\n}\n\ninterface ModelHealthDetails {\n  // Whether we can use this model in calls to the provider.\n  ok: boolean;\n  // If set, the error returned when trying to call the provider API.\n  // Will be undefined if ok is true.\n  error?: string;\n}\n\ninterface VectorHealthDetails {\n  // Whether the vector service has been enabled.\n  enabled: boolean;\n  // Whether we can use the vector service with the provided settings.\n  ok: boolean;\n  // If set, the error returned when trying to call the vector service.\n  // Will be undefined if ok is true.\n  error?: string;\n}\n\nconst isHealthCheckDetails = (obj: unknown): obj is HealthCheckDetails => {\n  return typeof obj === 'object' && obj !== null && 'llmProvider' in obj && 'vector' in obj && 'version' in obj;\n};\n\nconst alertVariants = new Set<AlertVariant>(['success', 'info', 'warning', 'error']);\nconst isAlertVariant = (str: string): str is AlertVariant => alertVariants.has(str as AlertVariant);\nconst getAlertVariant = (status: string): AlertVariant => {\n  if (status.toLowerCase() === 'ok') {\n    return 'success';\n  }\n  return isAlertVariant(status) ? status : 'info';\n};\nconst getAlertSeverity = (status: string, details: HealthCheckDetails): AlertVariant => {\n  const severity = getAlertVariant(status);\n  if (severity !== 'success') {\n    return severity;\n  }\n  if (!isHealthCheckDetails(details)) {\n    return 'success';\n  }\n  if (typeof details.llmProvider === 'object' && typeof details.vector === 'object') {\n    const vectorOk = !details.vector.enabled || details.vector.ok;\n    return details.llmProvider.ok && vectorOk ? 'success' : 'warning';\n  }\n  return severity;\n};\n\nexport function ShowHealthCheckResult(props: HealthCheckResult) {\n  let severity = getAlertVariant(props.status ?? 'error');\n  if (!isHealthCheckDetails(props.details)) {\n    return <Alert severity={severity} title={props.message} />;\n  }\n\n  severity = getAlertSeverity(props.status ?? 'error', props.details);\n  const showLLMProvider =\n    typeof props.details.llmProvider === 'boolean' ||\n    (typeof props.details.llmProvider === 'object' && props.details.llmProvider.configured);\n  const showVector =\n    typeof props.details.vector === 'boolean' ||\n    (typeof props.details.vector === 'object' && props.details.vector.enabled);\n  return (\n    <Stack direction=\"column\">\n      <ShowGrafanaHealth />\n      {showLLMProvider && <ShowLLMProviderHealth provider={props.details.llmProvider} />}\n      {showVector && <ShowVectorHealth vector={props.details.vector} />}\n    </Stack>\n  );\n}\n\nfunction ShowGrafanaHealth() {\n  if (config.liveEnabled) {\n    return null;\n  }\n  return (\n    <Alert title=\"Grafana Live is disabled\" severity=\"warning\">\n      <div>\n        Grafana Live is disabled. This plugin requires Grafana Live to be enabled in order to function correctly.\n      </div>\n      <div>\n        Set the{' '}\n        <a href=\"https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/#max_connections\">\n          <code>max_connections</code>\n        </a>{' '}\n        setting to a non-zero value in the Grafana configuration file to enable Grafana Live.\n      </div>\n    </Alert>\n  );\n}\n\nfunction ShowLLMProviderHealth({ provider }: { provider: LLMProviderHealthDetails | boolean }) {\n  if (typeof provider === 'boolean') {\n    const severity = provider ? 'success' : 'error';\n    const message = provider ? 'LLM provider health check succeeded!' : 'LLM provider health check failed.';\n    return <Alert title={message} severity={severity} />;\n  }\n\n  const message = provider.ok ? 'LLM provider health check succeeded!' : 'LLM provider health check failed.';\n  const severity = provider.ok ? 'success' : 'error';\n\n  return (\n    <Stack direction=\"column\" width=\"100%\">\n      <Alert severity={severity} title={message}>\n        <b>Models</b>\n        <div>\n          {Object.entries(provider.models).map(([model, details], i) => (\n            <li key={i}>\n              {model}: {details.ok ? 'OK' : `Error: ${details.error}`}\n            </li>\n          ))}\n        </div>\n      </Alert>\n    </Stack>\n  );\n}\n\nfunction ShowVectorHealth({ vector }: { vector: VectorHealthDetails | boolean }) {\n  if (typeof vector === 'boolean') {\n    const severity = vector ? 'success' : 'error';\n    const message = vector ? 'Vector service health check succeeded!' : 'Vector service health check failed.';\n    return <Alert title={message} severity={severity} />;\n  }\n  const severity = vector.ok ? 'success' : 'error';\n  const message = vector.ok ? 'Vector service health check succeeded!' : 'Vector service health check failed.';\n  return (\n    <Alert title={message} severity={severity}>\n      {vector.error && <div>Error: {vector.error}</div>}\n    </Alert>\n  );\n}\n","export function isFunction(value) {\n    return typeof value === 'function';\n}\n//# sourceMappingURL=isFunction.js.map","import { isFunction } from './isFunction';\nexport function hasLift(source) {\n    return isFunction(source === null || source === void 0 ? void 0 : source.lift);\n}\nexport function operate(init) {\n    return function (source) {\n        if (hasLift(source)) {\n            return source.lift(function (liftedSource) {\n                try {\n                    return init(liftedSource, this);\n                }\n                catch (err) {\n                    this.error(err);\n                }\n            });\n        }\n        throw new TypeError('Unable to lift unknown Observable type');\n    };\n}\n//# sourceMappingURL=lift.js.map","import { createErrorClass } from './createErrorClass';\nexport var UnsubscriptionError = createErrorClass(function (_super) {\n    return function UnsubscriptionErrorImpl(errors) {\n        _super(this);\n        this.message = errors\n            ? errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ')\n            : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n    };\n});\n//# sourceMappingURL=UnsubscriptionError.js.map","export function createErrorClass(createImpl) {\n    var _super = function (instance) {\n        Error.call(instance);\n        instance.stack = new Error().stack;\n    };\n    var ctorFunc = createImpl(_super);\n    ctorFunc.prototype = Object.create(Error.prototype);\n    ctorFunc.prototype.constructor = ctorFunc;\n    return ctorFunc;\n}\n//# sourceMappingURL=createErrorClass.js.map","export function arrRemove(arr, item) {\n    if (arr) {\n        var index = arr.indexOf(item);\n        0 <= index && arr.splice(index, 1);\n    }\n}\n//# sourceMappingURL=arrRemove.js.map","import { __read, __spreadArray, __values } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nimport { arrRemove } from './util/arrRemove';\nvar Subscription = (function () {\n    function Subscription(initialTeardown) {\n        this.initialTeardown = initialTeardown;\n        this.closed = false;\n        this._parentage = null;\n        this._finalizers = null;\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var e_1, _a, e_2, _b;\n        var errors;\n        if (!this.closed) {\n            this.closed = true;\n            var _parentage = this._parentage;\n            if (_parentage) {\n                this._parentage = null;\n                if (Array.isArray(_parentage)) {\n                    try {\n                        for (var _parentage_1 = __values(_parentage), _parentage_1_1 = _parentage_1.next(); !_parentage_1_1.done; _parentage_1_1 = _parentage_1.next()) {\n                            var parent_1 = _parentage_1_1.value;\n                            parent_1.remove(this);\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (_parentage_1_1 && !_parentage_1_1.done && (_a = _parentage_1.return)) _a.call(_parentage_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                else {\n                    _parentage.remove(this);\n                }\n            }\n            var initialFinalizer = this.initialTeardown;\n            if (isFunction(initialFinalizer)) {\n                try {\n                    initialFinalizer();\n                }\n                catch (e) {\n                    errors = e instanceof UnsubscriptionError ? e.errors : [e];\n                }\n            }\n            var _finalizers = this._finalizers;\n            if (_finalizers) {\n                this._finalizers = null;\n                try {\n                    for (var _finalizers_1 = __values(_finalizers), _finalizers_1_1 = _finalizers_1.next(); !_finalizers_1_1.done; _finalizers_1_1 = _finalizers_1.next()) {\n                        var finalizer = _finalizers_1_1.value;\n                        try {\n                            execFinalizer(finalizer);\n                        }\n                        catch (err) {\n                            errors = errors !== null && errors !== void 0 ? errors : [];\n                            if (err instanceof UnsubscriptionError) {\n                                errors = __spreadArray(__spreadArray([], __read(errors)), __read(err.errors));\n                            }\n                            else {\n                                errors.push(err);\n                            }\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_finalizers_1_1 && !_finalizers_1_1.done && (_b = _finalizers_1.return)) _b.call(_finalizers_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            }\n            if (errors) {\n                throw new UnsubscriptionError(errors);\n            }\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var _a;\n        if (teardown && teardown !== this) {\n            if (this.closed) {\n                execFinalizer(teardown);\n            }\n            else {\n                if (teardown instanceof Subscription) {\n                    if (teardown.closed || teardown._hasParent(this)) {\n                        return;\n                    }\n                    teardown._addParent(this);\n                }\n                (this._finalizers = (_a = this._finalizers) !== null && _a !== void 0 ? _a : []).push(teardown);\n            }\n        }\n    };\n    Subscription.prototype._hasParent = function (parent) {\n        var _parentage = this._parentage;\n        return _parentage === parent || (Array.isArray(_parentage) && _parentage.includes(parent));\n    };\n    Subscription.prototype._addParent = function (parent) {\n        var _parentage = this._parentage;\n        this._parentage = Array.isArray(_parentage) ? (_parentage.push(parent), _parentage) : _parentage ? [_parentage, parent] : parent;\n    };\n    Subscription.prototype._removeParent = function (parent) {\n        var _parentage = this._parentage;\n        if (_parentage === parent) {\n            this._parentage = null;\n        }\n        else if (Array.isArray(_parentage)) {\n            arrRemove(_parentage, parent);\n        }\n    };\n    Subscription.prototype.remove = function (teardown) {\n        var _finalizers = this._finalizers;\n        _finalizers && arrRemove(_finalizers, teardown);\n        if (teardown instanceof Subscription) {\n            teardown._removeParent(this);\n        }\n    };\n    Subscription.EMPTY = (function () {\n        var empty = new Subscription();\n        empty.closed = true;\n        return empty;\n    })();\n    return Subscription;\n}());\nexport { Subscription };\nexport var EMPTY_SUBSCRIPTION = Subscription.EMPTY;\nexport function isSubscription(value) {\n    return (value instanceof Subscription ||\n        (value && 'closed' in value && isFunction(value.remove) && isFunction(value.add) && isFunction(value.unsubscribe)));\n}\nfunction execFinalizer(finalizer) {\n    if (isFunction(finalizer)) {\n        finalizer();\n    }\n    else {\n        finalizer.unsubscribe();\n    }\n}\n//# sourceMappingURL=Subscription.js.map","export var config = {\n    onUnhandledError: null,\n    onStoppedNotification: null,\n    Promise: undefined,\n    useDeprecatedSynchronousErrorHandling: false,\n    useDeprecatedNextContext: false,\n};\n//# sourceMappingURL=config.js.map","import { __read, __spreadArray } from \"tslib\";\nexport var timeoutProvider = {\n    setTimeout: function (handler, timeout) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var delegate = timeoutProvider.delegate;\n        if (delegate === null || delegate === void 0 ? void 0 : delegate.setTimeout) {\n            return delegate.setTimeout.apply(delegate, __spreadArray([handler, timeout], __read(args)));\n        }\n        return setTimeout.apply(void 0, __spreadArray([handler, timeout], __read(args)));\n    },\n    clearTimeout: function (handle) {\n        var delegate = timeoutProvider.delegate;\n        return ((delegate === null || delegate === void 0 ? void 0 : delegate.clearTimeout) || clearTimeout)(handle);\n    },\n    delegate: undefined,\n};\n//# sourceMappingURL=timeoutProvider.js.map","export function noop() { }\n//# sourceMappingURL=noop.js.map","export var COMPLETE_NOTIFICATION = (function () { return createNotification('C', undefined, undefined); })();\nexport function errorNotification(error) {\n    return createNotification('E', undefined, error);\n}\nexport function nextNotification(value) {\n    return createNotification('N', value, undefined);\n}\nexport function createNotification(kind, value, error) {\n    return {\n        kind: kind,\n        value: value,\n        error: error,\n    };\n}\n//# sourceMappingURL=NotificationFactories.js.map","import { config } from '../config';\nvar context = null;\nexport function errorContext(cb) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        var isRoot = !context;\n        if (isRoot) {\n            context = { errorThrown: false, error: null };\n        }\n        cb();\n        if (isRoot) {\n            var _a = context, errorThrown = _a.errorThrown, error = _a.error;\n            context = null;\n            if (errorThrown) {\n                throw error;\n            }\n        }\n    }\n    else {\n        cb();\n    }\n}\nexport function captureError(err) {\n    if (config.useDeprecatedSynchronousErrorHandling && context) {\n        context.errorThrown = true;\n        context.error = err;\n    }\n}\n//# sourceMappingURL=errorContext.js.map","import { __extends } from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nvar Subscriber = (function (_super) {\n    __extends(Subscriber, _super);\n    function Subscriber(destination) {\n        var _this = _super.call(this) || this;\n        _this.isStopped = false;\n        if (destination) {\n            _this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(_this);\n            }\n        }\n        else {\n            _this.destination = EMPTY_OBSERVER;\n        }\n        return _this;\n    }\n    Subscriber.create = function (next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    };\n    Subscriber.prototype.next = function (value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.isStopped = true;\n            _super.prototype.unsubscribe.call(this);\n            this.destination = null;\n        }\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    Subscriber.prototype._complete = function () {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar _bind = Function.prototype.bind;\nfunction bind(fn, thisArg) {\n    return _bind.call(fn, thisArg);\n}\nvar ConsumerObserver = (function () {\n    function ConsumerObserver(partialObserver) {\n        this.partialObserver = partialObserver;\n    }\n    ConsumerObserver.prototype.next = function (value) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.next) {\n            try {\n                partialObserver.next(value);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    ConsumerObserver.prototype.error = function (err) {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.error) {\n            try {\n                partialObserver.error(err);\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n        else {\n            handleUnhandledError(err);\n        }\n    };\n    ConsumerObserver.prototype.complete = function () {\n        var partialObserver = this.partialObserver;\n        if (partialObserver.complete) {\n            try {\n                partialObserver.complete();\n            }\n            catch (error) {\n                handleUnhandledError(error);\n            }\n        }\n    };\n    return ConsumerObserver;\n}());\nvar SafeSubscriber = (function (_super) {\n    __extends(SafeSubscriber, _super);\n    function SafeSubscriber(observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        var partialObserver;\n        if (isFunction(observerOrNext) || !observerOrNext) {\n            partialObserver = {\n                next: (observerOrNext !== null && observerOrNext !== void 0 ? observerOrNext : undefined),\n                error: error !== null && error !== void 0 ? error : undefined,\n                complete: complete !== null && complete !== void 0 ? complete : undefined,\n            };\n        }\n        else {\n            var context_1;\n            if (_this && config.useDeprecatedNextContext) {\n                context_1 = Object.create(observerOrNext);\n                context_1.unsubscribe = function () { return _this.unsubscribe(); };\n                partialObserver = {\n                    next: observerOrNext.next && bind(observerOrNext.next, context_1),\n                    error: observerOrNext.error && bind(observerOrNext.error, context_1),\n                    complete: observerOrNext.complete && bind(observerOrNext.complete, context_1),\n                };\n            }\n            else {\n                partialObserver = observerOrNext;\n            }\n        }\n        _this.destination = new ConsumerObserver(partialObserver);\n        return _this;\n    }\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\nfunction handleUnhandledError(error) {\n    if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(error);\n    }\n    else {\n        reportUnhandledError(error);\n    }\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    var onStoppedNotification = config.onStoppedNotification;\n    onStoppedNotification && timeoutProvider.setTimeout(function () { return onStoppedNotification(notification, subscriber); });\n}\nexport var EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n//# sourceMappingURL=Subscriber.js.map","import { config } from '../config';\nimport { timeoutProvider } from '../scheduler/timeoutProvider';\nexport function reportUnhandledError(err) {\n    timeoutProvider.setTimeout(function () {\n        var onUnhandledError = config.onUnhandledError;\n        if (onUnhandledError) {\n            onUnhandledError(err);\n        }\n        else {\n            throw err;\n        }\n    });\n}\n//# sourceMappingURL=reportUnhandledError.js.map","import { __extends } from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function createOperatorSubscriber(destination, onNext, onComplete, onError, onFinalize) {\n    return new OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize);\n}\nvar OperatorSubscriber = (function (_super) {\n    __extends(OperatorSubscriber, _super);\n    function OperatorSubscriber(destination, onNext, onComplete, onError, onFinalize, shouldUnsubscribe) {\n        var _this = _super.call(this, destination) || this;\n        _this.onFinalize = onFinalize;\n        _this.shouldUnsubscribe = shouldUnsubscribe;\n        _this._next = onNext\n            ? function (value) {\n                try {\n                    onNext(value);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n            }\n            : _super.prototype._next;\n        _this._error = onError\n            ? function (err) {\n                try {\n                    onError(err);\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._error;\n        _this._complete = onComplete\n            ? function () {\n                try {\n                    onComplete();\n                }\n                catch (err) {\n                    destination.error(err);\n                }\n                finally {\n                    this.unsubscribe();\n                }\n            }\n            : _super.prototype._complete;\n        return _this;\n    }\n    OperatorSubscriber.prototype.unsubscribe = function () {\n        var _a;\n        if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {\n            var closed_1 = this.closed;\n            _super.prototype.unsubscribe.call(this);\n            !closed_1 && ((_a = this.onFinalize) === null || _a === void 0 ? void 0 : _a.call(this));\n        }\n    };\n    return OperatorSubscriber;\n}(Subscriber));\nexport { OperatorSubscriber };\n//# sourceMappingURL=OperatorSubscriber.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function filter(predicate, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) { return predicate.call(thisArg, value, index++) && subscriber.next(value); }));\n    });\n}\n//# sourceMappingURL=filter.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function map(project, thisArg) {\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            subscriber.next(project.call(thisArg, value, index++));\n        }));\n    });\n}\n//# sourceMappingURL=map.js.map","import { createOperatorSubscriber } from './OperatorSubscriber';\nexport function scanInternals(accumulator, seed, hasSeed, emitOnNext, emitBeforeComplete) {\n    return function (source, subscriber) {\n        var hasState = hasSeed;\n        var state = seed;\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var i = index++;\n            state = hasState\n                ?\n                    accumulator(state, value, i)\n                :\n                    ((hasState = true), value);\n            emitOnNext && subscriber.next(state);\n        }, emitBeforeComplete &&\n            (function () {\n                hasState && subscriber.next(state);\n                subscriber.complete();\n            })));\n    };\n}\n//# sourceMappingURL=scanInternals.js.map","export function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map","import { reduce } from './reduce';\nimport { operate } from '../util/lift';\nvar arrReducer = function (arr, value) { return (arr.push(value), arr); };\nexport function toArray() {\n    return operate(function (source, subscriber) {\n        reduce(arrReducer, [])(source).subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=toArray.js.map","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","import { LiveChannelScope, isLiveChannelMessageEvent } from '@grafana/data';\nimport { getBackendSrv, getGrafanaLiveSrv, logDebug } from '@grafana/runtime';\nimport { useState, useCallback, useEffect } from 'react';\nimport { useAsync } from 'react-use';\nimport { pipe } from 'rxjs';\nimport { filter, map, scan, tap, takeWhile, toArray } from 'rxjs/operators';\nimport { v4 } from 'uuid';\nimport { LLM_PLUGIN_ID, LLM_PLUGIN_ROUTE, setLLMPluginVersion } from './constants.mjs';\n\nconst LLM_CHAT_COMPLETIONS_PATH = \"llm/v1/chat/completions\";\nvar Model = /* @__PURE__ */ ((Model2) => {\n  Model2[\"BASE\"] = \"base\";\n  Model2[\"LARGE\"] = \"large\";\n  return Model2;\n})(Model || {});\nfunction isContentMessage(message) {\n  return \"content\" in message;\n}\nfunction isDoneMessage(message) {\n  return \"done\" in message && message.done != null;\n}\nfunction isErrorResponse(response) {\n  return \"error\" in response;\n}\nfunction isFunctionCallMessage(message) {\n  return \"name\" in message && \"arguments\" in message;\n}\nfunction isToolCallsMessage(message) {\n  return \"tool_calls\" in message && message.tool_calls != null;\n}\nfunction extractContent() {\n  return pipe(\n    filter(\n      (response) => response.choices.length > 0 && isContentMessage(response.choices[0].delta)\n    ),\n    // The type assertion is needed here because the type predicate above doesn't seem to propagate.\n    map(\n      (response) => response.choices[0].delta.content\n    )\n  );\n}\nfunction accumulateContent() {\n  return pipe(\n    extractContent(),\n    scan((acc, curr) => acc + curr, \"\")\n  );\n}\nasync function chatCompletions(request) {\n  const response = await getBackendSrv().post(\n    `/api/plugins/grafana-llm-app/resources/${LLM_CHAT_COMPLETIONS_PATH}`,\n    request,\n    {\n      headers: { \"Content-Type\": \"application/json\" }\n    }\n  );\n  return response;\n}\nfunction streamChatCompletions(request) {\n  const channel = {\n    scope: LiveChannelScope.Plugin,\n    namespace: LLM_PLUGIN_ID,\n    path: LLM_CHAT_COMPLETIONS_PATH + \"/\" + v4(),\n    data: request\n  };\n  const messages = getGrafanaLiveSrv().getStream(channel).pipe(filter((event) => isLiveChannelMessageEvent(event)));\n  return messages.pipe(\n    // Filter out messages that don't have the expected structure\n    filter((event) => {\n      if (!event.message.choices) {\n        return false;\n      }\n      return true;\n    }),\n    tap((event) => {\n      if (isErrorResponse(event.message)) {\n        throw new Error(event.message.error);\n      }\n    }),\n    // Stop the stream when we get a done message or when the finish_reason is \"stop\"\n    takeWhile((event) => {\n      if (isErrorResponse(event.message)) {\n        return true;\n      }\n      if (event.message.choices && event.message.choices[0].delta && \"done\" in event.message.choices[0].delta && event.message.choices[0].delta.done === true) {\n        return false;\n      }\n      if (event.message.choices && \"finish_reason\" in event.message.choices[0] && event.message.choices[0].finish_reason === \"stop\") {\n        return false;\n      }\n      return true;\n    }),\n    map((event) => event.message)\n  );\n}\nlet loggedWarning = false;\nconst health = async () => {\n  try {\n    const settings = await getBackendSrv().get(\n      `${LLM_PLUGIN_ROUTE}/settings`,\n      void 0,\n      void 0,\n      {\n        showSuccessAlert: false,\n        showErrorAlert: false\n      }\n    );\n    if (!settings.enabled) {\n      return {\n        configured: false,\n        ok: false,\n        error: \"The Grafana LLM plugin is not enabled.\"\n      };\n    }\n  } catch (e) {\n    logDebug(String(e));\n    logDebug(\n      \"Failed to check if LLM provider is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n    );\n    loggedWarning = true;\n    return {\n      configured: false,\n      ok: false,\n      error: \"The Grafana LLM plugin is not installed.\"\n    };\n  }\n  let response;\n  try {\n    response = await getBackendSrv().get(\n      `${LLM_PLUGIN_ROUTE}/health`,\n      void 0,\n      void 0,\n      {\n        showSuccessAlert: false,\n        showErrorAlert: false\n      }\n    );\n  } catch (e) {\n    if (!loggedWarning) {\n      logDebug(String(e));\n      logDebug(\n        \"Failed to check if LLM provider is enabled. This is expected if the Grafana LLM plugin is not installed, and the above error can be ignored.\"\n      );\n      loggedWarning = true;\n    }\n    return {\n      configured: false,\n      ok: false,\n      error: \"The Grafana LLM plugin is not installed.\"\n    };\n  }\n  const { details } = response;\n  if (details?.version !== void 0) {\n    setLLMPluginVersion(details.version);\n  }\n  if (details?.llmProvider === void 0) {\n    return {\n      configured: false,\n      ok: false,\n      error: \"The Grafana LLM plugin is outdated; please update it.\"\n    };\n  }\n  return typeof details.llmProvider === \"boolean\" ? { configured: details.llmProvider, ok: details.llmProvider } : details.llmProvider;\n};\nconst enabled = async () => {\n  const healthDetails = await health();\n  return healthDetails.configured && healthDetails.ok;\n};\nvar StreamStatus = /* @__PURE__ */ ((StreamStatus2) => {\n  StreamStatus2[\"IDLE\"] = \"idle\";\n  StreamStatus2[\"GENERATING\"] = \"generating\";\n  StreamStatus2[\"COMPLETED\"] = \"completed\";\n  return StreamStatus2;\n})(StreamStatus || {});\nconst TIMEOUT = 1e4;\nfunction useLLMStream(model = \"large\" /* LARGE */, temperature = 1, notifyError = () => {\n}) {\n  const [messages, setMessages] = useState([]);\n  const [reply, setReply] = useState(\"\");\n  const [streamStatus, setStreamStatus] = useState(\n    \"idle\" /* IDLE */\n  );\n  const [error, setError] = useState();\n  const onError = useCallback(\n    (e) => {\n      setStreamStatus(\"idle\" /* IDLE */);\n      setMessages([]);\n      setError(e);\n      notifyError(\n        \"Failed to generate content using LLM provider\",\n        `Please try again or if the problem persists, contact your organization admin.`\n      );\n      console.error(e);\n    },\n    [notifyError]\n  );\n  const { error: enabledError, value: isEnabled } = useAsync(\n    async () => await enabled(),\n    [enabled]\n  );\n  const { error: asyncError, value } = useAsync(async () => {\n    if (!isEnabled || !messages.length) {\n      return { enabled: isEnabled };\n    }\n    setStreamStatus(\"generating\" /* GENERATING */);\n    setError(void 0);\n    const stream = streamChatCompletions({\n      model,\n      temperature,\n      messages\n    }).pipe(\n      // Accumulate the stream content into a stream of strings, where each\n      // element contains the accumulated message so far.\n      accumulateContent()\n      // The stream is just a regular Observable, so we can use standard rxjs\n      // functionality to update state, e.g. recording when the stream\n      // has completed.\n      // The operator decision tree on the rxjs website is a useful resource:\n      // https://rxjs.dev/operator-decision-tree.)\n    );\n    return {\n      enabled: isEnabled,\n      stream: stream.subscribe({\n        next: setReply,\n        error: onError,\n        complete: () => {\n          setStreamStatus(\"completed\" /* COMPLETED */);\n          setTimeout(() => {\n            setStreamStatus(\"idle\" /* IDLE */);\n          });\n          setMessages([]);\n          setError(void 0);\n        }\n      })\n    };\n  }, [messages, isEnabled]);\n  useEffect(() => {\n    return () => {\n      if (value?.stream) {\n        value.stream.unsubscribe();\n      }\n    };\n  }, [value]);\n  useEffect(() => {\n    let timeout;\n    if (streamStatus === \"generating\" /* GENERATING */ && reply === \"\") {\n      timeout = setTimeout(() => {\n        onError(new Error(`LLM stream timed out after ${TIMEOUT}ms`));\n      }, TIMEOUT);\n    }\n    return () => {\n      timeout && clearTimeout(timeout);\n    };\n  }, [streamStatus, reply, onError]);\n  if (asyncError || enabledError) {\n    setError(asyncError || enabledError);\n  }\n  return {\n    setMessages,\n    reply,\n    streamStatus,\n    error,\n    value\n  };\n}\nfunction accumulateToolCalls() {\n  return pipe(\n    filter(\n      (response) => isToolCallsMessage(response.choices[0].delta)\n    ),\n    // Collect all tool call chunks\n    toArray(),\n    // Process the array to reconstruct the complete tool call message\n    map((responses) => {\n      const toolCallChunks = responses.map(\n        (r) => r.choices[0].delta\n      );\n      return recoverToolCallMessage(toolCallChunks);\n    })\n  );\n}\nfunction recoverToolCallMessage(toolCallMessages) {\n  const recoveredToolCallMessage = {\n    role: \"assistant\",\n    tool_calls: []\n  };\n  for (const msg of toolCallMessages) {\n    for (const tc of msg.tool_calls) {\n      if (tc.index >= recoveredToolCallMessage.tool_calls.length) {\n        recoveredToolCallMessage.tool_calls.push({\n          ...tc,\n          function: { ...tc.function, arguments: tc.function.arguments ?? \"\" }\n        });\n      } else {\n        recoveredToolCallMessage.tool_calls[tc.index].function.arguments += tc.function.arguments ?? \"\";\n      }\n    }\n  }\n  for (const tc of recoveredToolCallMessage.tool_calls) {\n    if (!tc.function.arguments) {\n      tc.function.arguments = \"{}\";\n    }\n  }\n  return recoveredToolCallMessage;\n}\n\nexport { Model, StreamStatus, TIMEOUT, accumulateContent, accumulateToolCalls, chatCompletions, enabled, extractContent, health, isContentMessage, isDoneMessage, isErrorResponse, isFunctionCallMessage, isToolCallsMessage, recoverToolCallMessage, streamChatCompletions, useLLMStream };\n//# sourceMappingURL=llm.mjs.map\n","import { operate } from '../util/lift';\nimport { scanInternals } from './scanInternals';\nexport function scan(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, true));\n}\n//# sourceMappingURL=scan.js.map","import { isFunction } from '../util/isFunction';\nimport { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nimport { identity } from '../util/identity';\nexport function tap(observerOrNext, error, complete) {\n    var tapObserver = isFunction(observerOrNext) || error || complete\n        ?\n            { next: observerOrNext, error: error, complete: complete }\n        : observerOrNext;\n    return tapObserver\n        ? operate(function (source, subscriber) {\n            var _a;\n            (_a = tapObserver.subscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n            var isUnsub = true;\n            source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n                var _a;\n                (_a = tapObserver.next) === null || _a === void 0 ? void 0 : _a.call(tapObserver, value);\n                subscriber.next(value);\n            }, function () {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.complete) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                subscriber.complete();\n            }, function (err) {\n                var _a;\n                isUnsub = false;\n                (_a = tapObserver.error) === null || _a === void 0 ? void 0 : _a.call(tapObserver, err);\n                subscriber.error(err);\n            }, function () {\n                var _a, _b;\n                if (isUnsub) {\n                    (_a = tapObserver.unsubscribe) === null || _a === void 0 ? void 0 : _a.call(tapObserver);\n                }\n                (_b = tapObserver.finalize) === null || _b === void 0 ? void 0 : _b.call(tapObserver);\n            }));\n        })\n        :\n            identity;\n}\n//# sourceMappingURL=tap.js.map","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function takeWhile(predicate, inclusive) {\n    if (inclusive === void 0) { inclusive = false; }\n    return operate(function (source, subscriber) {\n        var index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, function (value) {\n            var result = predicate(value, index++);\n            (result || inclusive) && subscriber.next(value);\n            !result && subscriber.complete();\n        }));\n    });\n}\n//# sourceMappingURL=takeWhile.js.map","import { scanInternals } from './scanInternals';\nimport { operate } from '../util/lift';\nexport function reduce(accumulator, seed) {\n    return operate(scanInternals(accumulator, seed, arguments.length >= 2, false, true));\n}\n//# sourceMappingURL=reduce.js.map","import React from 'react';\n\nimport { Badge, Button, Divider, Field, FieldSet, Input, Label, Select } from '@grafana/ui';\nimport { openai } from '@grafana/llm';\n\nimport { ProviderType } from './AppConfig';\n\nexport type ModelMapping = Partial<Record<openai.Model, string>>;\n\nexport interface ModelSettings {\n  default?: openai.Model;\n  mapping: ModelMapping;\n}\n\nexport interface ModelMappingConfig {\n  id: openai.Model;\n  name: string;\n  label: string;\n  description: string;\n}\nconst DEFAULT_MODEL_ID = openai.Model.BASE;\nfunction defaultModelMappingConfig(provider: ProviderType): ModelMappingConfig[] {\n  return provider === 'anthropic'\n    ? [\n        {\n          id: openai.Model.BASE,\n          name: 'claude-4-sonnet-20250514',\n          label: 'Base',\n          description: 'An effective, balanced model, suitable for most tasks.',\n        },\n        {\n          id: openai.Model.LARGE,\n          name: 'claude-4-sonnet-20250514',\n          label: 'Large',\n          description: 'An effective, balanced model, suitable for most tasks.',\n        },\n      ]\n    : [\n        {\n          id: openai.Model.BASE,\n          name: 'gpt-4.1-mini',\n          label: 'Base',\n          description: 'A fast and cost-effective model for efficient, high-throughput tasks.',\n        },\n        {\n          id: openai.Model.LARGE,\n          name: 'gpt-4.1',\n          label: 'Large',\n          description: 'A larger, higher cost model for more advanced tasks with longer context windows.',\n        },\n      ];\n}\n\nconst initModelSettings = (\n  provider: ProviderType,\n  settings: ModelSettings,\n  defaultModelMapping: ModelMappingConfig[]\n): ModelSettings => {\n  return {\n    default: settings.default ?? DEFAULT_MODEL_ID,\n    // If the settings are empty, set the default models\n    // If the settings are not empty, filter out any models that are not in the default list\n    mapping: settings.mapping\n      ? (Object.fromEntries(\n          Object.entries(settings.mapping).filter(([m, _]) => defaultModelMapping.find((d) => d.id === m))\n        ) as ModelMapping)\n      : (Object.fromEntries(defaultModelMapping.map((entry) => [entry.id, entry.name])) as ModelMapping),\n  };\n};\n\nexport function ModelConfig({\n  provider,\n  settings,\n  onChange,\n}: {\n  provider: ProviderType;\n  settings: ModelSettings;\n  onChange: (settings: ModelSettings) => void;\n}) {\n  const defaultModelMapping = defaultModelMappingConfig(provider);\n  settings = initModelSettings(provider, settings, defaultModelMapping);\n  const setDefault = (model: openai.Model) => onChange({ ...settings, default: model });\n\n  return (\n    <FieldSet>\n      {/*\n        Only show custom model mappings for non-Azure providers.\n        When using the Azure provider users can just customise the deployments\n        instead.\n      */}\n      {provider === 'azure' && (\n        <Field\n          label=\"Default Model\"\n          description=\"The default model is used when no model is specified in the chat request.\"\n        >\n          <Select\n            options={defaultModelMapping.map((entry) => ({ label: entry.label, value: entry.id }))}\n            width={60}\n            value={settings.default ?? DEFAULT_MODEL_ID}\n            onChange={(e) => setDefault(e.value ?? (DEFAULT_MODEL_ID as openai.Model))}\n          />\n        </Field>\n      )}\n      {provider !== 'azure' && (\n        <>\n          <Label description=\"Map custom models used for LLM features. The default model is used when no model is specified in the chat request.\">\n            Model mappings\n          </Label>\n          {defaultModelMapping.map((entry, i) => {\n            const modelSetting = settings.mapping[entry.id];\n            const isDefault = settings.default === entry.id;\n            const FieldLabel = (\n              <>\n                <Label>\n                  {entry.label}\n                  <Divider direction=\"vertical\" spacing={1} />\n                  {isDefault ? (\n                    <div style={{ margin: '1px auto' }}>\n                      <Badge text=\"Default\" color=\"blue\" />\n                    </div>\n                  ) : (\n                    <Button variant=\"secondary\" size=\"sm\" onClick={() => setDefault(entry.id)}>\n                      Set as default\n                    </Button>\n                  )}\n                </Label>\n              </>\n            );\n\n            return (\n              <Field key={i} label={FieldLabel} description={entry.description}>\n                <Input\n                  width={60}\n                  type=\"text\"\n                  name=\"model\"\n                  value={modelSetting}\n                  placeholder={entry.name}\n                  onChange={(e) => {\n                    const newModelName = e.currentTarget.value;\n                    const newMapping = {\n                      ...settings.mapping,\n                      [entry.id]: newModelName || undefined,\n                    };\n                    onChange({ ...settings, mapping: newMapping });\n                  }}\n                />\n              </Field>\n            );\n          })}\n        </>\n      )}\n    </FieldSet>\n  );\n}\n","import React, { useState, useRef, useEffect } from 'react';\nimport { Button, Spinner, Stack, TextArea } from '@grafana/ui';\nimport { useAsync } from 'react-use';\nimport { finalize, lastValueFrom, partition, startWith } from 'rxjs';\nimport { llm, mcp } from '@grafana/llm';\nimport { CallToolResultSchema } from '@modelcontextprotocol/sdk/types';\nimport { RenderedToolCall } from './types';\n\ninterface ChatMessage {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp: Date;\n}\n\ninterface DevSandboxChatProps {\n  useStream: boolean;\n  toolCalls: Map<string, RenderedToolCall>;\n  setToolCalls: (calls: Map<string, RenderedToolCall>) => void;\n}\n\n// Helper function to handle tool calls\nasync function handleToolCall(\n  fc: { function: { name: string; arguments: string }; id: string },\n  client: any,\n  toolCalls: Map<string, RenderedToolCall>,\n  setToolCalls: (calls: Map<string, RenderedToolCall>) => void,\n  messages: llm.Message[]\n) {\n  const { function: f, id } = fc;\n  console.log('f', f);\n\n  setToolCalls(new Map(toolCalls.set(id, { name: f.name, arguments: f.arguments, running: true })));\n\n  const args = JSON.parse(f.arguments);\n\n  try {\n    const response = await client.callTool({ name: f.name, arguments: args });\n    const toolResult = CallToolResultSchema.parse(response);\n    const textContent = toolResult.content\n      .filter((c) => c.type === 'text')\n      .map((c) => c.text)\n      .join('');\n    messages.push({ role: 'tool', tool_call_id: id, content: textContent });\n    setToolCalls(new Map(toolCalls.set(id, { name: f.name, arguments: f.arguments, running: false, response })));\n  } catch (e: any) {\n    const error = e.message ?? e.toString();\n    messages.push({ role: 'tool', tool_call_id: id, content: error });\n    setToolCalls(new Map(toolCalls.set(id, { name: f.name, arguments: f.arguments, running: false, error })));\n  }\n}\n\nexport function DevSandboxChat({ useStream, toolCalls, setToolCalls }: DevSandboxChatProps) {\n  const { client } = mcp.useMCPClient();\n\n  // Chat state\n  const [chatHistory, setChatHistory] = useState<ChatMessage[]>([]);\n  const [currentInput, setCurrentInput] = useState('');\n  const [isGenerating, setIsGenerating] = useState(false);\n\n  // Ref for auto-scrolling\n  const chatContainerRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when new messages are added\n  useEffect(() => {\n    if (chatContainerRef.current) {\n      chatContainerRef.current.scrollTop = chatContainerRef.current.scrollHeight;\n    }\n  }, [chatHistory]);\n\n  // Get available tools\n  const {\n    loading: toolsLoading,\n    error: toolsError,\n    value: toolsData,\n  } = useAsync(async () => {\n    const enabled = await llm.enabled();\n    if (!enabled) {\n      return { enabled: false, tools: [] };\n    }\n    const { tools } = (await client?.listTools()) ?? { tools: [] };\n    return { enabled: true, tools };\n  }, [client]);\n\n  const handleStreamingChatWithHistory = async (messages: llm.Message[], tools: any[]) => {\n    let stream = llm.streamChatCompletions({\n      model: llm.Model.LARGE,\n      messages,\n      tools: mcp.convertToolsToOpenAI(tools),\n    });\n\n    let [toolCallsStream, otherMessages] = partition(\n      stream,\n      (chunk: llm.ChatCompletionsResponse<llm.ChatCompletionsChunk>) => llm.isToolCallsMessage(chunk.choices[0].delta)\n    );\n\n    let contentMessages = otherMessages.pipe(\n      llm.accumulateContent(),\n      finalize(() => {\n        console.log('stream finalized');\n      })\n    );\n\n    // Subscribe to content updates\n    contentMessages.subscribe((content) => {\n      setChatHistory((prev) =>\n        prev.map((msg, idx) => (idx === prev.length - 1 && msg.role === 'assistant' ? { ...msg, content } : msg))\n      );\n    });\n\n    let toolCallMessages = await lastValueFrom(toolCallsStream.pipe(llm.accumulateToolCalls()));\n\n    while (toolCallMessages.tool_calls.length > 0) {\n      messages.push(toolCallMessages);\n\n      const tcs = toolCallMessages.tool_calls.filter((tc) => tc.type === 'function');\n      await Promise.all(tcs.map((fc) => handleToolCall(fc, client, toolCalls, setToolCalls, messages)));\n\n      stream = llm.streamChatCompletions({\n        model: llm.Model.LARGE,\n        messages,\n        tools: mcp.convertToolsToOpenAI(tools),\n      });\n\n      [toolCallsStream, otherMessages] = partition(\n        stream,\n        (chunk: llm.ChatCompletionsResponse<llm.ChatCompletionsChunk>) => llm.isToolCallsMessage(chunk.choices[0].delta)\n      );\n\n      const firstMessage: Partial<llm.ChatCompletionsResponse<llm.ChatCompletionsChunk>> = {\n        choices: [{ delta: { role: 'assistant', content: '' } }],\n      };\n\n      contentMessages = otherMessages.pipe(\n        //@ts-expect-error\n        startWith(firstMessage),\n        llm.accumulateContent(),\n        finalize(() => {\n          console.log('stream finalized');\n        })\n      );\n\n      contentMessages.subscribe((content) => {\n        setChatHistory((prev) =>\n          prev.map((msg, idx) => (idx === prev.length - 1 && msg.role === 'assistant' ? { ...msg, content } : msg))\n        );\n      });\n\n      toolCallMessages = await lastValueFrom(toolCallsStream.pipe(llm.accumulateToolCalls()));\n    }\n  };\n\n  const handleNonStreamingChatWithHistory = async (messages: llm.Message[], tools: any[]) => {\n    let response = await llm.chatCompletions({\n      model: llm.Model.BASE,\n      messages,\n      tools: mcp.convertToolsToOpenAI(tools),\n    });\n\n    let functionCalls = response.choices[0].message.tool_calls?.filter((tc) => tc.type === 'function') ?? [];\n\n    while (functionCalls.length > 0) {\n      messages.push(response.choices[0].message);\n      await Promise.all(functionCalls.map((fc) => handleToolCall(fc, client, toolCalls, setToolCalls, messages)));\n\n      response = await llm.chatCompletions({\n        model: llm.Model.LARGE,\n        messages,\n        tools: mcp.convertToolsToOpenAI(tools),\n      });\n      functionCalls = response.choices[0].message.tool_calls?.filter((tc) => tc.type === 'function') ?? [];\n    }\n\n    // Update the assistant message in history\n    setChatHistory((prev) =>\n      prev.map((msg, idx) =>\n        idx === prev.length - 1 && msg.role === 'assistant'\n          ? { ...msg, content: response.choices[0].message.content || '' }\n          : msg\n      )\n    );\n  };\n\n  const sendMessage = async () => {\n    if (!currentInput.trim() || isGenerating || !toolsData?.enabled) {\n      return;\n    }\n\n    const userMessage: ChatMessage = {\n      role: 'user',\n      content: currentInput.trim(),\n      timestamp: new Date(),\n    };\n\n    // Add user message to history\n    setChatHistory((prev) => [...prev, userMessage]);\n    setCurrentInput('');\n    setIsGenerating(true);\n    setToolCalls(new Map());\n\n    // Create assistant message placeholder\n    const assistantMessage: ChatMessage = {\n      role: 'assistant',\n      content: '',\n      timestamp: new Date(),\n    };\n\n    setChatHistory((prev) => [...prev, assistantMessage]);\n\n    const messages: llm.Message[] = [\n      {\n        role: 'system',\n        content:\n          'You are a helpful assistant with deep knowledge of the Grafana, Prometheus and general observability ecosystem.',\n      },\n      ...chatHistory.map((msg) => ({ role: msg.role, content: msg.content })),\n      { role: 'user', content: userMessage.content },\n    ];\n\n    try {\n      if (useStream) {\n        await handleStreamingChatWithHistory(messages, toolsData.tools);\n      } else {\n        await handleNonStreamingChatWithHistory(messages, toolsData.tools);\n      }\n    } catch (error) {\n      console.error('Error in chat completion:', error);\n      // Update the assistant message with error\n      setChatHistory((prev) =>\n        prev.map((msg, idx) =>\n          idx === prev.length - 1 && msg.role === 'assistant'\n            ? { ...msg, content: `Error: ${error instanceof Error ? error.message : 'Unknown error'}` }\n            : msg\n        )\n      );\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  if (toolsError) {\n    return <div>Error: {toolsError.message}</div>;\n  }\n\n  if (!toolsData?.enabled) {\n    return <div>LLM plugin not enabled.</div>;\n  }\n\n  return (\n    <Stack direction=\"column\" gap={3}>\n      {/* Chat history */}\n      <div\n        ref={chatContainerRef}\n        style={{\n          height: '400px',\n          overflowY: 'auto',\n          border: '1px solid var(--border-color)',\n          borderRadius: '8px',\n          padding: '16px',\n          backgroundColor: 'var(--background-color-secondary)',\n        }}\n      >\n        {chatHistory.length === 0 ? (\n          <div style={{ color: 'var(--text-color-secondary)', fontStyle: 'italic' }}>\n            Start a conversation by typing a message below...\n          </div>\n        ) : (\n          <Stack direction=\"column\" gap={1}>\n            {chatHistory.map((message, index) => (\n              <div\n                key={index}\n                style={{\n                  display: 'flex',\n                  flexDirection: 'row',\n                  marginBottom: '12px',\n                  width: '100%',\n                }}\n              >\n                <div\n                  style={{\n                    maxWidth: '90%',\n                    padding: '10px 14px',\n                    borderRadius: '12px',\n                    backgroundColor: message.role === 'user' ? '#007acc' : 'var(--background-color-primary)',\n                    color: message.role === 'user' ? 'white' : 'var(--text-color-primary)',\n                    whiteSpace: 'pre-wrap',\n                    wordBreak: 'break-word',\n                    boxShadow: '0 1px 2px rgba(0, 0, 0, 0.1)',\n                    border: message.role === 'assistant' ? '1px solid var(--border-color)' : 'none',\n                    fontSize: '14px',\n                    lineHeight: '1.4',\n                  }}\n                >\n                  {message.content ||\n                    (message.role === 'assistant' && isGenerating && index === chatHistory.length - 1 ? (\n                      <span style={{ opacity: 0.7 }}>...</span>\n                    ) : (\n                      ''\n                    ))}\n                </div>\n              </div>\n            ))}\n          </Stack>\n        )}\n      </div>\n\n      {/* Input area */}\n      <Stack direction=\"row\" gap={2}>\n        <TextArea\n          value={currentInput}\n          onChange={(e) => setCurrentInput(e.currentTarget.value)}\n          onKeyDown={handleKeyPress}\n          placeholder=\"Type your message... (Enter to send, Shift+Enter for new line)\"\n          disabled={isGenerating}\n          style={{ flex: 1 }}\n          rows={3}\n        />\n        <Button onClick={sendMessage} disabled={!currentInput.trim() || isGenerating || toolsLoading} variant=\"primary\">\n          {isGenerating ? <Spinner size=\"sm\" /> : 'Send'}\n        </Button>\n      </Stack>\n    </Stack>\n  );\n}\n","import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { Button, Field, Input, TextArea, Switch, Select } from '@grafana/ui';\n\ninterface ToolParameterFormProps {\n  schema: any; // JSON Schema object\n  onParametersChange: (parameters: Record<string, any>) => void;\n  onSubmit: () => void;\n  isLoading?: boolean;\n}\n\ninterface FormField {\n  name: string;\n  type: string;\n  required: boolean;\n  description?: string;\n  example?: any;\n  enum?: string[];\n  default?: any;\n}\n\n/**\n * Parses a JSON schema and extracts form field definitions\n */\nfunction parseSchema(schema: any): FormField[] {\n  if (!schema?.properties) {\n    return [];\n  }\n\n  const required = schema.required || [];\n  return Object.entries(schema.properties).map(([name, prop]: [string, any]) => ({\n    name,\n    type: prop.type || 'string',\n    required: required.includes(name),\n    description: prop.description,\n    example: prop.example,\n    enum: prop.enum,\n    default: prop.default,\n  }));\n}\n\nconst FormFieldComponent = React.memo(\n  ({ field, value, onChange }: { field: FormField; value: any; onChange: (value: any) => void }) => {\n    const handleChange = (newValue: any) => {\n      onChange(newValue);\n    };\n\n    const fieldProps = {\n      label: field.name,\n      description: field.description,\n      required: field.required,\n    };\n\n    // Handle enum/select fields\n    if (field.enum && field.enum.length > 0) {\n      const options = field.enum.map((option) => ({ label: option, value: option }));\n      return (\n        <Field {...fieldProps}>\n          <Select\n            options={options}\n            value={value}\n            onChange={(option) => handleChange(option?.value)}\n            placeholder={field.example ? `e.g., ${field.example}` : `Select ${field.name}...`}\n            isClearable={!field.required}\n          />\n        </Field>\n      );\n    }\n\n    // Handle different field types\n    switch (field.type) {\n      case 'boolean':\n        return (\n          <Field {...fieldProps}>\n            <Switch value={Boolean(value)} onChange={(e) => handleChange(e.currentTarget.checked)} />\n          </Field>\n        );\n\n      case 'number':\n      case 'integer':\n        return (\n          <Field {...fieldProps}>\n            <Input\n              type=\"number\"\n              value={value || ''}\n              onChange={(e) => {\n                const numValue =\n                  field.type === 'integer' ? parseInt(e.currentTarget.value, 10) : parseFloat(e.currentTarget.value);\n                handleChange(isNaN(numValue) ? undefined : numValue);\n              }}\n              placeholder={field.example ? `e.g., ${field.example}` : undefined}\n            />\n          </Field>\n        );\n\n      case 'array':\n        return (\n          <Field {...fieldProps} description={`${field.description || ''} (Enter one item per line)`}>\n            <TextArea\n              value={Array.isArray(value) ? value.join('\\n') : ''}\n              onChange={(e) => {\n                const lines = e.currentTarget.value.split('\\n').filter((line) => line.trim());\n                handleChange(lines.length > 0 ? lines : undefined);\n              }}\n              placeholder={\n                field.example\n                  ? `e.g.,\\n${Array.isArray(field.example) ? field.example.join('\\n') : field.example}`\n                  : 'Enter items, one per line'\n              }\n              rows={3}\n            />\n          </Field>\n        );\n\n      case 'object':\n        return (\n          <Field {...fieldProps} description={`${field.description || ''} (Enter valid JSON)`}>\n            <TextArea\n              value={typeof value === 'object' ? JSON.stringify(value, null, 2) : value || ''}\n              onChange={(e) => {\n                try {\n                  const parsed = JSON.parse(e.currentTarget.value);\n                  handleChange(parsed);\n                } catch {\n                  // Keep the raw value if it's not valid JSON yet\n                  handleChange(e.currentTarget.value);\n                }\n              }}\n              placeholder={\n                field.example ? `e.g.,\\n${JSON.stringify(field.example, null, 2)}` : '{\\n  \"key\": \"value\"\\n}'\n              }\n              rows={4}\n            />\n          </Field>\n        );\n\n      case 'string':\n      default:\n        // For long descriptions or if it looks like it might be multi-line, use TextArea\n        const isLongField =\n          (field.description && field.description.length > 100) ||\n          field.name.toLowerCase().includes('description') ||\n          field.name.toLowerCase().includes('query') ||\n          field.name.toLowerCase().includes('message');\n\n        if (isLongField) {\n          return (\n            <Field {...fieldProps}>\n              <TextArea\n                value={value || ''}\n                onChange={(e) => handleChange(e.currentTarget.value || undefined)}\n                placeholder={field.example ? `e.g., ${field.example}` : undefined}\n                rows={3}\n              />\n            </Field>\n          );\n        }\n\n        return (\n          <Field {...fieldProps}>\n            <Input\n              value={value || ''}\n              onChange={(e) => handleChange(e.currentTarget.value || undefined)}\n              placeholder={field.example ? `e.g., ${field.example}` : undefined}\n            />\n          </Field>\n        );\n    }\n  }\n);\n\nFormFieldComponent.displayName = 'FormFieldComponent';\n\n/**\n * A dynamic form component that generates input fields based on a JSON schema.\n * Provides a user-friendly interface for entering tool parameters.\n */\nexport function ToolParameterForm({ schema, onParametersChange, onSubmit, isLoading }: ToolParameterFormProps) {\n  // Memoize fields to prevent recreation on every render\n  const fields = useMemo(() => parseSchema(schema), [schema]);\n\n  // Initialize form data with defaults\n  const [formData, setFormData] = useState<Record<string, any>>(() => {\n    const initialData: Record<string, any> = {};\n    fields.forEach((field) => {\n      if (field.default !== undefined) {\n        initialData[field.name] = field.default;\n      }\n    });\n    return initialData;\n  });\n\n  // Update parent when form data changes - use a callback to avoid dependency issues\n  useEffect(() => {\n    // Only include fields that have values\n    const cleanedData = Object.entries(formData).reduce(\n      (acc, [key, value]) => {\n        if (value !== undefined && value !== '' && value !== null) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {} as Record<string, any>\n    );\n\n    // Use a timeout to debounce updates to parent\n    const timeoutId = setTimeout(() => {\n      onParametersChange(cleanedData);\n    }, 100);\n\n    return () => clearTimeout(timeoutId);\n  }, [formData, onParametersChange]);\n\n  const handleFieldChange = useCallback((fieldName: string, value: any) => {\n    setFormData((prev) => ({\n      ...prev,\n      [fieldName]: value,\n    }));\n  }, []);\n\n  const isFormValid = () => {\n    return fields.every((field) => {\n      if (!field.required) {\n        return true;\n      }\n      const value = formData[field.name];\n      return value !== undefined && value !== '' && value !== null;\n    });\n  };\n\n  if (fields.length === 0) {\n    return (\n      <div style={{ padding: '16px', textAlign: 'center' }}>\n        <p style={{ color: 'var(--text-color-secondary)', marginBottom: '16px' }}>This tool requires no parameters.</p>\n        <Button variant=\"primary\" onClick={onSubmit} disabled={isLoading}>\n          {isLoading ? 'Running...' : 'Run Tool'}\n        </Button>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ padding: '16px' }}>\n      <div style={{ marginBottom: '20px' }}>\n        {fields.map((field) => (\n          <div key={field.name} style={{ marginBottom: '16px' }}>\n            <FormFieldComponent\n              field={field}\n              value={formData[field.name]}\n              onChange={(value) => handleFieldChange(field.name, value)}\n            />\n          </div>\n        ))}\n      </div>\n\n      <Button variant=\"primary\" onClick={onSubmit} disabled={isLoading || !isFormValid()} style={{ width: '100%' }}>\n        {isLoading ? 'Running...' : 'Run Tool'}\n      </Button>\n\n      {!isFormValid() && (\n        <div\n          style={{\n            marginTop: '8px',\n            fontSize: '12px',\n            color: 'var(--error-color)',\n            textAlign: 'center',\n          }}\n        >\n          Please fill in all required fields\n        </div>\n      )}\n    </div>\n  );\n}\n","import React, { useState, useCallback } from 'react';\nimport { Button, Spinner, Icon, TextArea, CollapsableSection, Tab, TabsBar } from '@grafana/ui';\nimport { Tool } from '@modelcontextprotocol/sdk/types';\nimport { mcp } from '@grafana/llm';\nimport { ToolParameterForm } from './ToolParameterForm';\n\n// Tool category mapping\nconst TOOL_CATEGORIES: Record<string, string> = {\n  // Admin\n  list_teams: 'Admin',\n  list_users_by_org: 'Admin',\n  // Search\n  search_dashboards: 'Search',\n  // Dashboard\n  get_dashboard_by_uid: 'Dashboard',\n  update_dashboard: 'Dashboard',\n  get_dashboard_panel_queries: 'Dashboard',\n  // Datasources\n  list_datasources: 'Datasources',\n  get_datasource_by_uid: 'Datasources',\n  get_datasource_by_name: 'Datasources',\n  // Prometheus\n  query_prometheus: 'Prometheus',\n  list_prometheus_metric_metadata: 'Prometheus',\n  list_prometheus_metric_names: 'Prometheus',\n  list_prometheus_label_names: 'Prometheus',\n  list_prometheus_label_values: 'Prometheus',\n  // Incident\n  list_incidents: 'Incident',\n  create_incident: 'Incident',\n  add_activity_to_incident: 'Incident',\n  get_incident: 'Incident',\n  // Loki\n  query_loki_logs: 'Loki',\n  list_loki_label_names: 'Loki',\n  list_loki_label_values: 'Loki',\n  query_loki_stats: 'Loki',\n  // Alerting\n  list_alert_rules: 'Alerting',\n  get_alert_rule_by_uid: 'Alerting',\n  list_contact_points: 'Alerting',\n  // OnCall\n  list_oncall_schedules: 'OnCall',\n  get_oncall_shift: 'OnCall',\n  get_current_oncall_users: 'OnCall',\n  list_oncall_teams: 'OnCall',\n  list_oncall_users: 'OnCall',\n  // Sift\n  get_sift_investigation: 'Sift',\n  get_sift_analysis: 'Sift',\n  list_sift_investigations: 'Sift',\n  find_error_pattern_logs: 'Sift',\n  find_slow_requests: 'Sift',\n  // Pyroscope\n  list_pyroscope_label_names: 'Pyroscope',\n  list_pyroscope_label_values: 'Pyroscope',\n  list_pyroscope_profile_types: 'Pyroscope',\n  fetch_pyroscope_profile: 'Pyroscope',\n  // Asserts\n  get_assertions: 'Asserts',\n};\n\ninterface ToolInspectorProps {\n  tool: Tool;\n}\n\ninterface ToolCallResult {\n  loading: boolean;\n  success?: boolean;\n  response?: any;\n  error?: string;\n}\n\nconst ToolInspector = React.memo(({ tool }: ToolInspectorProps) => {\n  const { client } = mcp.useMCPClient();\n  const [expanded, setExpanded] = useState(false);\n  const [parametersInput, setParametersInput] = useState('{}');\n  const [formParameters, setFormParameters] = useState<any>({});\n  const [inputMode, setInputMode] = useState<'form' | 'json'>('form');\n  const [callResult, setCallResult] = useState<ToolCallResult | null>(null);\n\n  // Memoize the callback to prevent unnecessary re-renders\n  const handleFormParametersChange = useCallback((parameters: any) => {\n    setFormParameters(parameters);\n  }, []);\n\n  const handleTestTool = useCallback(async () => {\n    if (!client) {\n      return;\n    }\n\n    setCallResult({ loading: true });\n\n    try {\n      // Use parameters from form or JSON based on current mode\n      let parameters = {};\n\n      if (inputMode === 'form') {\n        parameters = formParameters;\n      } else {\n        if (parametersInput.trim()) {\n          try {\n            parameters = JSON.parse(parametersInput);\n          } catch (e) {\n            setCallResult({\n              loading: false,\n              success: false,\n              error: `Invalid JSON parameters: ${e instanceof Error ? e.message : 'Unknown error'}`,\n            });\n            return;\n          }\n        }\n      }\n\n      // Call the tool\n      const response = await client.callTool({\n        name: tool.name,\n        arguments: parameters,\n      });\n\n      setCallResult({\n        loading: false,\n        success: true,\n        response,\n      });\n    } catch (error) {\n      setCallResult({\n        loading: false,\n        success: false,\n        error: error instanceof Error ? error.message : 'Unknown error',\n      });\n    }\n  }, [client, inputMode, formParameters, parametersInput, tool.name]);\n\n  const formatSchema = (schema: any) => {\n    if (!schema) {\n      return 'No schema available';\n    }\n\n    try {\n      return JSON.stringify(schema, null, 2);\n    } catch {\n      return String(schema);\n    }\n  };\n\n  const generateExampleParameters = useCallback(() => {\n    if (!tool.inputSchema?.properties) {\n      return '{}';\n    }\n\n    const example: any = {};\n    const properties = tool.inputSchema.properties;\n\n    Object.keys(properties).forEach((key) => {\n      const prop = properties[key] as any;\n      if (prop && typeof prop === 'object') {\n        if (prop.type === 'string') {\n          example[key] = prop.example || 'example_value';\n        } else if (prop.type === 'number') {\n          example[key] = prop.example || 42;\n        } else if (prop.type === 'boolean') {\n          example[key] = prop.example || true;\n        } else if (prop.type === 'array') {\n          example[key] = prop.example || [];\n        } else if (prop.type === 'object') {\n          example[key] = prop.example || {};\n        } else {\n          example[key] = prop.example || null;\n        }\n      }\n    });\n\n    return JSON.stringify(example, null, 2);\n  }, [tool.inputSchema]);\n\n  const fillExampleParameters = useCallback(() => {\n    setParametersInput(generateExampleParameters());\n  }, [generateExampleParameters]);\n\n  return (\n    <div\n      style={{\n        border: '1px solid var(--border-color)',\n        borderRadius: '8px',\n        marginBottom: '12px',\n        backgroundColor: 'var(--background-color-primary)',\n      }}\n    >\n      {/* Tool Header */}\n      <div\n        style={{\n          padding: '12px 16px',\n          borderBottom: expanded ? '1px solid var(--border-color)' : 'none',\n          cursor: 'pointer',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n        }}\n        onClick={() => setExpanded(!expanded)}\n      >\n        <div style={{ flex: 1 }}>\n          <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\n            <code\n              style={{\n                fontWeight: 500,\n                fontSize: '15px',\n                backgroundColor: 'var(--background-color-secondary)',\n                padding: '2px 6px',\n                borderRadius: '3px',\n                border: '1px solid var(--border-color)',\n              }}\n            >\n              {tool.name}\n            </code>\n            {tool.annotations?.title && tool.annotations.title !== tool.name && (\n              <span style={{ fontSize: '14px', color: 'var(--text-color-secondary)' }}>({tool.annotations.title})</span>\n            )}\n          </div>\n          {tool.description && (\n            <div\n              style={{\n                fontSize: '13px',\n                color: 'var(--text-color-secondary)',\n                lineHeight: '1.4',\n                marginBottom: '4px',\n              }}\n            >\n              {tool.description}\n            </div>\n          )}\n          {/* Additional metadata */}\n          <div style={{ display: 'flex', gap: '12px', fontSize: '12px', color: 'var(--text-color-secondary)' }}>\n            {(() => {\n              const properties = tool.inputSchema?.properties;\n              const paramCount =\n                properties && typeof properties === 'object' && properties !== null\n                  ? Object.keys(properties).length\n                  : 0;\n              return paramCount > 0 ? <span>Parameters: {paramCount}</span> : null;\n            })()}\n            {(() => {\n              const required = tool.inputSchema?.required;\n              const requiredCount = Array.isArray(required) ? required.length : 0;\n              return requiredCount > 0 ? <span>Required: {requiredCount}</span> : null;\n            })()}\n          </div>\n        </div>\n        <Icon name={expanded ? 'angle-up' : 'angle-down'} />\n      </div>\n\n      {/* Expanded Content */}\n      {expanded && (\n        <div style={{ padding: '16px' }}>\n          {/* Tool Schema */}\n          <div style={{ marginBottom: '20px' }}>\n            <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>Input Schema</h4>\n            <pre\n              style={{\n                backgroundColor: 'var(--background-color-secondary)',\n                padding: '12px',\n                borderRadius: '4px',\n                fontSize: '12px',\n                lineHeight: '1.4',\n                overflow: 'auto',\n                maxHeight: '200px',\n                border: '1px solid var(--border-color)',\n              }}\n            >\n              {formatSchema(tool.inputSchema)}\n            </pre>\n          </div>\n\n          {/* Parameter Input */}\n          <div style={{ marginBottom: '16px' }}>\n            <div style={{ marginBottom: '12px' }}>\n              <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>Test Parameters</h4>\n              <TabsBar>\n                <Tab label=\"Form\" active={inputMode === 'form'} onChangeTab={() => setInputMode('form')} />\n                <Tab label=\"JSON\" active={inputMode === 'json'} onChangeTab={() => setInputMode('json')} />\n              </TabsBar>\n            </div>\n\n            {inputMode === 'form' ? (\n              <ToolParameterForm\n                schema={tool.inputSchema}\n                onParametersChange={handleFormParametersChange}\n                onSubmit={handleTestTool}\n                isLoading={callResult?.loading}\n              />\n            ) : (\n              <div>\n                <div\n                  style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    marginBottom: '8px',\n                  }}\n                >\n                  <span style={{ fontSize: '12px', color: 'var(--text-color-secondary)' }}>JSON Mode</span>\n                  <Button\n                    variant=\"secondary\"\n                    size=\"sm\"\n                    onClick={fillExampleParameters}\n                    disabled={!tool.inputSchema?.properties}\n                  >\n                    Fill Example\n                  </Button>\n                </div>\n                <TextArea\n                  value={parametersInput}\n                  onChange={(e) => setParametersInput(e.currentTarget.value)}\n                  placeholder=\"Enter JSON parameters for testing...\"\n                  rows={4}\n                  style={{ fontFamily: 'monospace', fontSize: '12px' }}\n                />\n                <div style={{ marginTop: '12px' }}>\n                  <Button\n                    variant=\"primary\"\n                    size=\"sm\"\n                    onClick={handleTestTool}\n                    disabled={callResult?.loading || !client}\n                  >\n                    {callResult?.loading ? <Spinner size=\"sm\" /> : 'Test Tool'}\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Call Result */}\n          {callResult && !callResult.loading && (\n            <div style={{ marginTop: '16px' }}>\n              <h4 style={{ margin: '0 0 8px 0', fontSize: '14px' }}>\n                Result{' '}\n                {callResult.success ? (\n                  <Icon name=\"check\" style={{ color: 'var(--success-color)', marginLeft: '8px' }} />\n                ) : (\n                  <Icon name=\"exclamation-triangle\" style={{ color: 'var(--error-color)', marginLeft: '8px' }} />\n                )}\n              </h4>\n\n              {callResult.error ? (\n                <div\n                  style={{\n                    backgroundColor: 'var(--error-background)',\n                    color: 'var(--error-text-color)',\n                    padding: '12px',\n                    borderRadius: '4px',\n                    fontSize: '13px',\n                  }}\n                >\n                  {callResult.error}\n                </div>\n              ) : (\n                <pre\n                  style={{\n                    backgroundColor: 'var(--background-color-secondary)',\n                    padding: '12px',\n                    borderRadius: '4px',\n                    fontSize: '12px',\n                    lineHeight: '1.4',\n                    overflow: 'auto',\n                    maxHeight: '300px',\n                    border: '1px solid var(--border-color)',\n                  }}\n                >\n                  {JSON.stringify(callResult.response, null, 2)}\n                </pre>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n});\n\nToolInspector.displayName = 'ToolInspector';\n\ninterface DevSandboxToolInspectorProps {\n  tools: Tool[];\n}\n\nexport function DevSandboxToolInspector({ tools }: DevSandboxToolInspectorProps) {\n  const [searchFilter, setSearchFilter] = useState('');\n\n  // Memoize filtered tools to prevent recalculation on every render\n  const filteredTools = React.useMemo(() => {\n    const searchLower = searchFilter.toLowerCase();\n    return tools.filter((tool) => {\n      const name = tool.name.toLowerCase();\n      const title = (tool.annotations?.title ?? '').toLowerCase();\n      const description = (tool.description || '').toLowerCase();\n      return name.includes(searchLower) || title.includes(searchLower) || description.includes(searchLower);\n    });\n  }, [tools, searchFilter]);\n\n  // Memoize grouped tools\n  const { groupedTools, sortedCategories } = React.useMemo(() => {\n    const grouped = filteredTools.reduce(\n      (groups, tool) => {\n        const category = TOOL_CATEGORIES[tool.name] || 'Ungrouped';\n        if (!groups[category]) {\n          groups[category] = [];\n        }\n        groups[category].push(tool);\n        return groups;\n      },\n      {} as Record<string, Tool[]>\n    );\n\n    // Sort categories with Ungrouped at the end\n    const sorted = Object.keys(grouped).sort((a, b) => {\n      if (a === 'Ungrouped') {\n        return 1;\n      }\n      if (b === 'Ungrouped') {\n        return -1;\n      }\n      return a.localeCompare(b);\n    });\n\n    return { groupedTools: grouped, sortedCategories: sorted };\n  }, [filteredTools]);\n\n  if (tools.length === 0) {\n    return (\n      <div\n        style={{\n          color: 'var(--text-color-secondary)',\n          fontStyle: 'italic',\n          textAlign: 'center',\n          padding: '24px',\n        }}\n      >\n        No MCP tools available\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Search Filter */}\n      <div style={{ marginBottom: '16px' }}>\n        <input\n          type=\"text\"\n          placeholder=\"Search tools...\"\n          value={searchFilter}\n          onChange={(e) => setSearchFilter(e.target.value)}\n          style={{\n            width: '100%',\n            padding: '8px 12px',\n            border: '1px solid var(--border-color)',\n            borderRadius: '4px',\n            backgroundColor: 'var(--background-color-primary)',\n            fontSize: '14px',\n          }}\n        />\n      </div>\n\n      {/* Tools List */}\n      <div>\n        {filteredTools.length === 0 ? (\n          <div\n            style={{\n              color: 'var(--text-color-secondary)',\n              fontStyle: 'italic',\n              textAlign: 'center',\n              padding: '24px',\n            }}\n          >\n            No tools match your search\n          </div>\n        ) : (\n          sortedCategories.map((category) => (\n            <CollapsableSection key={category} label={`${category} (${groupedTools[category].length})`} isOpen={true}>\n              <div style={{ marginTop: '8px' }}>\n                {groupedTools[category].map((tool) => (\n                  <ToolInspector key={tool.name} tool={tool} />\n                ))}\n              </div>\n            </CollapsableSection>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","import React, { Suspense, useState } from 'react';\nimport { Button, Checkbox, FieldSet, LoadingPlaceholder, Modal, Tab, TabsBar } from '@grafana/ui';\nimport { useAsync } from 'react-use';\nimport { llm, mcp } from '@grafana/llm';\nimport { DevSandboxChat } from './DevSandboxChat';\nimport { RenderedToolCall } from './types';\nimport { DevSandboxToolInspector } from './DevSandboxToolInspector';\n\ntype SandboxTab = 'chat' | 'tools';\n\nfunction DevSandboxContent() {\n  const { client } = mcp.useMCPClient();\n  const [activeTab, setActiveTab] = useState<SandboxTab>('chat');\n\n  // Main state\n  const [useStream, setUseStream] = useState(true);\n  const [toolCalls, setToolCalls] = useState<Map<string, RenderedToolCall>>(new Map());\n\n  // Get available tools\n  const {\n    loading: _,\n    error: toolsError,\n    value: toolsData,\n  } = useAsync(async () => {\n    const enabled = await llm.enabled();\n    if (!enabled) {\n      return { enabled: false, tools: [] };\n    }\n    const { tools } = (await client?.listTools()) ?? { tools: [] };\n    return { enabled: true, tools };\n  }, [client]);\n\n  if (toolsError) {\n    return <div>Error: {toolsError.message}</div>;\n  }\n\n  if (!toolsData?.enabled) {\n    return <div>LLM plugin not enabled.</div>;\n  }\n\n  return (\n    <>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n        <TabsBar>\n          <Tab label=\"Chat\" active={activeTab === 'chat'} onChangeTab={() => setActiveTab('chat')} />\n          <Tab\n            label=\"Tool Inspector\"\n            active={activeTab === 'tools'}\n            onChangeTab={() => setActiveTab('tools')}\n            counter={toolsData?.tools?.length || 0}\n          />\n        </TabsBar>\n        {activeTab === 'chat' && (\n          <Checkbox label=\"Streaming\" value={useStream} onChange={(e) => setUseStream(e.currentTarget.checked)} />\n        )}\n      </div>\n\n      <div style={{ paddingTop: 10, minHeight: 400, display: 'flex', flexDirection: 'column' }}>\n        {activeTab === 'chat' && (\n          <DevSandboxChat useStream={useStream} toolCalls={toolCalls} setToolCalls={setToolCalls} />\n        )}\n        {activeTab === 'tools' && <DevSandboxToolInspector tools={toolsData?.tools || []} />}\n      </div>\n    </>\n  );\n}\n\nexport const DevSandbox = () => {\n  const [modalIsOpen, setModalIsOpen] = useState(false);\n\n  const closeModal = () => {\n    setModalIsOpen(false);\n  };\n\n  return (\n    <FieldSet label=\"Development Sandbox\">\n      <Button onClick={() => setModalIsOpen(true)}>Open development sandbox</Button>\n      <Modal title=\"Development Sandbox\" isOpen={modalIsOpen} onDismiss={closeModal}>\n        <Suspense fallback={<LoadingPlaceholder text=\"Loading MCP...\" />}>\n          <mcp.MCPClientProvider appName=\"Grafana App With Model Context Protocol\" appVersion=\"1.0.0\">\n            <DevSandboxContent />\n          </mcp.MCPClientProvider>\n        </Suspense>\n\n        <div style={{ marginTop: '16px', display: 'flex', justifyContent: 'flex-end' }}>\n          <Button variant=\"primary\" onClick={closeModal}>\n            Close\n          </Button>\n        </div>\n      </Modal>\n    </FieldSet>\n  );\n};\n","import React from 'react';\n\nimport { IconButton, InlineField, InlineFieldRow, Input, Select } from '@grafana/ui';\n\nexport type AzureModelDeployments = Array<[string, string]>;\n\nexport function AzureModelDeploymentConfig({\n  modelMapping,\n  modelNames,\n  onChange,\n}: {\n  modelMapping: AzureModelDeployments;\n  modelNames: string[];\n  onChange: (modelMapping: AzureModelDeployments) => void;\n}) {\n  return (\n    <>\n      <IconButton\n        name=\"plus\"\n        aria-label=\"Add model mapping\"\n        onClick={(e) => {\n          e.preventDefault();\n          onChange([...modelMapping, ['', '']]);\n        }}\n      />\n      {modelMapping.map(([model, deployment], i) => (\n        <ModelMappingField\n          key={i}\n          model={model}\n          deployment={deployment}\n          modelNames={modelNames}\n          onChange={(model, deployment) => {\n            onChange([...modelMapping.slice(0, i), [model, deployment], ...modelMapping.slice(i + 1)]);\n          }}\n          onRemove={() => onChange([...modelMapping.slice(0, i), ...modelMapping.slice(i + 1)])}\n        />\n      ))}\n    </>\n  );\n}\n\nfunction ModelMappingField({\n  model,\n  deployment,\n  modelNames,\n  onChange,\n  onRemove,\n}: {\n  model: string;\n  deployment: string;\n  modelNames: string[];\n  onChange: (model: string, deployment: string) => void;\n  onRemove: () => void;\n}): React.ReactElement {\n  return (\n    <InlineFieldRow>\n      <InlineField label=\"Model\">\n        <Select\n          placeholder=\"model label\"\n          options={modelNames.filter((n) => n !== deployment && n !== '').map((value) => ({ label: value, value }))}\n          value={model}\n          onChange={(event) => event.value !== undefined && onChange(event.value, deployment)}\n        />\n      </InlineField>\n      <InlineField label=\"Deployment\">\n        <Input\n          width={40}\n          name=\"AzureDeployment\"\n          placeholder=\"deployment name\"\n          value={deployment}\n          onChange={(event) => event.currentTarget.value !== undefined && onChange(model, event.currentTarget.value)}\n        />\n      </InlineField>\n      <IconButton\n        name=\"trash-alt\"\n        aria-label=\"Remove model mapping\"\n        onClick={(e) => {\n          e.preventDefault();\n          onRemove();\n        }}\n      />\n    </InlineFieldRow>\n  );\n}\n","import React, { ChangeEvent, useEffect, useState } from 'react';\n\nimport { openai } from '@grafana/llm';\nimport { Checkbox, Field, FieldSet, Input, SecretInput, Select, Stack, useStyles2 } from '@grafana/ui';\n\nimport { SelectableValue } from '@grafana/data';\nimport { testIds } from 'components/testIds';\nimport { getStyles, ProviderType, Secrets, SecretsSet } from './AppConfig';\nimport { AzureModelDeploymentConfig, AzureModelDeployments } from './AzureConfig';\n\nconst OPENAI_API_URL = 'https://api.openai.com';\nconst AZURE_OPENAI_URL_TEMPLATE = 'https://<resource-name>.openai.azure.com';\n\nexport interface OpenAISettings {\n  // The URL to reach OpenAI.\n  url?: string;\n  // The API path to append to the URL.\n  // Defaults to /v1 if not provided.\n  apiPath?: string;\n  // The organization ID for OpenAI.\n  organizationId?: string;\n  // Whether to use Azure OpenAI.\n  provider?: ProviderType;\n  // A mapping of OpenAI models to Azure deployment names.\n  azureModelMapping?: AzureModelDeployments;\n  // If the LLM features have been explicitly disabled.\n  disabled?: boolean;\n}\n\nexport function OpenAIConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n  allowCustomPath = false,\n  parentProvider,\n}: {\n  settings: OpenAISettings;\n  onChange: (settings: OpenAISettings) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  onChangeSecrets: (secrets: Secrets) => void;\n  allowCustomPath: boolean;\n  parentProvider?: ProviderType;\n}) {\n  const s = useStyles2(getStyles);\n\n  // Get the effective provider - use the stored provider, or default to 'openai' if undefined\n  const effectiveProvider = settings.provider ?? 'openai';\n\n  // Helper to update settings using the name of the HTML event.\n  const onChangeField = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange({\n      ...settings,\n      [event.currentTarget.name]:\n        event.currentTarget.type === 'checkbox' ? event.currentTarget.checked : event.currentTarget.value.trim(),\n    });\n  };\n\n  // Update settings when provider changes, set default URL for OpenAI\n  const onChangeProvider = (value: ProviderType) => {\n    onChange({\n      ...settings,\n      provider: value,\n      url: value === 'openai' ? OPENAI_API_URL : '',\n    });\n  };\n\n  // Use separate state to track whether the user has checked the useCustomPath checkbox.\n  // This is required because we don't store the checkbox state as a bool in the settings,\n  // which our onChangeField assumes we do.\n  const [useCustomPath, setUseCustomPath] = useState(settings.apiPath !== undefined);\n  useEffect(() => {\n    // When the user checks the useCustomPath checkbox we want to immediately\n    // update the apiPath field, since the empty string is a valid value;\n    // the user shouldn't have to manually modify the input field to trigger\n    // the onChange.\n    // Similarly when they uncheck the checkbox, we want to clear the apiPath field.\n    const apiPath = useCustomPath ? (settings.apiPath ?? '') : undefined;\n    onChange({\n      ...settings,\n      apiPath,\n    });\n  }, [useCustomPath]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <FieldSet>\n      {parentProvider !== 'custom' && (\n        <Field label=\"Provider\">\n          <Select\n            data-testid={testIds.appConfig.provider}\n            options={\n              [\n                { label: 'OpenAI', value: 'openai' },\n                { label: 'Azure OpenAI', value: 'azure' },\n              ] as Array<SelectableValue<ProviderType>>\n            }\n            value={effectiveProvider}\n            onChange={(e) => onChangeProvider(e.value as ProviderType)}\n            width={60}\n          />\n        </Field>\n      )}\n\n      <Field\n        label={effectiveProvider === 'azure' ? 'Azure OpenAI Language API Endpoint' : 'API URL'}\n        className={s.marginTop}\n      >\n        <Input\n          width={60}\n          name=\"url\"\n          data-testid={testIds.appConfig.openAIUrl}\n          value={effectiveProvider === 'openai' && parentProvider !== 'custom' ? OPENAI_API_URL : settings.url}\n          placeholder={\n            effectiveProvider === 'azure'\n              ? AZURE_OPENAI_URL_TEMPLATE\n              : effectiveProvider === 'openai'\n                ? OPENAI_API_URL\n                : `https://llm.domain.com`\n          }\n          onChange={onChangeField}\n          disabled={effectiveProvider === 'openai' && parentProvider !== 'custom'}\n        />\n      </Field>\n\n      {allowCustomPath && (\n        <Field\n          label=\"API Path\"\n          description=\"Customize the API path appended to the URL. Defaults to /v1 if unchecked.\"\n          className={s.marginTop}\n        >\n          <Stack direction=\"row\" gap={1} alignItems={'center'}>\n            <Checkbox\n              data-testid={testIds.appConfig.customizeOpenAIApiPath}\n              name=\"Use custom API path\"\n              value={useCustomPath}\n              onChange={(e) => setUseCustomPath(e.currentTarget.checked)}\n            />\n\n            <Input\n              width={57}\n              name=\"apiPath\"\n              data-testid={testIds.appConfig.openAIApiPath}\n              value={settings.apiPath ?? ''}\n              placeholder={useCustomPath ? '' : '/v1'}\n              onChange={onChangeField}\n              disabled={!useCustomPath}\n            />\n          </Stack>\n        </Field>\n      )}\n\n      <Field label={effectiveProvider === 'azure' ? 'Azure OpenAI Key' : 'API Key'}>\n        <SecretInput\n          width={60}\n          data-testid={testIds.appConfig.openAIKey}\n          name=\"openAIKey\"\n          value={secrets.openAIKey}\n          isConfigured={secretsSet.openAIKey ?? false}\n          placeholder={effectiveProvider === 'azure' ? '' : 'sk-...'}\n          onChange={(e) => onChangeSecrets({ ...secrets, openAIKey: e.currentTarget.value })}\n          onReset={() => onChangeSecrets({ ...secrets, openAIKey: '' })}\n        />\n      </Field>\n\n      {effectiveProvider === 'openai' && (\n        <Field label=\"API Organization ID\">\n          <Input\n            width={60}\n            name=\"organizationId\"\n            data-testid={testIds.appConfig.openAIOrganizationID}\n            value={settings.organizationId}\n            placeholder={settings.organizationId ? '' : 'org-...'}\n            onChange={onChangeField}\n          />\n        </Field>\n      )}\n\n      {effectiveProvider === 'azure' && (\n        <Field label=\"Azure OpenAI Model Mapping\" description=\"Mapping from model name to Azure deployment name.\">\n          <AzureModelDeploymentConfig\n            modelMapping={settings.azureModelMapping ?? []}\n            modelNames={Object.values(openai.Model)}\n            onChange={(azureModelMapping) =>\n              onChange({\n                ...settings,\n                azureModelMapping,\n              })\n            }\n          />\n        </Field>\n      )}\n    </FieldSet>\n  );\n}\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\n\nexport function OpenAILogo({ width, height }: { width: number; height: number }) {\n  const theme = useTheme2();\n\n  // This is the white OpenAI logo SVG from their logo pack.\n\n  // If there's a better way to include an SVG inside a Grafana Plugin, let me know!!\n  return (\n    <svg width={width} height={height} viewBox=\"0 0 320 320\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g clipPath=\"url(#clip0_10145_290560)\">\n        <path\n          d=\"M297.06 130.97C304.32 109.18 301.82 85.31 290.21 65.49C272.75 35.09 237.65 19.45 203.37 26.81C188.12 9.63002 166.21 -0.139981 143.24 1.93887e-05C108.2 -0.0799806 77.11 22.48 66.33 55.82C43.82 60.43 24.39 74.52 13.02 94.49C-4.57001 124.81 -0.560007 163.03 22.94 189.03C15.68 210.82 18.18 234.69 29.79 254.51C47.25 284.91 82.35 300.55 116.63 293.19C131.87 310.37 153.79 320.14 176.76 319.99C211.82 320.08 242.92 297.5 253.7 264.13C276.21 259.52 295.64 245.43 307.01 225.46C324.58 195.14 320.56 156.95 297.07 130.95L297.06 130.97ZM176.78 299.08C162.75 299.1 149.16 294.19 138.39 285.2C138.88 284.94 139.73 284.47 140.28 284.13L204 247.33C207.26 245.48 209.26 242.01 209.24 238.26V148.43L236.17 163.98C236.46 164.12 236.65 164.4 236.69 164.72V239.11C236.65 272.19 209.86 299.01 176.78 299.08ZM47.94 244.05C40.91 231.91 38.38 217.68 40.79 203.87C41.26 204.15 42.09 204.66 42.68 205L106.4 241.8C109.63 243.69 113.63 243.69 116.87 241.8L194.66 196.88V227.98C194.68 228.3 194.53 228.61 194.28 228.81L129.87 266C101.18 282.52 64.54 272.7 47.95 244.05H47.94ZM31.17 104.96C38.17 92.8 49.22 83.5 62.38 78.67C62.38 79.22 62.35 80.19 62.35 80.87V154.48C62.33 158.22 64.33 161.69 67.58 163.54L145.37 208.45L118.44 224C118.17 224.18 117.83 224.21 117.53 224.08L53.11 186.86C24.48 170.28 14.66 133.65 31.16 104.97L31.17 104.96ZM252.43 156.45L174.64 111.53L201.57 95.99C201.84 95.81 202.18 95.78 202.48 95.91L266.9 133.1C295.58 149.67 305.41 186.36 288.84 215.04C281.83 227.18 270.79 236.48 257.64 241.32V165.51C257.67 161.77 255.68 158.31 252.44 156.45H252.43ZM279.23 116.11C278.76 115.82 277.93 115.32 277.34 114.98L213.62 78.18C210.39 76.29 206.39 76.29 203.15 78.18L125.36 123.1V92C125.34 91.68 125.49 91.37 125.74 91.17L190.15 54.01C218.84 37.46 255.52 47.31 272.06 76.01C279.05 88.13 281.58 102.32 279.21 116.11H279.23ZM110.72 171.54L83.78 155.99C83.49 155.85 83.3 155.57 83.26 155.25V80.86C83.28 47.74 110.15 20.9 143.27 20.92C157.28 20.92 170.84 25.84 181.61 34.8C181.12 35.06 180.28 35.53 179.72 35.87L116 72.67C112.74 74.52 110.74 77.98 110.76 81.73L110.72 171.52V171.54ZM125.35 140L160 119.99L194.65 139.99V180L160 200L125.35 180V140Z\"\n          fill={theme.colors.text.primary}\n        />\n      </g>\n      <defs>\n        <clipPath id=\"clip0_10145_290560\">\n          <rect width=\"320\" height=\"320\" fill={theme.colors.text.primary} />\n        </clipPath>\n      </defs>\n    </svg>\n  );\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { Field, FieldSet, Input, SecretInput, useStyles2 } from '@grafana/ui';\n\nimport { testIds } from 'components/testIds';\nimport { getStyles, Secrets, SecretsSet } from './AppConfig';\n\nconst ANTHROPIC_API_URL = 'https://api.anthropic.com';\n\nexport interface AnthropicSettings {\n  // The URL to reach Anthropic.\n  url?: string;\n  // If the LLM features have been explicitly disabled.\n  disabled?: boolean;\n}\n\nexport function AnthropicConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: {\n  settings: AnthropicSettings;\n  onChange: (settings: AnthropicSettings) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  onChangeSecrets: (secrets: Secrets) => void;\n}) {\n  const s = useStyles2(getStyles);\n  // Helper to update settings using the name of the HTML event.\n  const onChangeField = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange({\n      ...settings,\n      [event.currentTarget.name]:\n        event.currentTarget.type === 'checkbox' ? event.currentTarget.checked : event.currentTarget.value.trim(),\n    });\n  };\n\n  return (\n    <FieldSet>\n      <Field label=\"API URL\" className={s.marginTop}>\n        <Input\n          width={60}\n          name=\"url\"\n          data-testid={testIds.appConfig.anthropicUrl}\n          value={ANTHROPIC_API_URL}\n          placeholder={ANTHROPIC_API_URL}\n          onChange={onChangeField}\n          disabled={true}\n        />\n      </Field>\n\n      <Field label=\"API Key\">\n        <SecretInput\n          width={60}\n          data-testid={testIds.appConfig.anthropicKey}\n          name=\"anthropicKey\"\n          value={secrets.anthropicKey}\n          isConfigured={secretsSet.anthropicKey ?? false}\n          placeholder={secretsSet.anthropicKey ? 'sk-ant-...' : 'not configured'}\n          onChange={(e) => onChangeSecrets({ ...secrets, anthropicKey: e.currentTarget.value })}\n          onReset={() => onChangeSecrets({ ...secrets, anthropicKey: '' })}\n        />\n      </Field>\n    </FieldSet>\n  );\n}\n","import React from 'react';\nimport { useTheme2 } from '@grafana/ui';\n\nexport function AnthropicLogo({ width, height }: { width: number; height: number }) {\n  const theme = useTheme2();\n\n  return (\n    <svg width={width} height={height} viewBox=\"0 0 92.2 65\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n      <path\n        d=\"M66.5,0H52.4l25.7,65h14.1L66.5,0z M25.7,0L0,65h14.4l5.3-13.6h26.9L51.8,65h14.4L40.5,0C40.5,0,25.7,0,25.7,0z\n        M24.3,39.3l8.8-22.8l8.8,22.8H24.3z\"\n        fill={theme.colors.text.primary}\n      />\n    </svg>\n  );\n}\n","import { css } from '@emotion/css';\nimport React, { useState } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { Badge, Button, Card, Checkbox, ConfirmModal, FieldSet, Icon, useStyles2 } from '@grafana/ui';\n\nimport { AppPluginSettings, Secrets, SecretsSet, ProviderType, getEffectiveProvider } from './AppConfig';\nimport { ModelConfig } from './ModelConfig';\nimport { DevSandbox } from './DevSandbox/DevSandbox';\nimport { OpenAIConfig } from './OpenAI';\nimport { OpenAILogo } from './OpenAILogo';\nimport { AnthropicConfig } from './AnthropicConfig';\nimport { AnthropicLogo } from './AnthropicLogo';\n\n// LLMOptions are the possible UI options for LLMs (grafana-provided cloud-only).\nexport type LLMOptions = 'grafana-provided' | 'openai' | 'test' | 'disabled' | 'unconfigured' | 'custom' | 'anthropic';\n\n// This maps the current settings to decide what UI selection (LLMOptions) to show\nfunction getLLMOptionFromSettings(settings: AppPluginSettings): LLMOptions {\n  // Backwards compatibility for disabled field\n  if (settings.disabled || settings.openAI?.disabled) {\n    return 'disabled';\n  }\n\n  const provider = getEffectiveProvider(settings);\n\n  switch (provider) {\n    case 'azure':\n    case 'openai':\n      return 'openai';\n    case 'custom':\n      return 'custom';\n    case 'test':\n      return 'test';\n    case 'grafana':\n      return 'grafana-provided';\n    case 'anthropic':\n      return 'anthropic';\n    default:\n      return 'unconfigured';\n  }\n}\n\nexport function LLMConfig({\n  settings,\n  secrets,\n  secretsSet,\n  optIn,\n  setOptIn,\n  onChange,\n  onChangeSecrets,\n}: {\n  settings: AppPluginSettings;\n  onChange: (settings: AppPluginSettings) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  optIn: boolean;\n  setOptIn: (optIn: boolean) => void;\n  onChangeSecrets: (secrets: Secrets) => void;\n}) {\n  const s = useStyles2(getStyles);\n  // should only be relevant for Grafana Cloud\n  const allowGrafanaManagedLLM = settings.enableGrafanaManagedLLM === true;\n\n  // llmOption is the currently chosen LLM option in the UI\n  const llmOption = getLLMOptionFromSettings(settings);\n\n  // previousOpenAIProvider caches the value of the openAI provider, as it is overwritten by the grafana option\n  const [previousOpenAIProvider, setPreviousOpenAIProvider] = useState<ProviderType>();\n\n  const [confirmationDialog, setConfirmationDialog] = useState<{\n    isOpen: boolean;\n    title: string;\n    message: string;\n    onConfirm: () => void;\n    onCancel: () => void;\n  } | null>(null);\n\n  const optInChange = () => {\n    setOptIn(!optIn);\n  };\n\n  const hasExistingModelConfigurations = () => {\n    const modelMapping = settings.models?.mapping;\n    return modelMapping && Object.keys(modelMapping).some((key) => modelMapping[key as keyof typeof modelMapping]);\n  };\n\n  const showProviderSwitchConfirmation = (newProvider: ProviderType, switchAction: () => void) => {\n    if (hasExistingModelConfigurations() && getEffectiveProvider(settings) !== newProvider) {\n      setConfirmationDialog({\n        isOpen: true,\n        title: 'Switch LLM Provider?',\n        message: `You have existing model configurations that may not be compatible with the new provider. Your current model mappings will be preserved, but you may need to update the model names to work with ${getProviderDisplayName(newProvider)}.`,\n        onConfirm: () => {\n          switchAction();\n          setConfirmationDialog(null);\n        },\n        onCancel: () => {\n          setConfirmationDialog(null);\n        },\n      });\n    } else {\n      switchAction();\n    }\n  };\n\n  const getProviderDisplayName = (provider: ProviderType): string => {\n    switch (provider) {\n      case 'openai':\n        return 'OpenAI';\n      case 'anthropic':\n        return 'Anthropic';\n      case 'azure':\n        return 'Azure OpenAI';\n      case 'custom':\n        return 'Custom API';\n      case 'grafana':\n        return 'Grafana-provided OpenAI';\n      case 'test':\n        return 'Test Provider';\n      default:\n        return 'the selected provider';\n    }\n  };\n\n  // Handlers for when different LLM options are chosen in the UI\n  const selectLLMDisabled = () => {\n    if (llmOption !== 'disabled') {\n      // Cache if OpenAI or Azure provider is used, so can restore\n      if (previousOpenAIProvider === undefined) {\n        setPreviousOpenAIProvider(settings.provider);\n      }\n\n      onChange({ ...settings, provider: undefined, disabled: true, openAI: { ...settings.openAI, disabled: true } });\n    }\n  };\n\n  const selectLLMTest = () => {\n    if (llmOption !== 'test') {\n      // Cache if OpenAI or Azure provider is used, so can restore\n      if (previousOpenAIProvider === undefined) {\n        setPreviousOpenAIProvider(settings.provider);\n      }\n\n      onChange({ ...settings, provider: 'test', disabled: false, openAI: { ...settings.openAI, disabled: false } });\n    }\n  };\n\n  const selectGrafanaManaged = () => {\n    if (llmOption !== 'grafana-provided') {\n      // Cache if OpenAI or Azure provider is used, so can restore\n      if (previousOpenAIProvider === undefined) {\n        setPreviousOpenAIProvider(settings.provider);\n      }\n\n      onChange({ ...settings, provider: 'grafana', disabled: false, openAI: { disabled: false } });\n    }\n  };\n\n  const selectOpenAI = () => {\n    if (llmOption !== 'openai') {\n      const switchToOpenAI = () => {\n        // Restore the provider (OpenAI or Azure) & clear the cache\n        // If the previous provider was not a valid openAI vendor, default to openai\n        // Otherwise the state would revert to the incorrect previous provider\n        if (previousOpenAIProvider === 'openai' || previousOpenAIProvider === 'azure') {\n          onChange({ ...settings, provider: previousOpenAIProvider, disabled: false, openAI: { disabled: false } });\n          setPreviousOpenAIProvider(undefined);\n        } else {\n          onChange({ ...settings, provider: 'openai', disabled: false, openAI: { disabled: false } });\n          setPreviousOpenAIProvider(undefined);\n        }\n      };\n      showProviderSwitchConfirmation('openai', switchToOpenAI);\n    }\n  };\n\n  const selectAnthropicProvider = () => {\n    if (llmOption !== 'anthropic') {\n      const switchToAnthropic = () => {\n        onChange({ ...settings, provider: 'anthropic', disabled: false });\n      };\n      showProviderSwitchConfirmation('anthropic', switchToAnthropic);\n    }\n  };\n\n  const selectCustom = () => {\n    if (llmOption !== 'custom') {\n      const switchToCustom = () => {\n        onChange({ ...settings, provider: 'custom', disabled: false, openAI: { disabled: false } });\n      };\n      showProviderSwitchConfirmation('custom', switchToCustom);\n    }\n  };\n\n  return (\n    <>\n      {settings.enableDevSandbox && <DevSandbox />}\n      <FieldSet label=\"LLM Provider Configuration\" className={s.sidePadding}>\n        {allowGrafanaManagedLLM && (\n          <div className={s.providerSection}>\n            <div className={s.sectionHeader}>\n              <h4>\n                Grafana-Provided Service{' '}\n                {llmOption === 'grafana-provided' && <Badge text=\"Currently Active\" color=\"green\" />}\n              </h4>\n            </div>\n            <div onClick={selectGrafanaManaged}>\n              <Card\n                isSelected={llmOption === 'grafana-provided'}\n                // onClick={selectGrafanaManaged} // prevents events passing to children, use parent div instead!\n                className={s.cardWithoutBottomMargin}\n              >\n                <Card.Heading>Use OpenAI provided by Grafana</Card.Heading>\n                <Card.Description>\n                  <div>Enable LLM features in Grafana by using a connection to OpenAI that is provided by Grafana</div>\n                  {llmOption === 'grafana-provided' && (\n                    <>\n                      <div className={s.openaiTermsBox}>\n                        <h4>Terms of Usage (Last updated: February 16th, 2024)</h4>\n                        <div>\n                          To enable OpenAI via Grafana Labs, please note that some data from your Grafana instance will\n                          be sent to OpenAI when you use the LLM-based features. Grafana Labs imposes usage limits for\n                          this service.\n                        </div>\n                        <div>\n                          Additionally, the following terms (&quot;AI Terms&quot;) are hereby added to and become part\n                          of your licensing agreement with Grafana Labs (the &quot;Agreement&quot;) as additional terms.\n                          Capitalized terms not defined in these AI Terms have the meanings given in the Agreement.\n                          These terms apply to your specific use of the OpenAI via Grafana Labs feature(s), and are\n                          separate, necessary terms regarding your use of this feature and therefore are not\n                          &apos;click-wrap&apos;, &apos;shrink-wrap&apos;, different or additional terms, or the like,\n                          to the extent your licensing agreement with Grafana Labs purports to supersede any such terms.\n                        </div>\n                        <ul>\n                          <li>Grafana Labs uses OpenAI&apos;s API platform to provide the LLM features.</li>\n                          <li>\n                            OpenAI does not train aggregated models on inputs or outputs of the API platform as used in\n                            connection with Grafana Labs Product(s).\n                          </li>\n                          <li>\n                            OpenAI does retain data for a short time in order to provide the services and monitor for\n                            abuse. All data sent to OpenAI is encrypted in transit and at rest.\n                          </li>\n                          <li>\n                            All features utilizing OpenAI are clearly marked in the Grafana Labs Product(s), and each\n                            feature sends minimal data to OpenAI&mdash;and only at the request of a user (for example,\n                            when a user clicks the button to request an Incident auto-summary).\n                          </li>\n                          <li>\n                            Grafana Labs will add new features regularly that utilize features connecting to\n                            OpenAI&apos;s APIs, which may include, but are not limited to:\n                            <ul>\n                              <li>Explaining Flamegraphs & offer suggestions to fix issues</li>\n                              <li>Incident auto-summary</li>\n                              <li>\n                                Suggesting names & descriptions for panels & dashboards, and summarize differences when\n                                saving changes\n                              </li>\n                              <li>Explaining error log lines in Sift</li>\n                              <li>Generating KQL queries in the Azure Data Explorer plugin</li>\n                            </ul>\n                          </li>\n                          <li>\n                            Visit the OpenAI trust portal for more detail about OpenAI:{' '}\n                            <Button\n                              size=\"sm\"\n                              variant=\"secondary\"\n                              onClick={(e: React.MouseEvent) => {\n                                window.open('https://trust.openai.com/', '_blank');\n                                e.stopPropagation();\n                              }}\n                            >\n                              https://trust.openai.com/\n                            </Button>\n                          </li>\n                          <li>\n                            If you enable this feature, OpenAI will be a subprocessor of Grafana Labs for the purpose of\n                            any data processing agreement you may have in place with Grafana Labs.\n                          </li>\n                          <li>\n                            Disclaimer. Outputs are generated through machine learning processes and are not tested,\n                            verified, endorsed or guaranteed to be accurate, complete or current by Grafana Labs. You\n                            should independently review and verify all outputs as to appropriateness for any or all of\n                            your use cases or applications. The warranties, disclaimers, and limitations of liability in\n                            the Agreement apply to the AI Features.\n                          </li>\n                        </ul>\n                      </div>\n                      <div>\n                        By clicking the &quot;I Accept&quot; button, you agree to these additional AI Terms on behalf of\n                        yourself and/or your organization. Please read these terms carefully before proceeding. If you\n                        do not agree to these terms, do not click the &quot;I Accept&quot; button.\n                      </div>\n                      <Checkbox value={optIn} onClick={optInChange} label=\"I Accept\" />\n                    </>\n                  )}\n                </Card.Description>\n                <Card.Figure>\n                  <Icon name=\"grafana\" size=\"lg\" />\n                </Card.Figure>\n              </Card>\n            </div>\n          </div>\n        )}\n        <div className={s.providerSection}>\n          <div className={s.sectionHeader}>\n            <h4>\n              Bring Your Own Service{' '}\n              {allowGrafanaManagedLLM &&\n                (llmOption === 'openai' || llmOption === 'anthropic' || llmOption === 'custom') && (\n                  <Badge text=\"Currently Active\" color=\"green\" />\n                )}\n            </h4>\n          </div>\n          <div onClick={selectOpenAI}>\n            <Card isSelected={llmOption === 'openai'} className={s.cardWithoutBottomMargin}>\n              <Card.Heading>Use OpenAI-compatible API</Card.Heading>\n              <Card.Description>\n                Enable LLM features in Grafana using OpenAI-compatible API\n                {llmOption === 'openai' && (\n                  <>\n                    <OpenAIConfig\n                      settings={settings.openAI ?? {}}\n                      onChange={(openAI) => onChange({ ...settings, openAI })}\n                      secrets={secrets}\n                      secretsSet={secretsSet}\n                      onChangeSecrets={onChangeSecrets}\n                      allowCustomPath={false}\n                      parentProvider={settings.provider}\n                    />\n                    <ModelConfig\n                      provider={settings.provider ?? 'openai'}\n                      settings={settings.models ?? { mapping: {} }}\n                      onChange={(models) => onChange({ ...settings, models })}\n                    />\n                  </>\n                )}\n              </Card.Description>\n              <Card.Figure>\n                <OpenAILogo width={20} height={20} />\n              </Card.Figure>\n            </Card>\n          </div>\n          <div onClick={selectAnthropicProvider}>\n            <Card isSelected={llmOption === 'anthropic'} className={s.cardWithoutBottomMargin}>\n              <Card.Heading>Use Anthropic API</Card.Heading>\n              <Card.Description>\n                Enable LLM features in Grafana using Anthropic&apos;s Claude models\n                {llmOption === 'anthropic' && (\n                  <>\n                    <AnthropicConfig\n                      settings={settings.anthropic ?? {}}\n                      onChange={(anthropic) => onChange({ ...settings, anthropic })}\n                      secrets={secrets}\n                      secretsSet={secretsSet}\n                      onChangeSecrets={onChangeSecrets}\n                    />\n                    <ModelConfig\n                      provider={settings.provider ?? 'anthropic'}\n                      settings={settings.models ?? { mapping: {} }}\n                      onChange={(models) => onChange({ ...settings, models })}\n                    />\n                  </>\n                )}\n              </Card.Description>\n              <Card.Figure>\n                <AnthropicLogo width={20} height={20} />\n              </Card.Figure>\n            </Card>\n          </div>\n          <div onClick={selectCustom}>\n            <Card isSelected={llmOption === 'custom'} className={s.cardWithoutBottomMargin}>\n              <Card.Heading>Use a Custom API</Card.Heading>\n              <Card.Description>\n                {'Enable LLM features in Grafana using a custom API (with \"OpenAI-like\" signature)'}\n                {llmOption === 'custom' && (\n                  <>\n                    <OpenAIConfig\n                      settings={settings.openAI ?? {}}\n                      onChange={(openAI) => onChange({ ...settings, openAI })}\n                      secrets={secrets}\n                      secretsSet={secretsSet}\n                      onChangeSecrets={onChangeSecrets}\n                      allowCustomPath={true}\n                      parentProvider={settings.provider}\n                    />\n                    <ModelConfig\n                      provider={settings.provider ?? 'custom'}\n                      settings={settings.models ?? { mapping: {} }}\n                      onChange={(models) => onChange({ ...settings, models })}\n                    />\n                  </>\n                )}\n              </Card.Description>\n              <Card.Figure>\n                <Icon name=\"ai\" size=\"lg\" />\n              </Card.Figure>\n            </Card>\n          </div>\n          {process.env.NODE_ENV === 'development' && (\n            <Card isSelected={llmOption === 'test'} className={s.cardWithoutBottomMargin} onClick={selectLLMTest}>\n              <Card.Heading>Test LLM features</Card.Heading>\n              <Card.Figure>\n                <Icon name=\"bug\" size=\"lg\" />\n              </Card.Figure>\n            </Card>\n          )}\n          <Card isSelected={llmOption === 'disabled'} onClick={selectLLMDisabled} className={s.cardWithoutBottomMargin}>\n            <Card.Heading>Disable all LLM features in Grafana</Card.Heading>\n            <Card.Description>&nbsp;</Card.Description>\n            <Card.Figure>\n              <Icon name=\"times\" size=\"lg\" />\n            </Card.Figure>\n          </Card>\n        </div>\n      </FieldSet>\n      {confirmationDialog && (\n        <ConfirmModal\n          isOpen={confirmationDialog.isOpen}\n          title={confirmationDialog.title}\n          body={confirmationDialog.message}\n          confirmText=\"Switch Provider\"\n          dismissText=\"Cancel\"\n          onConfirm={confirmationDialog.onConfirm}\n          onDismiss={confirmationDialog.onCancel}\n        />\n      )}\n    </>\n  );\n}\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  sidePadding: css`\n    margin-left: ${theme.spacing(1)};\n    margin-right: ${theme.spacing(1)};\n  `,\n  nestedList: css`\n    margin-left: ${theme.spacing(3)};\n  `,\n  openaiTermsBox: css({\n    overflowY: 'auto',\n    height: '250px',\n    marginRight: theme.spacing(3),\n    marginBottom: theme.spacing(1),\n    padding: `${theme.spacing(1)} ${theme.spacing(2)} ${theme.spacing(1)} ${theme.spacing(2)}`,\n    border: `1px solid ${theme.colors.border.medium}`,\n    background: theme.colors.background.primary,\n    color: theme.colors.text.primary,\n\n    ' ul': {\n      // space important, matches all children of type 'ul'\n      paddingLeft: theme.spacing(2),\n    },\n    '> ul > li:not(:last-child)': {\n      // slight vertical padding between main bullet points\n      marginBottom: theme.spacing(0.5),\n    },\n  }),\n  cardWithoutBottomMargin: css`\n    margin-bottom: 0;\n    margin-top: ${theme.spacing(1)};\n  `,\n  sectionHeader: css`\n    margin-top: ${theme.spacing(3)};\n    margin-bottom: ${theme.spacing(2)};\n    display: flex;\n    align-items: center;\n    gap: ${theme.spacing(1)};\n\n    h4 {\n      margin: 0;\n      color: ${theme.colors.text.primary};\n      font-weight: ${theme.typography.fontWeightMedium};\n      display: flex;\n      align-items: center;\n      gap: ${theme.spacing(1)};\n    }\n  `,\n  providerSection: css`\n    background: ${theme.colors.background.secondary};\n    border: 1px solid ${theme.colors.border.weak};\n    border-radius: ${theme.shape.borderRadius()};\n    padding: ${theme.spacing(2)};\n    margin-bottom: ${theme.spacing(2)};\n\n    &:last-child {\n      margin-bottom: 0;\n    }\n  `,\n});\n","import React from 'react';\n\nimport { InlineField, Input, SecretInput, useStyles2 } from '@grafana/ui';\n\nimport { testIds } from 'components/testIds';\nimport { Secrets, SecretsSet, getStyles } from '../AppConfig';\n\nimport { AuthSettings } from '../Vector';\n\nexport const BasicAuthConfig = ({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n  secretKey,\n}: {\n  settings?: AuthSettings;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n  onChange: (settings: AuthSettings) => void;\n  onChangeSecrets: (secrets: Secrets) => void;\n  secretKey: 'vectorEmbedderBasicAuthPassword' | 'vectorStoreBasicAuthPassword';\n}) => {\n  const s = useStyles2(getStyles);\n\n  const onPasswordReset = () => {\n    onChangeSecrets({\n      ...secrets,\n      [secretKey]: '',\n    });\n  };\n\n  const onPasswordChange = (event: React.SyntheticEvent<HTMLInputElement>) => {\n    onChangeSecrets({\n      ...secrets,\n      [secretKey]: event.currentTarget.value,\n    });\n  };\n\n  return (\n    <>\n      <InlineField label=\"User\" labelWidth={s.inlineFieldWidth}>\n        <Input\n          width={s.inlineFieldInputWidth}\n          placeholder=\"user\"\n          data-testid={testIds.appConfig.basicAuthUsername}\n          value={settings?.basicAuthUser}\n          onChange={(e) => onChange({ ...settings, basicAuthUser: e.currentTarget.value })}\n        />\n      </InlineField>\n      <InlineField label=\"Password\" labelWidth={s.inlineFieldWidth}>\n        <SecretInput\n          width={s.inlineFieldInputWidth}\n          placeholder=\"password\"\n          data-testid={testIds.appConfig.basicAuthPassword}\n          value={secrets[secretKey]}\n          isConfigured={secretsSet[secretKey] ?? false}\n          onReset={onPasswordReset}\n          onChange={onPasswordChange}\n        />\n      </InlineField>\n    </>\n  );\n};\n","import React from 'react';\n\nimport { Checkbox, Field, FieldSet, InlineField, Input, Select, useStyles2, Label, SecretInput } from '@grafana/ui';\n\nimport { testIds } from 'components/testIds';\nimport { Secrets, SecretsSet, getStyles } from './AppConfig';\n\nimport { BasicAuthConfig } from './AuthSettings/BasicAuth';\nimport { SelectableValue } from '@grafana/data';\n\nexport interface VectorSettings {\n  // Whether the vector service should be enabled.\n  enabled?: boolean;\n  // The model used by the embedder and for embeddings stored in the store.\n  model?: string;\n  // Embedder settings.\n  embed?: EmbedderSettings;\n  // Store settings.\n  store?: StoreSettings;\n}\n\nexport interface AuthSettings {\n  url?: string;\n  authType?: string;\n  basicAuthUser?: string;\n}\n\ninterface GrafanaVectorAPISettings extends AuthSettings {}\n\ninterface EmbedderSettings {\n  type?: EmbedderOptions;\n  grafanaVectorAPI?: GrafanaVectorAPISettings;\n}\n\ninterface QdrantSettings {\n  address?: string;\n  secure?: boolean;\n}\n\ninterface StoreSettings {\n  type?: string;\n  qdrant?: QdrantSettings;\n  grafanaVectorAPI?: GrafanaVectorAPISettings;\n}\n\nexport interface Props<T> {\n  settings?: T;\n  onChange: (settings: T) => void;\n}\n\ninterface SecretProps {\n  onChangeSecrets: (secrets: Secrets) => void;\n  secrets: Secrets;\n  secretsSet: SecretsSet;\n}\n\nconst OPENAI_DEFAULT_MODEL = 'text-embedding-ada-002';\nconst VECTORAPI_DEFAULT_MODEL = 'BAAI/bge-small-en-v1.5';\n\nexport function VectorConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: Props<VectorSettings> & SecretProps) {\n  // update the model value if the embedder type changes\n  React.useEffect(() => {\n    if (settings?.embed?.type === 'openai' && settings?.model !== OPENAI_DEFAULT_MODEL) {\n      onChange({ ...settings, model: OPENAI_DEFAULT_MODEL });\n    } else if (\n      settings?.embed?.type === 'grafana/vectorapi' &&\n      (settings?.model === undefined || settings?.model === OPENAI_DEFAULT_MODEL)\n    ) {\n      onChange({ ...settings, model: VECTORAPI_DEFAULT_MODEL });\n    }\n  }, [settings, settings?.embed?.type, onChange]);\n\n  return (\n    <FieldSet label=\"Vector Settings\">\n      <Field label=\"Enabled\" description=\"Enable vector database powered features.\">\n        <Checkbox\n          name=\"enabled\"\n          data-testid={testIds.appConfig.vectorEnabled}\n          value={settings?.enabled || false}\n          onChange={(e) => onChange({ ...settings, enabled: e.currentTarget.checked })}\n        />\n      </Field>\n\n      {settings?.enabled && (\n        <>\n          <Field\n            label=\"Model\"\n            description=\"The model used by the embedder and for embeddings stored in the store\"\n            disabled={settings.embed?.type === 'openai' || settings.embed?.type === undefined}\n          >\n            <Input\n              width={60}\n              name=\"model\"\n              data-testid={testIds.appConfig.model}\n              value={settings?.model}\n              placeholder={settings?.model}\n              onChange={(e) => onChange({ ...settings, model: e.currentTarget.value })}\n            />\n          </Field>\n\n          <EmbedderConfig\n            settings={settings?.embed}\n            secrets={secrets}\n            secretsSet={secretsSet}\n            onChange={(embed) => onChange({ ...settings, embed })}\n            onChangeSecrets={onChangeSecrets}\n          />\n\n          <StoreConfig\n            settings={settings?.store}\n            secrets={secrets}\n            secretsSet={secretsSet}\n            onChange={(store) => onChange({ ...settings, store })}\n            onChangeSecrets={onChangeSecrets}\n          />\n        </>\n      )}\n    </FieldSet>\n  );\n}\n\ntype EmbedderOptions = 'openai' | 'grafana/vectorapi';\n\nexport function EmbedderConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: Props<EmbedderSettings> & SecretProps) {\n  const s = useStyles2(getStyles);\n\n  return (\n    <>\n      <h4>Embedder</h4>\n      <Field label=\"Embedder Provider\" description=\"Select the embedder API to use\">\n        <>\n          <Select\n            options={\n              [\n                { label: 'OpenAI API', value: 'openai' },\n                { label: 'Grafana Vector API', value: 'grafana/vectorapi' },\n              ] as Array<SelectableValue<EmbedderOptions>>\n            }\n            placeholder=\"Select Embedder Provider\"\n            value={settings?.type}\n            width={60}\n            onChange={(e) => onChange({ type: e.value })}\n          />\n          {settings?.type === 'openai' && <Label> Using configured OpenAI as embedder provider </Label>}\n        </>\n      </Field>\n\n      {settings?.type === 'grafana/vectorapi' && (\n        <>\n          <Field label=\"Auth Type\">\n            <Select\n              options={[\n                { label: 'No Auth', value: 'no-auth' },\n                { label: 'Basic Auth', value: 'basic-auth' },\n              ]}\n              value={settings?.grafanaVectorAPI?.authType ?? 'no-auth'}\n              onChange={(e) =>\n                e.value !== undefined &&\n                onChange({ ...settings, grafanaVectorAPI: { ...settings.grafanaVectorAPI, authType: e.value } })\n              }\n              width={60}\n            />\n          </Field>\n          <InlineField label=\"URL\" tooltip=\"Address of the Grafana Vector API\" labelWidth={s.inlineFieldWidth}>\n            <Input\n              name=\"url\"\n              value={settings?.grafanaVectorAPI?.url}\n              width={s.inlineFieldInputWidth}\n              data-testid={testIds.appConfig.grafanaVectorApiUrl}\n              placeholder={'http://vectorapi:8889'}\n              onChange={(e) =>\n                onChange({\n                  ...settings,\n                  grafanaVectorAPI: { ...settings.grafanaVectorAPI, url: e.currentTarget.value },\n                })\n              }\n            />\n          </InlineField>\n          {settings?.grafanaVectorAPI?.authType === 'basic-auth' && (\n            <BasicAuthConfig\n              settings={settings.grafanaVectorAPI}\n              secrets={secrets}\n              secretsSet={secretsSet}\n              onChange={(authSettings) => onChange({ ...settings, grafanaVectorAPI: authSettings })}\n              onChangeSecrets={onChangeSecrets}\n              secretKey=\"vectorEmbedderBasicAuthPassword\"\n            />\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\nfunction QdrantConfig({\n  settings,\n  secrets,\n  secretsSet,\n  onChange,\n  onChangeSecrets,\n}: Props<QdrantSettings> & SecretProps) {\n  const s = useStyles2(getStyles);\n  return (\n    <>\n      <Field label=\"Address\" description=\"Address of the qdrant gRPC server\">\n        <Input\n          width={s.inlineFieldInputWidth}\n          name=\"url\"\n          data-testid={testIds.appConfig.qdrantAddress}\n          value={settings?.address}\n          placeholder={'localhost:6334'}\n          onChange={(e) => onChange({ ...settings, address: e.currentTarget.value })}\n        />\n      </Field>\n      <Field label=\"Secure\" description=\"Whether to use a secure connection\">\n        <Checkbox\n          name=\"secure\"\n          data-testid={testIds.appConfig.qdrantSecure}\n          checked={settings?.secure}\n          onChange={(e) => onChange({ ...settings, secure: e.currentTarget.checked })}\n        />\n      </Field>\n      {settings?.secure && (\n        <Field label=\"API key\" description=\"API key for the qdrant gRPC server\">\n          <SecretInput\n            name=\"qdrantApiKey\"\n            width={s.inlineFieldInputWidth}\n            data-testid={testIds.appConfig.qdrantApiKey}\n            onChange={(e) => onChangeSecrets({ ...secrets, qdrantApiKey: e.currentTarget.value })}\n            onReset={() => onChangeSecrets({ ...secrets, qdrantApiKey: '' })}\n            isConfigured={secretsSet.qdrantApiKey ?? false}\n            value={secrets.qdrantApiKey}\n          />\n        </Field>\n      )}\n    </>\n  );\n}\n\nfunction GrafanaVectorAPIConfig({ settings, onChange }: Props<GrafanaVectorAPISettings>) {\n  const s = useStyles2(getStyles);\n  return (\n    <>\n      <InlineField label=\"URL\" tooltip=\"Address of the Grafana Vector API\" labelWidth={s.inlineFieldWidth}>\n        <Input\n          name=\"url\"\n          value={settings?.url}\n          width={s.inlineFieldInputWidth}\n          data-testid={testIds.appConfig.grafanaVectorApiUrl}\n          placeholder={'http://vectorapi:8889'}\n          onChange={(e) => onChange({ ...settings, url: e.currentTarget.value })}\n        />\n      </InlineField>\n    </>\n  );\n}\n\nfunction StoreConfig({ settings, secrets, secretsSet, onChange, onChangeSecrets }: Props<StoreSettings> & SecretProps) {\n  return (\n    <>\n      <h4>Store</h4>\n      <Field label=\"Store Type\" description=\"The type of store\">\n        <Select\n          options={[\n            { label: 'Qdrant', value: 'qdrant' },\n            { label: 'Grafana Vector API', value: 'grafana/vectorapi' },\n          ]}\n          value={settings?.type}\n          onChange={(e) =>\n            e.value !== undefined &&\n            onChange({ ...settings, type: e.value, qdrant: undefined, grafanaVectorAPI: undefined })\n          }\n          width={60}\n        />\n      </Field>\n      {settings?.type === 'qdrant' && (\n        <QdrantConfig\n          settings={settings.qdrant}\n          secrets={secrets}\n          secretsSet={secretsSet}\n          onChange={(qdrant) => onChange({ ...settings, qdrant })}\n          onChangeSecrets={onChangeSecrets}\n        />\n      )}\n      {settings?.type === 'grafana/vectorapi' && (\n        <>\n          <Field label=\"Auth Type\">\n            <Select\n              options={[\n                { label: 'No Auth', value: 'no-auth' },\n                { label: 'Basic Auth', value: 'basic-auth' },\n              ]}\n              value={settings?.grafanaVectorAPI?.authType ?? 'no-auth'}\n              onChange={(e) =>\n                e.value !== undefined &&\n                onChange({ ...settings, grafanaVectorAPI: { ...settings.grafanaVectorAPI, authType: e.value } })\n              }\n              width={60}\n            />\n          </Field>\n          <GrafanaVectorAPIConfig\n            settings={settings.grafanaVectorAPI}\n            onChange={(grafanaVectorAPI) => onChange({ ...settings, grafanaVectorAPI })}\n          />\n        </>\n      )}\n      {settings?.type === 'grafana/vectorapi' && settings?.grafanaVectorAPI?.authType === 'basic-auth' && (\n        <BasicAuthConfig\n          settings={settings.grafanaVectorAPI}\n          secrets={secrets}\n          secretsSet={secretsSet}\n          onChange={(authSettings) => onChange({ ...settings, grafanaVectorAPI: authSettings })}\n          onChangeSecrets={onChangeSecrets}\n          secretKey=\"vectorStoreBasicAuthPassword\"\n        />\n      )}\n    </>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { lastValueFrom } from 'rxjs';\n\nimport { css } from '@emotion/css';\nimport { AppPluginMeta, GrafanaTheme2, KeyValue, PluginConfigPageProps, PluginMeta } from '@grafana/data';\nimport { FetchResponse, HealthCheckResult, getBackendSrv } from '@grafana/runtime';\nimport { Alert, Button, LoadingPlaceholder, useStyles2 } from '@grafana/ui';\n\nimport { testIds } from '../testIds';\nimport { ModelSettings } from './ModelConfig';\nimport { ShowHealthCheckResult } from './HealthCheck';\nimport { LLMConfig } from './LLMConfig';\nimport { OpenAISettings } from './OpenAI';\nimport { AnthropicSettings } from './AnthropicConfig';\nimport { VectorConfig, VectorSettings } from './Vector';\n///////////////////////\n\nexport type ProviderType = 'openai' | 'azure' | 'grafana' | 'test' | 'custom' | 'anthropic';\n\nexport interface AppPluginSettings {\n  provider?: ProviderType;\n  disabled?: boolean;\n  openAI?: OpenAISettings;\n  anthropic?: AnthropicSettings;\n  vector?: VectorSettings;\n  models?: ModelSettings;\n  // The enableGrafanaManagedLLM flag will enable the plugin to use Grafana-managed OpenAI\n  // This will only work for Grafana Cloud install plugins\n  enableGrafanaManagedLLM?: boolean;\n  displayVectorStoreOptions?: boolean;\n  enableDevSandbox?: boolean;\n}\n\nexport type Secrets = {\n  openAIKey?: string;\n  anthropicKey?: string;\n  qdrantApiKey?: string;\n  vectorStoreBasicAuthPassword?: string;\n  vectorEmbedderBasicAuthPassword?: string;\n};\n\nexport type SecretsSet = {\n  [Property in keyof Secrets]: boolean;\n};\n\nfunction initialSecrets(secureJsonFields: KeyValue<boolean>): SecretsSet {\n  return {\n    openAIKey: secureJsonFields.openAIKey ?? false,\n    anthropicKey: secureJsonFields.anthropicKey ?? false,\n    vectorEmbedderBasicAuthPassword: secureJsonFields.vectorEmbedderBasicAuthPassword ?? false,\n    vectorStoreBasicAuthPassword: secureJsonFields.vectorStoreBasicAuthPassword ?? false,\n    qdrantApiKey: secureJsonFields.qdrantApiKey ?? false,\n  };\n}\n\nexport interface AppConfigProps extends PluginConfigPageProps<AppPluginMeta<AppPluginSettings>> {}\n\n// Helper function to get the effective provider, handling both legacy and new provider fields\nexport function getEffectiveProvider(settings: AppPluginSettings): ProviderType | undefined {\n  // If the root provider is set, use it (new format)\n  if (settings.provider) {\n    return settings.provider;\n  }\n  // Otherwise fall back to the legacy openAI.provider field\n  return settings.openAI?.provider;\n}\n\nexport const AppConfig = ({ plugin }: AppConfigProps) => {\n  const s = useStyles2(getStyles);\n  const { enabled, pinned, jsonData, secureJsonFields } = plugin.meta;\n  const [settings, setSettings] = useState<AppPluginSettings>(jsonData ?? {});\n  const [newSecrets, setNewSecrets] = useState<Secrets>({});\n  // Whether each secret is already configured in the plugin backend.\n  const [configuredSecrets, setConfiguredSecrets] = useState<SecretsSet>(initialSecrets(secureJsonFields ?? {}));\n  // Whether any settings have been updated.\n  const [updated, setUpdated] = useState(false);\n\n  const [managedLLMOptIn, setManagedLLMOptIn] = useState<boolean>(false);\n\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [healthCheck, setHealthCheck] = useState<HealthCheckResult | undefined>(undefined);\n\n  const validateInputs = (): string | undefined => {\n    // Check if Grafana-provided OpenAI enabled, that it has been opted-in\n    if (settings?.provider === 'grafana' && !managedLLMOptIn) {\n      return 'You must click the \"I Accept\" checkbox to use OpenAI provided by Grafana';\n    }\n    return;\n  };\n  const errorState = validateInputs();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const optIn = await getLLMOptInState();\n      setManagedLLMOptIn(optIn);\n    };\n\n    if (settings.enableGrafanaManagedLLM === true) {\n      fetchData();\n    }\n  }, [settings.enableGrafanaManagedLLM]);\n\n  // Helper function to mark settings as updated and clear health check\n  const markAsUpdated = () => {\n    setUpdated(true);\n    setHealthCheck(undefined);\n  };\n\n  const doSave = async () => {\n    if (errorState !== undefined) {\n      return;\n    }\n    setIsUpdating(true);\n    setHealthCheck(undefined);\n\n    const originalSettings = { ...plugin.meta.jsonData };\n\n    let key: keyof SecretsSet;\n    const secureJsonData: Secrets = {};\n    for (key in configuredSecrets) {\n      // Only include secrets that are not already configured on the backend,\n      // otherwise we'll overwrite them.\n      if (!configuredSecrets[key]) {\n        secureJsonData[key] = newSecrets[key];\n      }\n    }\n\n    // Migrate the provider to the new format before saving\n    const settingsToSave = {\n      ...settings,\n      provider: getEffectiveProvider(settings),\n    };\n\n    try {\n      await updateAndSavePluginSettings(plugin.meta.id, settings.enableGrafanaManagedLLM, {\n        enabled,\n        pinned,\n        jsonData: settingsToSave,\n        secureJsonData,\n      });\n\n      // Note: health-check uses the state saved in the plugin settings.\n      let healthCheckResult: HealthCheckResult | undefined = undefined;\n      const effectiveProvider = getEffectiveProvider(settings);\n      if (effectiveProvider !== undefined) {\n        const result = await checkPluginHealth(plugin.meta.id);\n        healthCheckResult = result.data;\n\n        if (healthCheckResult.status?.toLowerCase() !== 'ok') {\n          await updateAndSavePluginSettings(plugin.meta.id, settings.enableGrafanaManagedLLM, {\n            enabled,\n            pinned,\n            jsonData: originalSettings,\n            secureJsonData: {},\n          });\n          // Revert UI to original settings to match backend state\n          setSettings(originalSettings);\n          setHealthCheck(healthCheckResult);\n          setIsUpdating(false);\n          return;\n        }\n      }\n      setHealthCheck(healthCheckResult);\n\n      // If moving away from Grafana-managed LLM, opt-out of the feature automatically\n      // This logic should only be triggered if the Grafana-managed LLM feature is enabled (Grafana Cloud Only)\n      if (settings.enableGrafanaManagedLLM === true) {\n        if (managedLLMOptIn && effectiveProvider !== 'grafana') {\n          await saveLLMOptInState(false);\n        } else {\n          await saveLLMOptInState(managedLLMOptIn);\n        }\n      }\n\n      // Update local state to immediately reflect saved settings in the UI\n      setSettings(settingsToSave);\n\n      setIsUpdating(false);\n      setUpdated(false);\n    } catch (e) {\n      // Rollback to original settings on any error\n      try {\n        await updateAndSavePluginSettings(plugin.meta.id, settings.enableGrafanaManagedLLM, {\n          enabled,\n          pinned,\n          jsonData: originalSettings,\n          secureJsonData: {},\n        });\n        // Revert UI to original settings to match backend state\n        setSettings(originalSettings);\n      } catch (rollbackError) {\n        console.error('Failed to rollback settings:', rollbackError);\n      }\n      setIsUpdating(false);\n      throw e;\n    }\n  };\n\n  return (\n    <div data-testid={testIds.appConfig.container}>\n      <LLMConfig\n        settings={settings}\n        onChange={(newSettings: AppPluginSettings) => {\n          setSettings(newSettings);\n          markAsUpdated();\n        }}\n        secrets={newSecrets}\n        secretsSet={configuredSecrets}\n        optIn={managedLLMOptIn}\n        setOptIn={(optIn) => {\n          setManagedLLMOptIn(optIn);\n          markAsUpdated();\n        }}\n        onChangeSecrets={(secrets: Secrets) => {\n          // Update the new secrets.\n          setNewSecrets(secrets);\n          // Mark each secret as not configured. This will cause it to be included\n          // in the request body when the user clicks \"Save settings\".\n          for (const key of Object.keys(secrets)) {\n            setConfiguredSecrets({ ...configuredSecrets, [key]: false });\n          }\n          markAsUpdated();\n        }}\n      />\n      {settings.displayVectorStoreOptions === true && (\n        <VectorConfig\n          settings={settings.vector}\n          secrets={newSecrets}\n          secretsSet={configuredSecrets}\n          onChange={(vector) => {\n            setSettings({ ...settings, vector });\n            markAsUpdated();\n          }}\n          onChangeSecrets={(secrets) => {\n            // Update the new secrets.\n            setNewSecrets(secrets);\n            // Mark each secret as not configured. This will cause it to be included\n            // in the request body when the user clicks \"Save settings\".\n            for (const key of Object.keys(secrets)) {\n              setConfiguredSecrets({ ...configuredSecrets, [key]: false });\n            }\n            markAsUpdated();\n          }}\n        />\n      )}\n\n      {errorState !== undefined && <Alert title={errorState} severity=\"error\" />}\n      {isUpdating ? (\n        <LoadingPlaceholder text=\"Running health check...\" />\n      ) : (\n        healthCheck && <ShowHealthCheckResult {...healthCheck} />\n      )}\n      <div className={s.marginTop}>\n        <Button\n          type=\"submit\"\n          data-testid={testIds.appConfig.submit}\n          onClick={doSave}\n          disabled={!updated || isUpdating || errorState !== undefined}\n        >\n          Save &amp; test\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport const getStyles = (theme: GrafanaTheme2) => ({\n  colorWeak: css`\n    color: ${theme.colors.text.secondary};\n  `,\n  marginTop: css`\n    margin-top: ${theme.spacing(3)};\n  `,\n  inlineFieldWidth: 15,\n  inlineFieldInputWidth: 40,\n});\n\nexport const updateGrafanaPluginSettings = (pluginId: string, data: Partial<PluginMeta>) => {\n  const response = getBackendSrv().fetch({\n    url: `/api/plugins/${pluginId}/settings`,\n    method: 'POST',\n    data,\n  });\n\n  return lastValueFrom(response);\n};\n\nexport const updateGcomProvisionedPluginSettings = (data: Partial<PluginMeta>) => {\n  const response = getBackendSrv().fetch({\n    url: `/api/plugins/grafana-llm-app/resources/save-plugin-settings`,\n    method: 'POST',\n    data,\n  });\n\n  return lastValueFrom(response);\n};\n\nexport const updateAndSavePluginSettings = async (\n  pluginId: string,\n  persistToGcom = false,\n  data: Partial<PluginMeta>\n) => {\n  const gcomPluginData = {\n    jsonData: data.jsonData,\n    secureJsonData: data.secureJsonData,\n  };\n\n  if (persistToGcom === true) {\n    await updateGcomProvisionedPluginSettings(gcomPluginData).then((response: FetchResponse) => {\n      if (!response.ok) {\n        throw response.data;\n      }\n    });\n  }\n  await updateGrafanaPluginSettings(pluginId, data).then((response: FetchResponse) => {\n    if (!response.ok) {\n      throw response.data;\n    }\n  });\n};\n\nconst checkPluginHealth = (pluginId: string): Promise<FetchResponse<HealthCheckResult>> => {\n  const response = getBackendSrv().fetch({\n    url: `/api/plugins/${pluginId}/health`,\n  });\n  return lastValueFrom(response) as Promise<FetchResponse<HealthCheckResult>>;\n};\n\nexport async function saveLLMOptInState(optIn: boolean): Promise<void> {\n  return lastValueFrom(\n    getBackendSrv().fetch({\n      url: `api/plugins/grafana-llm-app/resources/grafana-llm-state`,\n      method: 'POST',\n      data: { allowed: optIn },\n    })\n  ).then((response: FetchResponse) => {\n    if (!response.ok) {\n      throw response.data;\n    }\n  });\n}\n\nexport async function getLLMOptInState(): Promise<boolean> {\n  return lastValueFrom(\n    getBackendSrv().fetch({\n      url: `api/plugins/grafana-llm-app/resources/grafana-llm-state`,\n      method: 'GET',\n    })\n  ).then((response: FetchResponse) => {\n    if (!response.ok || response.data?.status !== 'success') {\n      throw response.data;\n    }\n    return response.data.data?.allowed ?? false;\n  });\n}\n","import { AppPlugin } from '@grafana/data';\n\nimport { MainPage } from './pages';\nimport { AppConfig } from './components/AppConfig';\n\nexport const plugin = new AppPlugin<{}>().setRootPage(MainPage).addConfigPage({\n  title: 'Configuration',\n  icon: 'cog',\n  body: AppConfig,\n  id: 'configuration',\n});\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { PluginPage } from '@grafana/runtime';\nimport { useTheme2 } from '@grafana/ui';\nimport { GrafanaTheme2 } from '@grafana/data';\n\nimport { Models } from './Models';\nimport { MCPToolsWithProvider } from './MCPTools';\nimport { testIds } from 'components/testIds';\n\nconst getStyles = (theme: GrafanaTheme2) => ({\n  container: css`\n    display: flex;\n    flex-direction: column;\n    gap: ${theme.spacing(4)};\n    padding: ${theme.spacing(2)};\n    max-width: 1200px;\n    margin: 0 auto;\n  `,\n  header: css`\n    text-align: center;\n    margin-bottom: ${theme.spacing(3)};\n  `,\n  title: css`\n    font-size: ${theme.typography.h1.fontSize};\n    font-weight: ${theme.typography.h1.fontWeight};\n    color: ${theme.colors.text.primary};\n    margin: 0 0 ${theme.spacing(1)} 0;\n  `,\n  subtitle: css`\n    font-size: ${theme.typography.h4.fontSize};\n    color: ${theme.colors.text.secondary};\n    margin: 0;\n    font-weight: normal;\n  `,\n  sectionsContainer: css`\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: ${theme.spacing(4)};\n\n    @media (max-width: 768px) {\n      grid-template-columns: 1fr;\n    }\n  `,\n  section: css`\n    background: ${theme.colors.background.secondary};\n    border-radius: ${theme.shape.radius.default};\n    border: 1px solid ${theme.colors.border.medium};\n    padding: ${theme.spacing(3)};\n    overflow: hidden;\n  `,\n  sectionTitle: css`\n    font-size: ${theme.typography.h3.fontSize};\n    font-weight: ${theme.typography.h3.fontWeight};\n    color: ${theme.colors.text.primary};\n    margin: 0 0 ${theme.spacing(2)} 0;\n    padding-bottom: ${theme.spacing(1)};\n    border-bottom: 1px solid ${theme.colors.border.weak};\n  `,\n  sectionContent: css`\n    // Remove default margins from child components\n    h1,\n    h2 {\n      margin-top: 0;\n      font-size: ${theme.typography.h4.fontSize};\n    }\n\n    pre {\n      max-height: 300px;\n      overflow-y: auto;\n      background: ${theme.colors.background.primary};\n      border: 1px solid ${theme.colors.border.weak};\n      border-radius: ${theme.shape.radius.default};\n      padding: ${theme.spacing(2)};\n      font-size: ${theme.typography.bodySmall.fontSize};\n    }\n\n    ul {\n      margin: 0;\n      padding-left: ${theme.spacing(3)};\n    }\n\n    li {\n      margin-bottom: ${theme.spacing(0.5)};\n      line-height: 1.5;\n    }\n  `,\n  fullWidthSection: css`\n    grid-column: 1 / -1;\n    background: ${theme.colors.background.secondary};\n    border-radius: ${theme.shape.radius.default};\n    border: 1px solid ${theme.colors.border.medium};\n    padding: ${theme.spacing(3)};\n    margin-top: ${theme.spacing(2)};\n  `,\n  infoBox: css`\n    background: ${theme.colors.info.transparent};\n    border: 1px solid ${theme.colors.info.border};\n    border-radius: ${theme.shape.radius.default};\n    padding: ${theme.spacing(2)};\n    margin-bottom: ${theme.spacing(3)};\n    color: ${theme.colors.info.text};\n    font-size: ${theme.typography.bodySmall.fontSize};\n    line-height: 1.4;\n  `,\n});\n\nexport function MainPage() {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n\n  return (\n    <PluginPage>\n      <div data-testid={testIds.mainPage.container} className={styles.container}>\n        <header className={styles.header}>\n          <h1 className={styles.title}>Grafana LLM</h1>\n          <p className={styles.subtitle}>Large Language Model integration with Model Context Protocol support</p>\n        </header>\n\n        <div className={styles.infoBox}>\n          <strong>About this plugin:</strong> This plugin provides LLM capabilities to Grafana through OpenAI-compatible\n          APIs and extends functionality with Model Context Protocol (MCP) tools for enhanced AI workflows.\n        </div>\n\n        <div className={styles.sectionsContainer}>\n          <section className={styles.section}>\n            <h2 className={styles.sectionTitle}>Language Models</h2>\n            <div className={styles.sectionContent}>\n              <Models />\n            </div>\n          </section>\n\n          <section className={styles.section}>\n            <h2 className={styles.sectionTitle}>MCP Tools</h2>\n            <div className={styles.sectionContent}>\n              <MCPToolsWithProvider />\n            </div>\n          </section>\n        </div>\n\n        <section className={styles.fullWidthSection}>\n          <h2 className={styles.sectionTitle}>Getting Started</h2>\n          <div className={styles.sectionContent}>\n            <p>\n              <strong>Models:</strong> View and manage available language models configured for this Grafana instance.\n              Models are provided through the configured LLM provider (OpenAI, Anthropic, or custom).\n            </p>\n            <p>\n              <strong>MCP Tools:</strong> Model Context Protocol tools extend LLM capabilities with access to Grafana\n              data sources, dashboards, alerts, and other contextual information. These tools can be used by AI\n              assistants to provide more relevant and data-driven responses.\n            </p>\n          </div>\n        </section>\n      </div>\n    </PluginPage>\n  );\n}\n"],"names":["SemVer","module","exports","a","loose","major","Range","Comparator","ANY","satisfies","compare","minimumVersionWithPreRelease","minimumVersion","simpleSubset","sub","dom","options","length","semver","includePrerelease","eqSet","Set","gt","lt","gtltComp","higher","lower","hasDomLT","hasDomGT","c","operator","higherGT","lowerLT","add","size","eq","String","needDomLTPre","prerelease","needDomGTPre","minor","patch","b","comp","sawNonNull","OUTER","simpleSub","set","simpleDom","isSub","internalRe","constants","identifiers","parse","valid","clean","inc","diff","rcompare","compareLoose","compareBuild","sort","rsort","neq","gte","lte","cmp","coerce","toComparators","maxSatisfying","minSatisfying","minVersion","validRange","outside","gtr","ltr","intersects","simplifyRange","subset","re","src","tokens","t","SEMVER_SPEC_VERSION","RELEASE_TYPES","compareIdentifiers","rcompareIdentifiers","debug","process","env","NODE_DEBUG","test","args","console","error","range","map","value","join","trim","split","it","$keyword","$ruleType","$async","$refCode","out","$lvl","level","$dataLvl","dataLevel","$schema","schema","$errSchemaPath","errSchemaPath","$breakOnError","opts","allErrors","$data","$valid","isRoot","async","root","$refVal","resolveRef","baseId","undefined","$message","MissingRefError","message","missingRefs","logger","$$outStack","push","createErrors","util","toQuotedString","escapeQuotes","messages","verbose","__err","pop","compositeRule","warn","inline","$it","copy","$nextValid","schemaPath","validate","replace","code","passContext","errorPath","__callValidate","dataPathArr","Error","$schemaValue","$schemaPath","getProperty","$isData","getData","uniqueItems","$itemType","items","type","$typeIsArray","Array","isArray","indexOf","$method","strictNumbers","merge","_len","arguments","sets","_key","slice","xl","x","subexp","str","typeOf","o","Object","prototype","toString","call","shift","toLowerCase","toUpperCase","buildExps","isIRI","ALPHA$$","DIGIT$$","HEXDIG$$","PCT_ENCODED$","SUB_DELIMS$$","RESERVED$$","IPRIVATE$$","UNRESERVED$$","SCHEME$","USERINFO$","DEC_OCTET_RELAXED$","IPV4ADDRESS$","H16$","LS32$","IPV6ADDRESS1$","IPV6ADDRESS2$","IPV6ADDRESS3$","IPV6ADDRESS4$","IPV6ADDRESS5$","IPV6ADDRESS6$","IPV6ADDRESS7$","IPV6ADDRESS8$","IPV6ADDRESS9$","IPV6ADDRESS$","ZONEID$","IPV6ADDRZ_RELAXED$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","NOT_SCHEME","RegExp","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","OTHER_CHARS","PCT_ENCODED","IPV4ADDRESS","IPV6ADDRESS","URI_PROTOCOL","IRI_PROTOCOL","slicedToArray","arr","i","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","err","sliceIterator","TypeError","maxInt","base","regexPunycode","regexNonASCII","regexSeparators","errors","floor","Math","stringFromCharCode","fromCharCode","error$1","RangeError","mapDomain","string","fn","parts","result","array","ucs2decode","output","counter","charCodeAt","extra","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","baseMinusTMin","decode","input","inputLength","n","bias","basic","lastIndexOf","j","index","oldi","w","baseMinusT","splice","fromCodePoint","apply","encode","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_currentValue2","return","basicLength","handledCPCount","m","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","currentValue","handledCPCountPlusOne","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_currentValue","q","qMinusT","punycode","SCHEMES","pctEncChar","chr","pctDecChars","newStr","il","parseInt","substr","c2","_c","c3","_normalizeComponentEncoding","components","protocol","decodeUnreserved","decStr","match","scheme","userinfo","host","path","query","fragment","_stripLeadingZeros","_normalizeIPv4","matches","address","_normalizeIPv6","_matches2","zone","_address$toLowerCase$","reverse","_address$toLowerCase$2","last","first","firstFields","lastFields","isLastFieldIPv4Address","fieldCount","lastFieldsStart","fields","longestZeroFields","reduce","acc","field","lastLongest","newHost","newFirst","newLast","URI_PARSE","NO_MATCH_IS_UNDEFINED","uriString","iri","reference","port","isNaN","schemeHandler","unicodeSupport","domainHost","e","RDS1","RDS2","RDS3","RDS5","removeDotSegments","im","s","serialize","uriTokens","authority","_","$1","$2","_recomposeAuthority","charAt","absolutePath","resolveComponents","relative","target","tolerant","unescapeComponent","handler","secure","handler$1","isSecure","wsComponents","handler$2","resourceName","_wsComponents$resourc","_wsComponents$resourc2","handler$3","O","VCHAR$$","NOT_LOCAL_PART","NOT_HFNAME","NOT_HFVALUE","handler$4","mailtoComponents","to","unknownHeaders","headers","hfields","hfield","toAddrs","_x","_xl","subject","body","_x2","_xl2","addr","obj","setInterval","toAddr","atIdx","localPart","domain","name","URN_PARSE","handler$5","urnComponents","nid","nss","urnScheme","uriComponents","UUID","handler$6","uuidComponents","uuid","resolve","baseURI","relativeURI","schemelessOptions","source","key","assign","normalize","uri","equal","uriA","uriB","escapeComponent","defineProperty","factory","er","versionA","versionB","versions","prev","v","version","ranges","min","max","simplified","original","raw","r1","r2","KEYWORDS","metaSchema","keywordsJsonPointers","JSON","stringify","segments","keywords","anyOf","$ref","__WEBPACK_EXTERNAL_MODULE__1269__","IDENTIFIER","customRuleCode","definitionSchema","keyword","definition","RULES","this","validateKeyword","dataType","_addRule","_opts","validateSchema","compile","ruleGroup","rg","rules","rule","custom","implements","all","get","remove","throwError","_validateKeyword","errorsText","$errs","$closingBraces","$idx","$dataNxt","$nextData","$currentBaseId","$additionalItems","additionalItems","$currErrSchemaPath","arr1","$sch","$i","l1","strictKeywords","keys","schemaHasRules","$passData","getPathExpr","jsonPointers","$code","varOccurences","varReplace","$schemaDeps","$propertyDeps","$ownProperties","ownProperties","$property","$deps","$currentErrorPath","$propertyKey","$useData","$prop","$propertyPath","$missingProperty","_errorDataPathProperty","arr2","i2","l2","getPath","escapeFragment","$vSchema","loopRequired","properties","$required","i1","$propertySch","$loopRequired","arr3","i3","l3","MAX_SAFE_COMPONENT_LENGTH","MAX_SAFE_BUILD_LENGTH","MAX_LENGTH","safeRe","safeSrc","R","LETTERDASHNUMBER","safeRegexReplacements","createToken","isGlobal","safe","token","makeSafeRegex","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","BUILDIDENTIFIER","MAINVERSION","PRERELEASE","BUILD","FULLPLAIN","MAINVERSIONLOOSE","PRERELEASELOOSE","LOOSEPLAIN","XRANGEIDENTIFIER","XRANGEIDENTIFIERLOOSE","GTLT","XRANGEPLAIN","XRANGEPLAINLOOSE","COERCEPLAIN","COERCE","COERCEFULL","LONETILDE","tildeTrimReplace","LONECARET","caretTrimReplace","comparatorTrimReplace","Cache","_cache","put","del","clear","$errorKeyword","$compile","$inline","$macro","$ruleValidate","$validateCode","$rule","$definition","$rDef","$validateSchema","useCustomRule","macro","$ruleErrs","$ruleErr","$asyncKeyword","statements","$wasComposite","$parentData","$parentDataProperty","def_callRuleValidate","modifying","def_customError","$nonEmptySchema","minSV","rangeObj","forEach","__WEBPACK_EXTERNAL_MODULE__2007__","hilo","gtfn","ltefn","ltfn","ecomp","comparators","high","low","comparator","minver","setMin","compver","format","compileAsync","meta","callback","self","loadSchema","p","loadMetaSchemaOf","then","schemaObj","_addSchema","_compileAsync","sch","getSchema","Promise","_compile","ref","missingSchema","added","missingRef","schemaPromise","_loadingSchemas","removePromise","addSchema","_refs","_schemas","loadMissingSchema","ruleModules","toHash","ALL","types","group","implKeywords","$comment","concat","len","pos","multipleOfPrecision","SPACE_CHARACTERS","constructor","parseOptions","formatted","r","parseRange","filter","isNullSet","isAny","comps","memoKey","FLAG_INCLUDE_PRERELEASE","FLAG_LOOSE","cached","cache","hr","HYPHENRANGELOOSE","HYPHENRANGE","hyphenReplace","COMPARATORTRIM","TILDETRIM","CARETTRIM","rangeList","parseComparator","replaceGTE0","COMPARATORLOOSE","rangeMap","Map","has","delete","values","some","thisComparators","isSatisfiable","rangeComparators","every","thisComparator","rangeComparator","testSet","remainingComparators","testComparator","otherComparator","replaceCarets","replaceTildes","replaceXRanges","replaceStars","isX","id","replaceTilde","TILDELOOSE","TILDE","M","pr","ret","replaceCaret","CARETLOOSE","CARET","z","replaceXRange","XRANGELOOSE","XRANGE","gtlt","xM","xm","xp","anyX","STAR","GTE0PRE","GTE0","incPr","$0","from","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","allowed","DATE","DAYS","TIME","HOSTNAME","URI","URITEMPLATE","URL","JSON_POINTER","JSON_POINTER_URI_FRAGMENT","RELATIVE_JSON_POINTER","formats","mode","date","year","month","day","isLeapYear","time","full","hour","minute","second","timeZone","fast","url","email","hostname","ipv4","ipv6","regex","dateTime","DATE_TIME_SEPARATOR","NOT_URI_FRAGMENT","Z_ANCHOR","COMPARATOR","startsWith","includes","looseOption","freeze","emptyOpts","list","$op","unicode","traverse","cb","_traverse","pre","post","jsonPtr","rootSchema","parentJsonPtr","parentKeyword","parentSchema","keyIndex","arrayKeywords","propsKeywords","prop","escapeJsonPtr","allKeys","skipKeywords","contains","additionalProperties","propertyNames","not","allOf","oneOf","definitions","patternProperties","dependencies","default","enum","const","required","maximum","minimum","exclusiveMaximum","exclusiveMinimum","multipleOf","maxLength","minLength","pattern","maxItems","minItems","maxProperties","minProperties","rtl","coerceRtlRegex","COERCERTLFULL","COERCERTL","exec","lastIndex","build","errorClasses","stableStringify","validateGenerator","ucs2length","ValidationError","Validation","checkCompiling","compIndex","compiling","_compilations","endCompiling","patternCode","patterns","defaultCode","refValCode","refVal","vars","statement","localRefs","refs","patternsHash","defaults","defaultsHash","customRules","compilation","callValidate","_formats","localCompile","cv","sourceCode","_schema","_root","isTop","MissingRef","usePattern","useDefault","processCode","Function","makeValidate","_refVal","refCode","refIndex","resolvedRef","rootRefId","addLocalRef","localSchema","inlineRef","inlineRefs","refId","replaceLocalRef","removeLocalRef","regexStr","valueStr","deps","hasOwnProperty","flags","valueOf","parsed","compileSchema","SchemaObject","$dataMetaSchema","Ajv","schemaKeyRef","data","_meta","_skipValidation","_getId","checkUnique","normalizeId","addMetaSchema","skipValidation","throwOrLogError","defaultMeta","META_SCHEMA_ID","keyRef","_getSchemaObj","res","_fragments","_getSchemaFragment","removeSchema","_removeAllSchemas","cacheKey","addFormat","separator","dataVar","text","dataPath","shouldAddSchema","addUsedSchema","recursiveMeta","willValidate","ids","currentOpts","_metaOpts","_validate","customKeyword","addKeyword","getKeyword","removeKeyword","META_IGNORE_OPTIONS","META_SUPPORT_DATA","log","noop","setLogger","schemaId","_get$IdOrId","_get$Id","chooseGetId","Infinity","errorDataPath","metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","$dataSchema","$id","addDefaultMetaSchema","nullable","optsSchemas","schemas","addInitialSchemas","$isMax","$exclusiveKeyword","$schemaExcl","$isDataExcl","$notOp","$schemaValueExcl","$exclusive","$exclType","$exclIsNumber","$opStr","$opExpr","$prevValid","$passingSchemas","op","$thenSch","$elseSch","$thenPresent","$elsePresent","$ifClause","__WEBPACK_EXTERNAL_MODULE__5959__","$unknownFormats","unknownFormats","$allowUnknown","$format","$isObject","$formatType","$formatRef","$key","$invalidName","$dataProperties","$noEmptySchema","__WEBPACK_EXTERNAL_MODULE__6089__","MAX_SAFE_INTEGER","LOOSE","FULL","num","other","compareMain","comparePre","release","identifier","identifierBase","Number","version1","version2","v1","v2","comparison","v1Higher","highVersion","lowVersion","highHasPre","prefix","$allSchemasEmpty","maxSV","checkDataType","negate","EQUAL","AND","OK","NOT","checkDataTypes","dataTypes","object","null","number","integer","coerceToTypes","optionCoerceTypes","COERCE_TO_TYPES","expr","schemaHasRulesExcept","exceptKeyword","schemaUnknownRules","currentPath","isNumber","joinPaths","escapeJsonPointer","lvl","paths","up","jsonPointer","segment","unescapeJsonPointer","unescapeFragment","decodeURIComponent","encodeURIComponent","hash","SINGLE_QUOTE","firstKey","f","cycles","node","aobj","bobj","seen","toJSON","isFinite","seenIndex","throwErrors","__WEBPACK_EXTERNAL_MODULE__7781__","resolveSchema","refPath","_getFullPath","getFullPath","resolveRecursive","getJsonPointer","parsedRef","resolveUrl","fullPath","baseIds","fullPaths","PREVENT_SCOPE_CHANGE","part","SIMPLE_INLINED","limit","checkNoRef","countKeys","item","count","TRAILING_SLASH_HASH","__WEBPACK_EXTERNAL_MODULE__8531__","errorSubclass","Subclass","create","ajv","validation","$refKeywords","$unknownKwd","$keywordsMsg","$top","rootId","useDefaults","strictDefaults","$defaultMsg","$closingBraces1","$closingBraces2","$typeSchema","extendRefs","coerceTypes","$coerceToTypes","$rulesGroup","$shouldUseGroup","$dataType","$coerced","$type","arr4","l4","arr5","i5","l5","$shouldUseRule","impl","$ruleImplementsSomeKeyword","$allErrorsOption","numeric","anum","bnum","$schemaKeys","notProto","$pProperties","$pPropertyKeys","$aProperties","$someProperties","$noAdditional","$additionalIsSchema","$removeAdditional","removeAdditional","$checkAdditional","$requiredHash","$pProperty","$additionalProperty","$useDefaults","$hasDefault","i4","simpleTypes","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","enumerable","toStringTag","testIds","extendStatics","setPrototypeOf","__proto__","__extends","__","__assign","__values","__read","ar","__spreadArray","pack","l","_a","initialState","loading","mountedRef","lastCallId","useRef","isMounted","useCallback","current","useEffect","useState","state","callId","prevState","useAsyncFn","SuppressedError","objectUtil","Models","useAsync","getBackendSrv","div","data-testid","span","h1","assertEqual","assertIs","_arg","assertNever","arrayToEnum","getValidEnumValues","validKeys","objectKeys","filtered","objectValues","find","checker","isInteger","val","joinValues","jsonStringifyReplacer","mergeShapes","ZodParsedType","getParsedType","nan","boolean","function","bigint","symbol","catch","promise","Date","unknown","ZodIssueCode","ZodError","issues","super","addIssue","addIssues","subs","actualProto","_mapper","mapper","issue","fieldErrors","_errors","processError","unionErrors","returnTypeError","argumentsError","curr","el","assert","isEmpty","flatten","formErrors","firstEl","_ctx","invalid_type","received","expected","invalid_literal","unrecognized_keys","invalid_union","invalid_union_discriminator","invalid_enum_value","invalid_arguments","invalid_return_type","invalid_date","invalid_string","position","endsWith","too_small","exact","inclusive","too_big","invalid_intersection_types","not_multiple_of","not_finite","defaultError","overrideErrorMap","errorUtil","errToObj","addIssueToContext","ctx","issueData","overrideMap","params","errorMaps","fullIssue","errorMessage","maps","makeIssue","common","contextualErrorMap","schemaErrorMap","ParseStatus","dirty","abort","mergeArray","status","results","arrayValue","INVALID","mergeObjectAsync","pairs","syncPairs","pair","mergeObjectSync","finalObject","alwaysSet","DIRTY","isAborted","isDirty","isValid","isAsync","ParseInputLazyPath","parent","_cachedPath","_path","handleResult","success","_error","processCreateParams","errorMap","invalid_type_error","required_error","description","iss","ZodType","_def","_getType","_getOrReturnCtx","parsedType","_processInputParams","_parseSync","_parse","_parseAsync","safeParse","parseAsync","safeParseAsync","maybeAsyncResult","refine","check","getIssueProperties","_refinement","setError","refinement","refinementData","ZodEffects","typeName","ZodFirstPartyTypeKind","effect","superRefine","def","spa","bind","optional","nullish","or","and","transform","brand","describe","pipe","readonly","isNullable","isOptional","vendor","ZodOptional","ZodNullable","ZodArray","ZodPromise","option","ZodUnion","incoming","ZodIntersection","defaultValueFunc","ZodDefault","innerType","defaultValue","ZodBranded","catchValueFunc","ZodCatch","catchValue","This","ZodPipeline","ZodReadonly","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","nanoidRegex","jwtRegex","durationRegex","emailRegex","emojiRegex","ipv4Regex","ipv4CidrRegex","ipv6Regex","ipv6CidrRegex","base64Regex","base64urlRegex","dateRegexSource","dateRegex","timeRegexSource","secondsRegexSource","precision","timeRegex","datetimeRegex","local","offset","isValidIP","ip","isValidJWT","jwt","alg","header","base64","padEnd","decoded","atob","typ","isValidCidr","ZodString","checks","kind","tooBig","tooSmall","_regex","_addCheck","emoji","nanoid","cuid","cuid2","ulid","base64url","cidr","datetime","duration","nonempty","isDatetime","ch","isDate","isTime","isDuration","isEmail","isURL","isEmoji","isUUID","isNANOID","isCUID","isCUID2","isULID","isIP","isCIDR","isBase64","isBase64url","floatSafeRemainder","step","valDecCount","stepDecCount","decCount","toFixed","ZodNumber","setLimit","int","positive","negative","nonpositive","nonnegative","finite","MIN_SAFE_INTEGER","minValue","maxValue","isInt","ZodBigInt","BigInt","_getInvalidInput","ZodBoolean","Boolean","ZodDate","getTime","minDate","maxDate","ZodSymbol","ZodUndefined","ZodNull","ZodAny","_any","ZodUnknown","_unknown","ZodNever","never","ZodVoid","void","exactLength","element","deepPartialify","ZodObject","newShape","shape","fieldSchema","unwrap","ZodTuple","_cached","nonstrict","passthrough","augment","extend","_getCached","shapeKeys","extraKeys","catchall","unknownKeys","keyValidator","strict","strip","augmentation","merging","setKey","pick","mask","omit","deepPartial","partial","newField","keyof","createZodEnum","strictCreate","lazycreate","childCtx","getDiscriminator","ZodLazy","ZodLiteral","ZodEnum","ZodNativeEnum","ZodDiscriminatedUnion","discriminator","discriminatorValue","optionsMap","discriminatorValues","mergeValues","aType","bType","bKeys","sharedKeys","newObj","sharedValue","newArray","handleParsed","parsedLeft","parsedRight","merged","left","right","rest","itemIndex","ZodRecord","keySchema","keyType","valueSchema","valueType","third","ZodMap","entries","finalMap","ZodSet","minSize","maxSize","finalizeSet","elements","parsedSet","expectedValues","enumValues","Values","Enum","extract","newDef","exclude","opt","nativeEnumValues","promisified","sourceType","checkCtx","arg","fatal","processed","executeRefinement","inner","createWithPreprocess","preprocess","removeDefault","newCtx","removeCatch","ZodNaN","inResult","in","handleAsync","stringType","numberType","booleanType","anyType","unknownType","arrayType","objectType","unionType","discriminatedUnionType","recordType","literalType","enumType","optionalType","NEVER","SUPPORTED_PROTOCOL_VERSIONS","JSONRPC_VERSION","ProgressTokenSchema","CursorSchema","RequestMetaSchema","progressToken","BaseRequestParamsSchema","RequestSchema","method","BaseNotificationParamsSchema","NotificationSchema","ResultSchema","RequestIdSchema","JSONRPCRequestSchema","jsonrpc","isJSONRPCRequest","JSONRPCNotificationSchema","JSONRPCResponseSchema","isJSONRPCResponse","ErrorCode","JSONRPCErrorSchema","EmptyResultSchema","CancelledNotificationSchema","requestId","reason","IconSchema","mimeType","sizes","IconsSchema","icons","BaseMetadataSchema","title","ImplementationSchema","websiteUrl","ClientCapabilitiesSchema","experimental","sampling","elicitation","roots","listChanged","InitializeRequestSchema","protocolVersion","capabilities","clientInfo","ServerCapabilitiesSchema","logging","completions","prompts","resources","subscribe","tools","InitializeResultSchema","serverInfo","instructions","InitializedNotificationSchema","PingRequestSchema","ProgressSchema","progress","total","ProgressNotificationSchema","PaginatedRequestSchema","cursor","PaginatedResultSchema","nextCursor","ResourceContentsSchema","TextResourceContentsSchema","Base64Schema","BlobResourceContentsSchema","blob","ResourceSchema","ResourceTemplateSchema","uriTemplate","ListResourcesRequestSchema","ListResourcesResultSchema","ListResourceTemplatesRequestSchema","ListResourceTemplatesResultSchema","resourceTemplates","ReadResourceRequestSchema","ReadResourceResultSchema","contents","ResourceListChangedNotificationSchema","SubscribeRequestSchema","UnsubscribeRequestSchema","ResourceUpdatedNotificationSchema","PromptArgumentSchema","PromptSchema","ListPromptsRequestSchema","ListPromptsResultSchema","GetPromptRequestSchema","TextContentSchema","ImageContentSchema","AudioContentSchema","EmbeddedResourceSchema","resource","ContentBlockSchema","PromptMessageSchema","role","content","GetPromptResultSchema","PromptListChangedNotificationSchema","ToolAnnotationsSchema","readOnlyHint","destructiveHint","idempotentHint","openWorldHint","ToolSchema","inputSchema","outputSchema","annotations","ListToolsRequestSchema","ListToolsResultSchema","CallToolResultSchema","structuredContent","isError","CallToolRequestSchema","toolResult","ToolListChangedNotificationSchema","LoggingLevelSchema","SetLevelRequestSchema","LoggingMessageNotificationSchema","ModelHintSchema","ModelPreferencesSchema","hints","costPriority","speedPriority","intelligencePriority","SamplingMessageSchema","CreateMessageRequestSchema","systemPrompt","includeContext","temperature","maxTokens","stopSequences","metadata","modelPreferences","CreateMessageResultSchema","model","stopReason","PrimitiveSchemaDefinitionSchema","enumNames","ElicitRequestSchema","requestedSchema","ElicitResultSchema","action","ResourceTemplateReferenceSchema","PromptReferenceSchema","CompleteRequestSchema","argument","context","CompleteResultSchema","completion","hasMore","RootSchema","ListRootsRequestSchema","ListRootsResultSchema","RootsListChangedNotificationSchema","McpError","Protocol","_options","_requestMessageId","_requestHandlers","_requestHandlerAbortControllers","_notificationHandlers","_responseHandlers","_progressHandlers","_timeoutInfo","_pendingDebouncedNotifications","setNotificationHandler","notification","controller","_onprogress","setRequestHandler","_request","_setupTimeout","messageId","timeout","maxTotalTimeout","onTimeout","resetTimeoutOnProgress","timeoutId","setTimeout","startTime","now","_resetTimeout","info","totalElapsed","RequestTimeout","clearTimeout","_cleanupTimeout","connect","transport","_b","_transport","_onclose","onclose","_onerror","onerror","_onmessage","onmessage","_onresponse","_onrequest","isJSONRPCNotification","_onnotification","start","responseHandlers","ConnectionClosed","fallbackNotificationHandler","request","fallbackRequestHandler","capturedTransport","send","MethodNotFound","abortController","AbortController","fullExtra","signal","sessionId","sendNotification","relatedRequestId","sendRequest","resultSchema","authInfo","requestInfo","aborted","isSafeInteger","InternalError","finally","responseHandler","timeoutInfo","response","close","resumptionToken","onresumptiontoken","reject","_f","enforceStrictCapabilities","assertCapabilityForMethod","throwIfAborted","jsonrpcRequest","onprogress","cancel","addEventListener","assertNotificationCapability","debouncedNotificationMethods","jsonrpcNotification","requestSchema","assertRequestHandlerCapability","removeRequestHandler","assertCanSetRequestHandler","notificationSchema","removeNotificationHandler","Client","_clientInfo","_cachedToolOutputValidators","_capabilities","_ajv","registerCapabilities","additional","assertCapability","capability","_serverCapabilities","_serverVersion","setProtocolVersion","_instructions","getServerCapabilities","getServerVersion","getInstructions","ping","complete","setLoggingLevel","getPrompt","listPrompts","listResources","listResourceTemplates","readResource","subscribeResource","unsubscribeResource","callTool","validator","getToolOutputValidator","InvalidRequest","InvalidParams","cacheToolOutputSchemas","tool","toolName","listTools","sendRootsListChanged","generateChallenge","code_verifier","buffer","subtle","digest","TextEncoder","btoa","Uint8Array","pkceChallenge","verifier","randomUints","getRandomValues","random","generateVerifier","code_challenge","globalThis","crypto","SafeUrlSchema","canParse","u","OAuthProtectedResourceMetadataSchema","authorization_servers","jwks_uri","scopes_supported","bearer_methods_supported","resource_signing_alg_values_supported","resource_name","resource_documentation","resource_policy_uri","resource_tos_uri","tls_client_certificate_bound_access_tokens","authorization_details_types_supported","dpop_signing_alg_values_supported","dpop_bound_access_tokens_required","issuer","authorization_endpoint","token_endpoint","registration_endpoint","response_types_supported","response_modes_supported","grant_types_supported","token_endpoint_auth_methods_supported","token_endpoint_auth_signing_alg_values_supported","service_documentation","revocation_endpoint","revocation_endpoint_auth_methods_supported","revocation_endpoint_auth_signing_alg_values_supported","introspection_endpoint","introspection_endpoint_auth_methods_supported","introspection_endpoint_auth_signing_alg_values_supported","code_challenge_methods_supported","OpenIdProviderDiscoveryMetadataSchema","userinfo_endpoint","acr_values_supported","subject_types_supported","id_token_signing_alg_values_supported","id_token_encryption_alg_values_supported","id_token_encryption_enc_values_supported","userinfo_signing_alg_values_supported","userinfo_encryption_alg_values_supported","userinfo_encryption_enc_values_supported","request_object_signing_alg_values_supported","request_object_encryption_alg_values_supported","request_object_encryption_enc_values_supported","display_values_supported","claim_types_supported","claims_supported","claims_locales_supported","ui_locales_supported","claims_parameter_supported","request_parameter_supported","request_uri_parameter_supported","require_request_uri_registration","op_policy_uri","op_tos_uri","OAuthTokensSchema","access_token","id_token","token_type","expires_in","scope","refresh_token","OAuthErrorResponseSchema","error_description","error_uri","OptionalSafeUrlSchema","OAuthClientMetadataSchema","redirect_uris","token_endpoint_auth_method","grant_types","response_types","client_name","client_uri","logo_uri","contacts","tos_uri","policy_uri","jwks","software_id","software_version","software_statement","OAuthClientInformationSchema","client_id","client_secret","client_id_issued_at","client_secret_expires_at","OAuthClientInformationFullSchema","token_type_hint","OAuthError","errorUri","toResponseObject","errorCode","InvalidRequestError","InvalidClientError","InvalidGrantError","UnauthorizedClientError","UnsupportedGrantTypeError","InvalidScopeError","AccessDeniedError","ServerError","TemporarilyUnavailableError","UnsupportedResponseTypeError","UnsupportedTokenTypeError","InvalidTokenError","MethodNotAllowedError","TooManyRequestsError","InvalidClientMetadataError","InsufficientScopeError","OAUTH_ERRORS","UnauthorizedError","AUTHORIZATION_CODE_RESPONSE_TYPE","AUTHORIZATION_CODE_CHALLENGE_METHOD","selectClientAuthMethod","clientInformation","supportedMethods","hasClientSecret","applyClientAuthentication","clientId","clientSecret","credentials","applyBasicAuth","applyPostAuth","applyPublicAuth","parseErrorResponse","statusCode","Response","auth","provider","authInternal","invalidateCredentials","serverUrl","authorizationCode","resourceMetadataUrl","fetchFn","resourceMetadata","authorizationServerUrl","fetch","wellKnownType","metadataUrl","wellKnownPath","wellKnownPrefix","pathname","prependPathname","buildWellKnownPath","metadataServerUrl","search","tryMetadataDiscovery","shouldAttemptFallback","rootUrl","discoverMetadataWithFallback","ok","json","discoverOAuthProtectedResourceMetadata","defaultResource","resourceURL","href","resourceUrlFromServerUrl","validateResourceURL","requestedResource","configuredResource","requested","configured","origin","requestedPath","configuredPath","checkResourceAllowed","selectResourceURL","Accept","urlsToTry","buildDiscoveryUrls","endpointUrl","fetchWithCorsRetry","discoverAuthorizationServerMetadata","saveClientInformation","fullInformation","clientMetadata","registrationUrl","registerClient","codeVerifier","redirectUri","addClientAuthentication","grantType","tokenUrl","Headers","URLSearchParams","grant_type","redirect_uri","exchangeAuthorization","redirectUrl","saveTokens","newTokens","refreshToken","refreshAuthorization","authorizationUrl","challenge","codeChallenge","searchParams","append","startAuthorization","saveCodeVerifier","redirectToAuthorization","ParseError","line","EventSourceParserStream","TransformStream","onError","onRetry","onComment","parser","callbacks","onEvent","incompleteLine","isFirstChunk","eventType","parseLine","event","fieldSeparatorIndex","processField","feed","newChunk","chunk","incomplete","lines","searchIndex","crIndex","lfIndex","lineEnd","splitLines","reset","consume","createParser","enqueue","DEFAULT_STREAMABLE_HTTP_RECONNECTION_OPTIONS","initialReconnectionDelay","maxReconnectionDelay","reconnectionDelayGrowFactor","maxRetries","StreamableHTTPError","StreamableHTTPClientTransport","_hasCompletedAuthFlow","_url","_resourceMetadataUrl","_requestInit","requestInit","_authProvider","authProvider","_fetch","_sessionId","_reconnectionOptions","reconnectionOptions","_authThenStart","_startOrAuthSse","_commonHeaders","_protocolVersion","extraHeaders","_normalizeHeaders","_abortController","statusText","_handleSseStream","_getNextReconnectionDelay","attempt","initialDelay","growFactor","maxDelay","pow","fromEntries","_scheduleReconnection","attemptCount","delay","stream","isReconnectable","replayMessageId","lastEventId","reader","pipeThrough","TextDecoderStream","getReader","read","processStream","finishAuth","init","authenticateHeader","extractResourceMetadataUrl","hasRequests","msg","contentType","responseMessages","terminateSession","LLM_PLUGIN_ROUTE","LLM_PLUGIN_VERSION","MCP_GRAFANA_PATH","clientMap","MCPClientContext","clientKey","appName","appVersion","MCPClientProvider","mcpAppName","mcpAppPath","children","useMemo","isEnabled","settings","showSuccessAlert","showErrorAlert","enabled","jsonData","mcp","disabled","logDebug","client","appId","mcpPath","grafanaUrl","config","appUrl","streamableHTTPURL","createClientResource","Provider","useMCPClient","convertToolsToOpenAI","convertToolToOpenAI","parameters","MCPToolsList","style","maxHeight","overflowY","h2","ul","li","strong","MCPToolsWithProvider","React","fallback","ErrorBoundary","isHealthCheckDetails","alertVariants","getAlertVariant","ShowHealthCheckResult","props","severity","details","Alert","llmProvider","vector","vectorOk","getAlertSeverity","showLLMProvider","showVector","Stack","direction","ShowGrafanaHealth","ShowLLMProviderHealth","ShowVectorHealth","liveEnabled","width","models","isFunction","operate","lift","hasLift","liftedSource","ctorFunc","UnsubscriptionError","instance","stack","arrRemove","Subscription","initialTeardown","closed","_parentage","_finalizers","empty","unsubscribe","e_1","e_2","_parentage_1","_parentage_1_1","e_1_1","initialFinalizer","_finalizers_1","_finalizers_1_1","finalizer","execFinalizer","e_2_1","teardown","_hasParent","_addParent","_removeParent","EMPTY","timeoutProvider","delegate","handle","COMPLETE_NOTIFICATION","createNotification","Subscriber","_super","destination","_this","isStopped","EMPTY_OBSERVER","SafeSubscriber","handleStoppedNotification","nextNotification","_next","_complete","ConsumerObserver","partialObserver","handleUnhandledError","observerOrNext","reportUnhandledError","subscriber","onStoppedNotification","createOperatorSubscriber","onNext","onComplete","onFinalize","OperatorSubscriber","shouldUnsubscribe","closed_1","predicate","thisArg","project","scanInternals","accumulator","seed","hasSeed","emitOnNext","emitBeforeComplete","hasState","identity","arrReducer","randomUUID","rnds8","byteToHex","buf","rnds","rng","unsafeStringify","LLM_CHAT_COMPLETIONS_PATH","Model","Model2","isErrorResponse","isToolCallsMessage","tool_calls","accumulateContent","choices","scan","chatCompletions","streamChatCompletions","channel","LiveChannelScope","Plugin","namespace","getGrafanaLiveSrv","getStream","isLiveChannelMessageEvent","tapObserver","isUnsub","finalize","finish_reason","loggedWarning","healthDetails","logWarning","setLLMPluginVersion","health","accumulateToolCalls","responses","toolCallMessages","recoveredToolCallMessage","tc","recoverToolCallMessage","DEFAULT_MODEL_ID","openai","BASE","ModelConfig","onChange","defaultModelMapping","label","LARGE","defaultModelMappingConfig","mapping","entry","initModelSettings","setDefault","FieldSet","Field","Select","Label","modelSetting","isDefault","FieldLabel","Divider","spacing","margin","Badge","color","Button","variant","onClick","Input","placeholder","newModelName","currentTarget","newMapping","handleToolCall","fc","toolCalls","setToolCalls","running","textContent","tool_call_id","DevSandboxChat","useStream","chatHistory","setChatHistory","currentInput","setCurrentInput","isGenerating","setIsGenerating","chatContainerRef","scrollTop","scrollHeight","toolsLoading","toolsError","toolsData","llm","handleStreamingChatWithHistory","toolCallsStream","otherMessages","partition","contentMessages","idx","lastValueFrom","tcs","firstMessage","startWith","handleNonStreamingChatWithHistory","functionCalls","sendMessage","userMessage","timestamp","assistantMessage","gap","height","border","borderRadius","padding","backgroundColor","fontStyle","display","flexDirection","marginBottom","maxWidth","whiteSpace","wordBreak","boxShadow","fontSize","lineHeight","opacity","TextArea","onKeyDown","shiftKey","preventDefault","flex","rows","Spinner","FormFieldComponent","handleChange","newValue","fieldProps","example","isClearable","Switch","checked","numValue","parseFloat","ToolParameterForm","onParametersChange","onSubmit","isLoading","parseSchema","formData","setFormData","initialData","cleanedData","handleFieldChange","fieldName","isFormValid","textAlign","marginTop","displayName","TOOL_CATEGORIES","list_teams","list_users_by_org","search_dashboards","get_dashboard_by_uid","update_dashboard","get_dashboard_panel_queries","list_datasources","get_datasource_by_uid","get_datasource_by_name","query_prometheus","list_prometheus_metric_metadata","list_prometheus_metric_names","list_prometheus_label_names","list_prometheus_label_values","list_incidents","create_incident","add_activity_to_incident","get_incident","query_loki_logs","list_loki_label_names","list_loki_label_values","query_loki_stats","list_alert_rules","get_alert_rule_by_uid","list_contact_points","list_oncall_schedules","get_oncall_shift","get_current_oncall_users","list_oncall_teams","list_oncall_users","get_sift_investigation","get_sift_analysis","list_sift_investigations","find_error_pattern_logs","find_slow_requests","list_pyroscope_label_names","list_pyroscope_label_values","list_pyroscope_profile_types","fetch_pyroscope_profile","get_assertions","ToolInspector","expanded","setExpanded","parametersInput","setParametersInput","formParameters","setFormParameters","inputMode","setInputMode","callResult","setCallResult","handleFormParametersChange","handleTestTool","generateExampleParameters","fillExampleParameters","borderBottom","justifyContent","alignItems","fontWeight","paramCount","requiredCount","Icon","h4","overflow","formatSchema","TabsBar","Tab","active","onChangeTab","fontFamily","marginLeft","DevSandboxToolInspector","searchFilter","setSearchFilter","filteredTools","searchLower","groupedTools","sortedCategories","grouped","groups","category","localeCompare","CollapsableSection","isOpen","DevSandboxContent","activeTab","setActiveTab","setUseStream","Checkbox","paddingTop","minHeight","DevSandbox","modalIsOpen","setModalIsOpen","closeModal","Modal","onDismiss","Suspense","LoadingPlaceholder","AzureModelDeploymentConfig","modelMapping","modelNames","IconButton","aria-label","deployment","ModelMappingField","onRemove","InlineFieldRow","InlineField","OPENAI_API_URL","OpenAIConfig","secrets","secretsSet","onChangeSecrets","allowCustomPath","parentProvider","useStyles2","getStyles","effectiveProvider","onChangeField","useCustomPath","setUseCustomPath","apiPath","onChangeProvider","className","SecretInput","openAIKey","isConfigured","onReset","organizationId","azureModelMapping","OpenAILogo","theme","useTheme2","svg","viewBox","fill","xmlns","g","clipPath","colors","primary","defs","rect","ANTHROPIC_API_URL","AnthropicConfig","anthropicKey","AnthropicLogo","LLMConfig","optIn","setOptIn","allowGrafanaManagedLLM","enableGrafanaManagedLLM","llmOption","openAI","getEffectiveProvider","getLLMOptionFromSettings","previousOpenAIProvider","setPreviousOpenAIProvider","confirmationDialog","setConfirmationDialog","showProviderSwitchConfirmation","newProvider","switchAction","hasExistingModelConfigurations","getProviderDisplayName","onConfirm","onCancel","enableDevSandbox","sidePadding","providerSection","sectionHeader","Card","isSelected","cardWithoutBottomMargin","Heading","Description","openaiTermsBox","window","open","stopPropagation","Figure","anthropic","ConfirmModal","confirmText","dismissText","css","nestedList","marginRight","medium","background","paddingLeft","typography","fontWeightMedium","secondary","weak","BasicAuthConfig","secretKey","labelWidth","inlineFieldWidth","inlineFieldInputWidth","basicAuthUser","OPENAI_DEFAULT_MODEL","VectorConfig","embed","EmbedderConfig","StoreConfig","store","grafanaVectorAPI","authType","tooltip","authSettings","QdrantConfig","qdrantApiKey","GrafanaVectorAPIConfig","qdrant","colorWeak","updateAndSavePluginSettings","pluginId","persistToGcom","gcomPluginData","secureJsonData","updateGcomProvisionedPluginSettings","updateGrafanaPluginSettings","saveLLMOptInState","getLLMOptInState","plugin","AppPlugin","setRootPage","styles","container","subtitle","sectionsContainer","section","radius","sectionTitle","h3","sectionContent","bodySmall","fullWidthSection","infoBox","transparent","PluginPage","addConfigPage","icon","pinned","secureJsonFields","setSettings","newSecrets","setNewSecrets","configuredSecrets","setConfiguredSecrets","vectorEmbedderBasicAuthPassword","vectorStoreBasicAuthPassword","initialSecrets","updated","setUpdated","managedLLMOptIn","setManagedLLMOptIn","isUpdating","setIsUpdating","healthCheck","setHealthCheck","errorState","validateInputs","fetchData","markAsUpdated","doSave","originalSettings","settingsToSave","healthCheckResult","checkPluginHealth","rollbackError","newSettings","displayVectorStoreOptions"],"sourceRoot":""}